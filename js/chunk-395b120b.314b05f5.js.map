{"version":3,"sources":["webpack:///./node_modules/@arcgis/core/TimeInterval.js","webpack:///./node_modules/@arcgis/core/geometry/support/scaleUtils.js","webpack:///./node_modules/@arcgis/core/layers/MapImageLayer.js","webpack:///./node_modules/@arcgis/core/layers/mixins/TemporalLayer.js","webpack:///./node_modules/@arcgis/core/layers/support/ExportImageParameters.js","webpack:///./node_modules/@arcgis/core/layers/support/TimeReference.js","webpack:///./node_modules/@arcgis/core/layers/support/TimeInfo.js"],"names":["p","u","r","super","this","value","unit","type","Number","json","write","nonNullable","prototype","apiValues","jsonValues","read","l","e","i","extent","o","width","c","spatialReference","U","alwaysRefetch","dpi","gdbVersion","imageFormat","imageMaxHeight","imageMaxWidth","imageTransparency","labelsVisible","isReference","operationalLayerType","sourceJSON","sublayers","url","t","signal","addResolvingPromise","loadFromPortal","supportedTypes","then","_fetchService","supportedImageFormatTypes","indexOf","s","loaded","slice","reverse","flatten","toArray","capabilities","operations","supportsExportMap","exportMap","supportsDynamicLayers","origin","createSublayersForOrigin","a","writeSublayerStructure","n","forEach","push","originOf","some","Object","keys","length","layers","visibleLayers","filter","visible","map","id","pixelRatio","version","clone","shiftCentralMeridian","layer","scale","toJSON","destroy","rotation","m","wkid","JSON","stringify","timeExtent","start","end","time","timeInfo","hasLiveData","bbox","xmin","ymin","xmax","ymax","bboxSR","imageSR","size","responseType","timestamp","query","_ts","customParameters","parsedUrl","path","createExportImageParameters","f","Date","now","dynamicLayers","data","catch","error","returnUpdates","fullExtent","fromJSON","allSublayers","ssl","replace","origins","service","source","Boolean","enabled","overridePolicy","ignoreOrigin","readOnly","T","arguments","timeOffset","useViewTime","exportOptions","timeOffsetUnits","fields","_set","target","definitionExpression","labelingInfo","opacity","minScale","maxScale","renderer","y","_scale","view","hasDynamicLayers","visibleSublayers","toExportImageJSON","serviceSublayers","_get","handles","remove","add","on","notifyChange","propertyName","join","reduce","layerDefs","unshift","format","transparent","dependsOn","respectsDaylightSaving","timezone","respectDaylightSaving","String","d","cumulative","endField","fullTimeExtent","interval","startField","timeReference","trackIdField","useTime","Array","isArray","getTime","timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits","allowNull"],"mappings":"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","file":"js/chunk-395b120b.314b05f5.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"./chunks/tslib.es6.js\";import\"./core/has.js\";import\"./core/Logger.js\";import\"./core/accessorSupport/ensureType.js\";import{property as o}from\"./core/accessorSupport/decorators/property.js\";import{subclass as e}from\"./core/accessorSupport/decorators/subclass.js\";import\"./core/urlUtils.js\";import\"./core/uuid.js\";import\"./portal/support/resourceExtension.js\";import{JSONSupport as t}from\"./core/JSONSupport.js\";import{millisecondsPerTimeUnit as s,timeUnitKebabDictionary as i}from\"./layers/support/timeUtils.js\";var p;let u=p=class extends t{constructor(r){super(r),this.value=0,this.unit=\"milliseconds\"}toMilliseconds(){return this.value*s[this.unit]}clone(){return new p({value:this.value,unit:this.unit})}};r([o({type:Number,json:{write:!0},nonNullable:!0})],u.prototype,\"value\",void 0),r([o({type:i.apiValues,json:{type:i.jsonValues,read:i.read,write:i.write},nonNullable:!0})],u.prototype,\"unit\",void 0),u=p=r([e(\"esri.TimeInterval\")],u);var l=u;export default l;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{getMetersPerUnitForSR as t,inchesPerMeter as n}from\"../../core/unitUtils.js\";function e(e,r){const i=r||e.extent,o=e.width,c=t(i&&i.spatialReference);return i&&o?i.width/o*c*n*96:0}function r(e,r){return e/(t(r)*n*96)}function i(e,r){return e*(t(r)*n*96)}function o(t,n){const e=t.extent,i=t.width,o=r(n,e.spatialReference);return e.clone().expand(o*i/e.width)}export{o as getExtentForScale,r as getResolutionForScale,e as getScale,i as getScaleForResolution};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import{isSome as r}from\"../core/maybe.js\";import\"../core/Logger.js\";import{Integer as t}from\"../core/accessorSupport/ensureType.js\";import{property as s}from\"../core/accessorSupport/decorators/property.js\";import{reader as o}from\"../core/accessorSupport/decorators/reader.js\";import{subclass as i}from\"../core/accessorSupport/decorators/subclass.js\";import{writer as a}from\"../core/accessorSupport/decorators/writer.js\";import p from\"../core/Error.js\";import\"../core/urlUtils.js\";import\"../core/uuid.js\";import{nameToId as m}from\"../core/accessorSupport/PropertyOrigin.js\";import\"../portal/support/resourceExtension.js\";import{resolve as n,reject as l,isAbortError as c}from\"../core/promiseUtils.js\";import u from\"../geometry/Extent.js\";import y from\"../request.js\";import{loadAll as h}from\"../core/loadAll.js\";import d from\"./Layer.js\";import f from\"../TimeExtent.js\";import{MultiOriginJSONMixin as g}from\"../core/MultiOriginJSONSupport.js\";import{url as j}from\"./support/commonProperties.js\";import{OperationalLayer as b}from\"./mixins/OperationalLayer.js\";import{ArcGISService as x}from\"./mixins/ArcGISService.js\";import{BlendLayer as v}from\"./mixins/BlendLayer.js\";import{CustomParametersMixin as S}from\"./mixins/CustomParametersMixin.js\";import{PortalLayer as w}from\"./mixins/PortalLayer.js\";import{RefreshableLayer as O}from\"./mixins/RefreshableLayer.js\";import{ScaleRangeLayer as L}from\"./mixins/ScaleRangeLayer.js\";import{TemporalLayer as E}from\"./mixins/TemporalLayer.js\";import{HandleOwnerMixin as I}from\"../core/HandleOwner.js\";import{getScale as M}from\"../geometry/support/scaleUtils.js\";import{ArcGISMapService as q}from\"./mixins/ArcGISMapService.js\";import P from\"./support/Sublayer.js\";import{shouldWriteSublayerStructure as N}from\"./support/sublayerUtils.js\";import{SublayersOwner as R}from\"./mixins/SublayersOwner.js\";import{ExportImageParameters as J}from\"./support/ExportImageParameters.js\";let U=class extends(v(E(L(O(R(q(x(b(w(g(S(I(d))))))))))))){constructor(...e){super(...e),this.alwaysRefetch=!1,this.dpi=96,this.gdbVersion=null,this.imageFormat=\"png24\",this.imageMaxHeight=2048,this.imageMaxWidth=2048,this.imageTransparency=!0,this.labelsVisible=!1,this.isReference=null,this.operationalLayerType=\"ArcGISMapServiceLayer\",this.sourceJSON=null,this.sublayers=null,this.type=\"map-image\",this.url=null}normalizeCtorArgs(e,r){return\"string\"==typeof e?{url:e,...r}:e}load(e){const t=r(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:[\"Map Service\"]},e).then((()=>this._fetchService(t)),(()=>this._fetchService(t)))),n(this)}readImageFormat(e,r){const t=r.supportedImageFormatTypes;return t&&t.indexOf(\"PNG32\")>-1?\"png32\":\"png24\"}writeSublayers(e,r,t,s){if(!this.loaded||!e)return;const o=e.slice().reverse().flatten((({sublayers:e})=>e&&e.toArray().reverse())).toArray();let i=!1;if(this.capabilities&&this.capabilities.operations.supportsExportMap&&this.capabilities.exportMap.supportsDynamicLayers){const e=m(s.origin);if(3===e){const e=this.createSublayersForOrigin(\"service\").sublayers;i=N(o,e,2)}else if(e>3){const e=this.createSublayersForOrigin(\"portal-item\");i=N(o,e.sublayers,m(e.origin))}}const a=[],p={writeSublayerStructure:i,...s};let n=i;o.forEach((e=>{const r=e.write({},p);a.push(r),n=n||\"user\"===e.originOf(\"visible\")}));a.some((e=>Object.keys(e).length>1))&&(r.layers=a),n&&(r.visibleLayers=o.filter((e=>e.visible)).map((e=>e.id)))}createExportImageParameters(e,r,t,s){const o=s&&s.pixelRatio||1;e&&this.version>=10&&(e=e.clone().shiftCentralMeridian());const i=new J({layer:this,scale:M({extent:e,width:r})*o}),a=i.toJSON();i.destroy();const p=!s||!s.rotation||this.version<10.3?{}:{rotation:-s.rotation},m=e&&e.spatialReference,n=m.wkid||JSON.stringify(m.toJSON());a.dpi*=o;const l={};if(null!=s&&s.timeExtent){const{start:e,end:r}=s.timeExtent.toJSON();l.time=e&&r&&e===r?\"\"+e:`${null==e?\"null\":e},${null==r?\"null\":r}`}else this.timeInfo&&!this.timeInfo.hasLiveData&&(l.time=\"null,null\");return{bbox:e&&e.xmin+\",\"+e.ymin+\",\"+e.xmax+\",\"+e.ymax,bboxSR:n,imageSR:n,size:r+\",\"+t,...a,...p,...l}}async fetchImage(e,r,t,s){const o={responseType:\"image\"};s&&s.timestamp&&(o.query={...o.query,_ts:s.timestamp}),s&&s.signal&&(o.signal=s.signal),this.customParameters&&Object.keys(this.customParameters).length&&(o.query={...this.customParameters,...o.query});const i=this.parsedUrl.path+\"/export\",a={...this.parsedUrl.query,...this.createExportImageParameters(e,r,t,s),f:\"image\",_ts:this.alwaysRefetch?Date.now():null};if(null!=a.dynamicLayers&&!this.capabilities.exportMap.supportsDynamicLayers)return l(new p(\"mapimagelayer:dynamiclayer-not-supported\",`service ${this.url} doesn't support dynamic layers, which is required to be able to change the sublayer's order, rendering, labeling or source.`,{query:a}));o.query?o.query={...a,...o.query}:o.query=a;return y(i,o).then((e=>e.data)).catch((e=>{if(c(e))throw e;throw new p(\"mapimagelayer:image-fetch-error\",`Unable to load image: ${i}`,{error:e})}))}async fetchRecomputedExtents(e={}){const r={...e,query:{returnUpdates:!0,f:\"json\"}},{data:t}=await y(this.url,r),{extent:s,fullExtent:o,timeExtent:i}=t,a=s||o;return{fullExtent:a&&u.fromJSON(a),timeExtent:i&&f.fromJSON({start:i[0],end:i[1]})}}loadAll(){return h(this,(e=>{e(this.allSublayers)}))}async _fetchService(e){if(this.sourceJSON)return void this.read(this.sourceJSON,{origin:\"service\",url:this.parsedUrl});const{data:r,ssl:t}=await y(this.parsedUrl.path,{query:{f:\"json\",...this.parsedUrl.query,...this.customParameters},signal:e});t&&(this.url=this.url.replace(/^http:/i,\"https:\")),this.sourceJSON=r,this.read(r,{origin:\"service\",url:this.parsedUrl})}};e([s()],U.prototype,\"alwaysRefetch\",void 0),e([s()],U.prototype,\"dpi\",void 0),e([s()],U.prototype,\"gdbVersion\",void 0),e([s({json:{read:!1,write:!1}})],U.prototype,\"popupEnabled\",void 0),e([s()],U.prototype,\"imageFormat\",void 0),e([o(\"imageFormat\",[\"supportedImageFormatTypes\"])],U.prototype,\"readImageFormat\",null),e([s({json:{origins:{service:{read:{source:\"maxImageHeight\"}}}}})],U.prototype,\"imageMaxHeight\",void 0),e([s({json:{origins:{service:{read:{source:\"maxImageWidth\"}}}}})],U.prototype,\"imageMaxWidth\",void 0),e([s()],U.prototype,\"imageTransparency\",void 0),e([s({json:{read:!1,write:!1}})],U.prototype,\"labelsVisible\",void 0),e([s({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],U.prototype,\"isReference\",void 0),e([s({type:[\"ArcGISMapServiceLayer\"]})],U.prototype,\"operationalLayerType\",void 0),e([s()],U.prototype,\"sourceJSON\",void 0),e([s({json:{write:{ignoreOrigin:!0}}})],U.prototype,\"sublayers\",void 0),e([a(\"sublayers\",{layers:{type:[P]},visibleLayers:{type:[t]}})],U.prototype,\"writeSublayers\",null),e([s({type:[\"show\",\"hide\",\"hide-children\"]})],U.prototype,\"listMode\",void 0),e([s({json:{read:!1},readOnly:!0,value:\"map-image\"})],U.prototype,\"type\",void 0),e([s(j)],U.prototype,\"url\",void 0),U=e([i(\"esri.layers.MapImageLayer\")],U);var T=U;export default T;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import{reader as o}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as r}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{fixTimeInfoFields as s}from\"../support/fieldUtils.js\";import{timeUnitKebabDictionary as i}from\"../support/timeUtils.js\";import p from\"../../TimeExtent.js\";import m from\"../../TimeInterval.js\";import n from\"../support/TimeInfo.js\";function u(e){return void 0!==e.timeInfo}const f=u=>{let f=class extends u{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(e,t){const o=t.timeInfo.exportOptions;if(!o)return null;const r=o.timeOffset,s=i.fromJSON(o.timeOffsetUnits);return r&&s?new m({value:r,unit:s}):null}set timeInfo(e){s(e,this.fields),this._set(\"timeInfo\",e)}};return e([t({type:p,json:{write:!1}})],f.prototype,\"timeExtent\",void 0),e([t({type:m})],f.prototype,\"timeOffset\",void 0),e([o(\"service\",\"timeOffset\",[\"timeInfo.exportOptions\"])],f.prototype,\"readOffset\",null),e([t({value:null,type:n,json:{write:!0,origins:{\"web-document\":{read:!1,write:!1}}}})],f.prototype,\"timeInfo\",null),e([t({type:Boolean,json:{read:{source:\"timeAnimation\"},write:{target:\"timeAnimation\"},origins:{\"web-scene\":{read:!1,write:!1}}}})],f.prototype,\"useViewTime\",void 0),f=e([r(\"esri.layers.mixins.TemporalLayer\")],f),f};export{f as TemporalLayer,u as isTemporalLayer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as s}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as r}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import i from\"../../core/Accessor.js\";import{combinedViewLayerTimeExtentProperty as a}from\"./commonProperties.js\";import{HandleOwnerMixin as t}from\"../../core/HandleOwner.js\";import{isExportDynamic as l}from\"./sublayerUtils.js\";import n from\"../../views/View.js\";const o={visible:\"visibleSublayers\",definitionExpression:\"layerDefs\",labelingInfo:\"hasDynamicLayers\",labelsVisible:\"hasDynamicLayers\",opacity:\"hasDynamicLayers\",minScale:\"visibleSublayers\",maxScale:\"visibleSublayers\",renderer:\"hasDynamicLayers\",source:\"hasDynamicLayers\"};let y=class extends(t(i)){constructor(){super(...arguments),this._scale=null,this.view=null}destroy(){this.layer=this.view=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const e=this.visibleSublayers.map((e=>e.toExportImageJSON()));return e.length?JSON.stringify(e):null}get hasDynamicLayers(){return this.layer&&l(this.visibleSublayers,this.layer.serviceSublayers,this.layer)}set layer(e){this._get(\"layer\")!==e&&(this._set(\"layer\",e),this.handles.remove(\"layer\"),e&&this.handles.add([e.allSublayers.on(\"change\",(()=>this.notifyChange(\"visibleSublayers\"))),e.on(\"sublayer-update\",(e=>this.notifyChange(o[e.propertyName])))],\"layer\"))}get layers(){const e=this.visibleSublayers;return e?e.length?\"show:\"+e.map((e=>e.id)).join(\",\"):\"show:-1\":null}get layerDefs(){const e=this.visibleSublayers.filter((e=>null!=e.definitionExpression));return e.length?JSON.stringify(e.reduce(((e,s)=>(e[s.id]=s.definitionExpression,e)),{})):null}get scale(){return null!=this._scale?this._scale:this.view&&this.view.scale||0}set scale(e){this.view||(this._scale=e,this.notifyChange(\"scale\"))}get version(){const e=this;e.layers,e.layerDefs,e.dynamicLayers,e.timeExtent;const s=e.layer;return s&&(s.dpi,s.imageFormat,s.imageTransparency,s.gdbVersion),(this._get(\"version\")||0)+1}set version(e){this._set(\"version\",e)}get visibleSublayers(){const e=[];if(!this.layer)return e;const s=this.layer.sublayers,r=s=>{const i=this.scale,a=0===i,t=0===s.minScale||i<=s.minScale,l=0===s.maxScale||i>=s.maxScale;s.visible&&(a||t&&l)&&(s.sublayers?s.sublayers.forEach(r):e.unshift(s))};s&&s.forEach(r);const i=this._get(\"visibleSublayers\");return!i||i.length!==e.length||i.some(((s,r)=>e[r]!==s))?e:i}toJSON(){const e=this.layer;let s={dpi:e.dpi,format:e.imageFormat,transparent:e.imageTransparency,gdbVersion:e.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?s.dynamicLayers=this.dynamicLayers:s={...s,layers:this.layers,layerDefs:this.layerDefs},s}};e([s({readOnly:!0,dependsOn:[\"hasDynamicLayers\",\"visibleSublayers\"]})],y.prototype,\"dynamicLayers\",null),e([s({readOnly:!0,dependsOn:[\"visibleSublayers\",\"layer.serviceSublayers\",\"layer.capabilities\"]})],y.prototype,\"hasDynamicLayers\",null),e([s()],y.prototype,\"layer\",null),e([s({readOnly:!0,dependsOn:[\"visibleSublayers\"]})],y.prototype,\"layers\",null),e([s({readOnly:!0,dependsOn:[\"visibleSublayers\"]})],y.prototype,\"layerDefs\",null),e([s({type:Number,dependsOn:[\"view.scale\"]})],y.prototype,\"scale\",null),e([s(a)],y.prototype,\"timeExtent\",void 0),e([s({dependsOn:[\"layers\",\"layerDefs\",\"dynamicLayers\",\"layer.dpi\",\"layer.imageFormat\",\"layer.imageTransparency\",\"layer.gdbVersion\",\"timeExtent\"]})],y.prototype,\"version\",null),e([s({type:n})],y.prototype,\"view\",void 0),e([s({readOnly:!0,dependsOn:[\"layer.sublayers\",\"scale\"]})],y.prototype,\"visibleSublayers\",null),y=e([r(\"esri.layers.mixins.ExportImageParameters\")],y);export{y as ExportImageParameters};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import{reader as t}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as o}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{JSONSupport as s}from\"../../core/JSONSupport.js\";var i;let p=i=class extends s{constructor(e){super(e),this.respectsDaylightSaving=!1,this.timezone=null}readRespectsDaylightSaving(e,r){return void 0!==r.respectsDaylightSaving?r.respectsDaylightSaving:void 0!==r.respectDaylightSaving&&r.respectDaylightSaving}clone(){const{respectsDaylightSaving:e,timezone:r}=this;return new i({respectsDaylightSaving:e,timezone:r})}};e([r({type:Boolean,json:{write:!0}})],p.prototype,\"respectsDaylightSaving\",void 0),e([t(\"respectsDaylightSaving\",[\"respectsDaylightSaving\",\"respectDaylightSaving\"])],p.prototype,\"readRespectsDaylightSaving\",null),e([r({type:String,json:{read:{source:\"timeZone\"},write:{target:\"timeZone\"}}})],p.prototype,\"timezone\",void 0),p=i=e([o(\"esri.layers.support.TimeReference\")],p);var a=p;export default a;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import{clone as t}from\"../../core/lang.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import{reader as i}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as l}from\"../../core/accessorSupport/decorators/subclass.js\";import{writer as o}from\"../../core/accessorSupport/decorators/writer.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{JSONSupport as n}from\"../../core/JSONSupport.js\";import{timeUnitKebabDictionary as a}from\"./timeUtils.js\";import s from\"../../TimeExtent.js\";import m from\"../../TimeInterval.js\";import u from\"./TimeReference.js\";var p;let d=p=class extends n{constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeReference=null,this.trackIdField=null,this.useTime=!0}readFullTimeExtent(e,t){if(!t.timeExtent||!Array.isArray(t.timeExtent)||2!==t.timeExtent.length)return null;const r=new Date(t.timeExtent[0]),i=new Date(t.timeExtent[1]);return new s({start:r,end:i})}writeFullTimeExtent(e,t){e&&e.start&&e.end?t.timeExtent=[e.start.getTime(),e.end.getTime()]:t.timeExtent=null}readInterval(e,t){return t.timeInterval&&t.timeIntervalUnits?new m({value:t.timeInterval,unit:a.fromJSON(t.timeIntervalUnits)}):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?new m({value:t.defaultTimeInterval,unit:a.fromJSON(t.defaultTimeIntervalUnits)}):null}writeInterval(e,t){if(e){const r=e.toJSON();t.timeInterval=r.value,t.timeIntervalUnits=r.unit}else t.timeInterval=null,t.timeIntervalUnits=null}clone(){const{cumulative:e,endField:r,hasLiveData:i,interval:l,startField:o,timeReference:n,fullTimeExtent:a,trackIdField:s,useTime:m}=this;return new p({cumulative:e,endField:r,hasLiveData:i,interval:l,startField:o,timeReference:t(n),fullTimeExtent:t(a),trackIdField:s,useTime:m})}};e([r({type:Boolean,json:{read:{source:\"exportOptions.timeDataCumulative\"},write:{target:\"exportOptions.timeDataCumulative\"}}})],d.prototype,\"cumulative\",void 0),e([r({type:String,json:{read:{source:\"endTimeField\"},write:{target:\"endTimeField\",allowNull:!0}}})],d.prototype,\"endField\",void 0),e([r({type:s,json:{write:{enabled:!0,allowNull:!0}}})],d.prototype,\"fullTimeExtent\",void 0),e([i(\"fullTimeExtent\",[\"timeExtent\"])],d.prototype,\"readFullTimeExtent\",null),e([o(\"fullTimeExtent\")],d.prototype,\"writeFullTimeExtent\",null),e([r({type:Boolean,json:{write:!0}})],d.prototype,\"hasLiveData\",void 0),e([r({type:m,json:{write:{enabled:!0,allowNull:!0}}})],d.prototype,\"interval\",void 0),e([i(\"interval\",[\"timeInterval\",\"timeIntervalUnits\",\"defaultTimeInterval\",\"defaultTimeIntervalUnits\"])],d.prototype,\"readInterval\",null),e([o(\"interval\")],d.prototype,\"writeInterval\",null),e([r({type:String,json:{read:{source:\"startTimeField\"},write:{target:\"startTimeField\",allowNull:!0}}})],d.prototype,\"startField\",void 0),e([r({type:u,json:{write:{enabled:!0,allowNull:!0}}})],d.prototype,\"timeReference\",void 0),e([r({type:String,json:{write:{enabled:!0,allowNull:!0}}})],d.prototype,\"trackIdField\",void 0),e([r({type:Boolean,json:{read:{source:\"exportOptions.useTime\"},write:{target:\"exportOptions.useTime\"}}})],d.prototype,\"useTime\",void 0),d=p=e([l(\"esri.layers.support.TimeInfo\")],d);var c=d;export default c;\n"],"sourceRoot":""}