(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ff2bafc0","chunk-2d0d3e74","chunk-2d0d3e74"],{"008c":function(t,e,i){"use strict";i.d(e,"a",(function(){return j})),i.d(e,"b",(function(){return w})),i.d(e,"c",(function(){return o})),i.d(e,"d",(function(){return F})),i.d(e,"e",(function(){return v})),i.d(e,"f",(function(){return R})),i.d(e,"g",(function(){return A}));var s=i("a9ab");const n=(t,e,i)=>[e,i],r=(t,e,i)=>[e,i,t[2]],a=(t,e,i)=>[e,i,t[2],t[3]];function o(t){return t?{originPosition:"upper-left"===t.originPosition?"upperLeft":"lower-left"===t.originPosition?"lowerLeft":t.originPosition,scale:[t.tolerance,t.tolerance],translate:[t.extent.xmin,t.extent.ymax]}:null}function u({scale:t,translate:e},i){return Math.round((i-e[0])/t[0])}function c({scale:t,translate:e},i){return Math.round((e[1]-i)/t[1])}function h(t,e,i){const s=[];let n,r,a,o;for(let h=0;h<i.length;h++){const l=i[h];h>0?(a=u(t,l[0]),o=c(t,l[1]),a===n&&o===r||(s.push(e(l,a-n,o-r)),n=a,r=o)):(n=u(t,l[0]),r=c(t,l[1]),s.push(e(l,n,r)))}return s.length>0?s:null}function l(t,e,i,s){return h(t,i?s?a:r:s?r:n,e)}function f(t,e,i,s){const o=[],u=i?s?a:r:s?r:n;for(let n=0;n<e.length;n++){const i=h(t,u,e[n]);i&&i.length>=3&&o.push(i)}return o.length?o:null}function d(t,e,i,s){const o=[],u=i?s?a:r:s?r:n;for(let n=0;n<e.length;n++){const i=h(t,u,e[n]);i&&i.length>=2&&o.push(i)}return o.length?o:null}function m({scale:t,translate:e},i){return i*t[0]+e[0]}function p({scale:t,translate:e},i){return e[1]-i*t[1]}function g(t,e,i){const s=new Array(i.length);if(!i.length)return s;const[n,r]=t.scale;let a=m(t,i[0][0]),o=p(t,i[0][1]);s[0]=e(i[0],a,o);for(let u=1;u<i.length;u++){const t=i[u];a+=t[0]*n,o-=t[1]*r,s[u]=e(t,a,o)}return s}function y(t,e,i){const s=new Array(i.length);for(let n=0;n<i.length;n++)s[n]=g(t,e,i[n]);return s}function _(t,e,i,s){return g(t,i?s?a:r:s?r:n,e)}function b(t,e,i,s){return y(t,i?s?a:r:s?r:n,e)}function x(t,e,i,s){return y(t,i?s?a:r:s?r:n,e)}function S(t,e,i,s,n){return e.xmin=u(t,i.xmin),e.ymin=c(t,i.ymin),e.xmax=u(t,i.xmax),e.ymax=c(t,i.ymax),e!==i&&(s&&(e.zmin=i.zmin,e.zmax=i.zmax),n&&(e.mmin=i.mmin,e.mmax=i.mmax)),e}function I(t,e,i,s,n){return e.points=l(t,i.points,s,n),e}function w(t,e,i,s,n){return e.x=u(t,i.x),e.y=c(t,i.y),e!==i&&(s&&(e.z=i.z),n&&(e.m=i.m)),e}function O(t,e,i,s,n){const r=f(t,i.rings,s,n);return r?(e.rings=r,e):null}function M(t,e,i,s,n){const r=d(t,i.paths,s,n);return r?(e.paths=r,e):null}function j(t,e){return t&&e?Object(s["f"])(e)?w(t,{},e,!1,!1):Object(s["h"])(e)?M(t,{},e,!1,!1):Object(s["g"])(e)?O(t,{},e,!1,!1):Object(s["e"])(e)?I(t,{},e,!1,!1):Object(s["d"])(e)?S(t,{},e,!1,!1):null:null}function F(t,e,i,s,n){return e.points=_(t,i.points,s,n),e}function v(t,e,i,s,n){return e.x=m(t,i.x),e.y=p(t,i.y),e!==i&&(s&&(e.z=i.z),n&&(e.m=i.m)),e}function R(t,e,i,s,n){return e.rings=x(t,i.rings,s,n),e}function A(t,e,i,s,n){return e.paths=b(t,i.paths,s,n),e}},"1ec3":function(t,e,i){"use strict";i.d(e,"a",(function(){return f})),i.d(e,"b",(function(){return p})),i.d(e,"c",(function(){return y}));var s=i("f4cc"),n=i("7f83"),r=i("9786"),a=i("8188"),o=i("d641");const u=[0,0];function c(t,e){if(!e)return null;if("x"in e){const i={x:0,y:0};return[i.x,i.y]=t(e.x,e.y,u),null!=e.z&&(i.z=e.z),null!=e.m&&(i.m=e.m),i}if("xmin"in e){const i={xmin:0,ymin:0,xmax:0,ymax:0};return[i.xmin,i.ymin]=t(e.xmin,e.ymin,u),[i.xmax,i.ymax]=t(e.xmax,e.ymax,u),e.hasZ&&(i.zmin=e.zmin,i.zmax=e.zmax,i.hasZ=!0),e.hasM&&(i.mmin=e.mmin,i.mmax=e.mmax,i.hasM=!0),i}return"rings"in e?{rings:h(e.rings,t),hasM:e.hasM,hasZ:e.hasZ}:"paths"in e?{paths:h(e.paths,t),hasM:e.hasM,hasZ:e.hasZ}:"points"in e?{points:l(e.points,t),hasM:e.hasM,hasZ:e.hasZ}:void 0}function h(t,e){const i=[];for(const s of t)i.push(l(s,e));return i}function l(t,e){const i=[];for(const s of t){const t=e(s[0],s[1],[0,0]);i.push(t),s.length>2&&t.push(s[2]),s.length>3&&t.push(s[3])}return i}async function f(t,e){if(!e)return;const i=Array.isArray(t)?t.map(t=>{var e;return null==(e=t.geometry)?void 0:e.spatialReference}):[t];await Object(a["b"])(i.map(t=>({source:t,dest:e})))}const d=c.bind(null,r["c"]),m=c.bind(null,r["f"]);function p(t,e,i){return t?(i||(i=e,e=t.spatialReference),Object(n["i"])(e)&&Object(n["i"])(i)&&!Object(n["c"])(e,i)?Object(r["a"])(e,i)?Object(n["m"])(i)?d(t):m(t):Object(a["h"])(o["a"],[t],e,i,null)[0]:t):t}const g=new class{constructor(){this._jobs=[],this._timer=null,this._process=this._process.bind(this)}async push(t,e,i){!t||!t.length||!e||!i||Object(n["c"])(e,i);const r={geometries:t,inSpatialReference:e,outSpatialReference:i,resolve:null};return this._jobs.push(r),Object(s["c"])(t=>{r.resolve=t,null===this._timer&&(this._timer=setTimeout(this._process,10))})}_process(){this._timer=null;const t=this._jobs.shift();if(!t)return;const{geometries:e,inSpatialReference:i,outSpatialReference:s,resolve:u}=t;Object(r["a"])(i,s)?Object(n["m"])(s)?u(e.map(d)):u(e.map(m)):u(Object(a["h"])(o["a"],e,i,s,null)),this._jobs.length>0&&(this._timer=setTimeout(this._process,10))}};async function y(t,e,i){return g.push(t,e,i)}},4261:function(t,e,i){"use strict";i.d(e,"a",(function(){return x})),i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return g})),i.d(e,"d",(function(){return b})),i.d(e,"e",(function(){return a})),i.d(e,"f",(function(){return u})),i.d(e,"g",(function(){return o})),i.d(e,"h",(function(){return y})),i.d(e,"i",(function(){return r})),i.d(e,"j",(function(){return p})),i.d(e,"k",(function(){return m})),i.d(e,"l",(function(){return d})),i.d(e,"m",(function(){return f}));var s=i("b2b2");i("3af1"),i("9180");function n(t=S){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function r(t,e,i,s,r,a,o=n()){return o[0]=t,o[1]=e,o[2]=i,o[3]=s,o[4]=r,o[5]=a,o}function a(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[3]),t[4]=Math.max(t[4],e[4]),t[5]=Math.max(t[5],e[5])}function o(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[0]),t[4]=Math.max(t[4],e[1]),t[5]=Math.max(t[5],e[2])}function u(t,e,i){const s=e.length;let n=t[0],r=t[1],a=t[2],o=t[3],u=t[4],c=t[5];if(i)for(let h=0;h<s;h++){const t=e[h];n=Math.min(n,t[0]),r=Math.min(r,t[1]),a=Math.min(a,t[2]),o=Math.max(o,t[0]),u=Math.max(u,t[1]),c=Math.max(c,t[2])}else for(let h=0;h<s;h++){const t=e[h];n=Math.min(n,t[0]),r=Math.min(r,t[1]),o=Math.max(o,t[0]),u=Math.max(u,t[1])}t[0]=n,t[1]=r,t[2]=a,t[3]=o,t[4]=u,t[5]=c}function c(t){return t[0]>=t[3]?0:t[3]-t[0]}function h(t){return t[1]>=t[4]?0:t[4]-t[1]}function l(t){return t[2]>=t[5]?0:t[5]-t[2]}function f(t,e=[0,0,0]){return e[0]=c(t),e[1]=h(t),e[2]=l(t),e}function d(t,e,i=t){return i[0]=e[0],i[1]=e[1],i[2]=e[2],i!==t&&(i[3]=t[3],i[4]=t[4],i[5]=t[5]),i}function m(t,e,i=t){return i[3]=e[0],i[4]=e[1],i[5]=e[2],i!==t&&(i[0]=t[0],i[1]=t[1],i[2]=t[2]),t}function p(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function g(t){return t?p(t,x):n(x)}function y(t,e){return t[0]=e[0],t[1]=e[1],t[2]=Number.NEGATIVE_INFINITY,t[3]=e[2],t[4]=e[3],t[5]=Number.POSITIVE_INFINITY,t}function _(t){return 6===t.length}function b(t,e,i){if(Object(s["g"])(t)||Object(s["g"])(e))return t===e;if(!_(t)||!_(e))return!1;if(i){for(let s=0;s<t.length;s++)if(!i(t[s],e[s]))return!1}else for(let s=0;s<t.length;s++)if(t[s]!==e[s])return!1;return!0}const x=[1/0,1/0,1/0,-1/0,-1/0,-1/0],S=[0,0,0,0,0,0];n()},4637:function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));var s=i("5f6c"),n=Object(s["b"])((function(t){var e;void 0!==(e=function(){function t(t,i,n,r,a){e(t,i,n||0,r||t.length-1,a||s)}function e(t,s,n,r,a){for(;r>n;){if(r-n>600){var o=r-n+1,u=s-n+1,c=Math.log(o),h=.5*Math.exp(2*c/3),l=.5*Math.sqrt(c*h*(o-h)/o)*(u-o/2<0?-1:1);e(t,s,Math.max(n,Math.floor(s-u*h/o+l)),Math.min(r,Math.floor(s+(o-u)*h/o+l)),a)}var f=t[s],d=n,m=r;for(i(t,n,s),a(t[r],f)>0&&i(t,n,r);d<m;){for(i(t,d,m),d++,m--;a(t[d],f)<0;)d++;for(;a(t[m],f)>0;)m--}0===a(t[n],f)?i(t,n,m):i(t,++m,r),m<=s&&(n=m+1),s<=m&&(r=m-1)}}function i(t,e,i){var s=t[e];t[e]=t[i],t[i]=s}function s(t,e){return t<e?-1:t>e?1:0}return t}())&&(t.exports=e)}))},"5f6c":function(t,e,i){"use strict";(function(t){i.d(e,"a",(function(){return r})),i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return s}));"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof t||"undefined"!=typeof self&&self;function s(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function n(t,e,i){return t(i={path:e,exports:{},require:function(t,e){return r(null==e&&i.path)}},i.exports),i.exports}function r(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}}).call(this,i("c8ba"))},6411:function(t,e,i){"use strict";var s=i("7ffa"),n=i("b2b2"),r=i("ce50"),a=i("f4cc"),o=i("7f83"),u=i("28b1"),c=i("a9ab"),h=i("8048"),l=i("9180"),f=i("aefa"),d=i("306f"),m=i("80b7"),p=i("a94c"),g=i("4261"),y=i("1ec3"),_=i("d7f2"),b=i("66a2");class x{constructor(t,e){this._cache=new _["a"](t),this._invalidCache=new _["a"](e)}get(t,e){const i=`${e.uid}:${t}`,s=this._cache.get(i);if(s)return s;if(void 0!==this._invalidCache.get(i))return null;try{const s=b["WhereClause"].create(t,e);return this._cache.put(i,s),s}catch{return this._invalidCache.put(i,null),null}}}const S=new x(50,500),I="feature-store:unsupported-query",w=new Set(["esriFieldTypeOID","esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeLong","esriFieldTypeDate"]);function O(t,e){if(!e)return!0;const i=S.get(e,t);if(!i)throw new r["a"](I,"invalid SQL expression",{where:e});if(!i.isStandardized)throw new r["a"](I,"where clause is not standard",{where:e});return F(t,i.fieldNames,"where clause contains missing fields"),!0}function M(t,e,i){if(!e)return!0;const s=S.get(e,t);if(!s)throw new r["a"](I,"invalid SQL expression",{having:e});if(!s.isAggregate)throw new r["a"](I,"having does not contain a valid aggregate function",{having:e});const n=s.fieldNames;if(F(t,n,"having contains missing fields"),!s.getExpressions().every(e=>{const{aggregateType:s,field:n}=e,r=t.has(n)&&t.get(n).name;return i.some(e=>{const{onStatisticField:i,statisticType:n}=e;return(t.has(i)&&t.get(i).name)===r&&n.toLowerCase().trim()===s})}))throw new r["a"](I,"expressions in having should also exist in outStatistics",{having:e});return!0}function j(t,e){return t?S.get(t,e):null}function F(t,e,i,s=!0){const n=[];for(const o of e)if("*"!==o&&!t.has(o))if(s){const e=v(o);try{const i=j(e,t);if(!i)throw new r["a"](I,"invalid SQL expression",{where:e});if(!i.isStandardized)throw new r["a"](I,"expression is not standard",{clause:i});F(t,i.fieldNames,"expression contains missing fields")}catch(a){const t=a&&a.details;if(t&&(t.clause||t.where))throw a;t&&t.missingFields?n.push(...t.missingFields):n.push(o)}}else n.push(o);if(n.length)throw new r["a"](I,i,{missingFields:n})}function v(t){return t.split(" as ")[0]}function R(t){return t.split(" as ")[1]}function A(t,e){const i=e.get(t);return!!i&&!w.has(i.type)}var T=i("d518"),N=i("abb8"),z=i("6655"),E=i("008c"),Q=class{constructor(t,e,i){this._fieldDataCache=new Map,this._returnDistinctMap=new Map,this.returnDistinctValues=t.returnDistinctValues,this.fieldsIndex=i,this.featureAdapter=e;const s=t.outFields;if(s&&-1===s.indexOf("*")){this.outFields=s;let t=0;for(const e of s){const s=v(e),n=this.fieldsIndex.get(s),r=n?null:j(s,i),a=n?n.name:R(e)||"FIELD_EXP_"+t++;this._fieldDataCache.set(e,{alias:a,clause:r})}}}countDistinctValues(t){return this.returnDistinctValues?(t.forEach(t=>this.getAttributes(t)),this._returnDistinctMap.size):t.length}getAttributes(t){const e=this._processAttributesForOutFields(t);return this._processAttributesForDistinctValues(e)}getFieldValue(t,e,i){const s=i?i.name:e;let n=null;return this._fieldDataCache.has(s)?n=this._fieldDataCache.get(s).clause:i||(n=j(e,this.fieldsIndex),this._fieldDataCache.set(s,{alias:s,clause:n})),i?this.featureAdapter.getAttribute(t,s):n.calculateValue(t,this.featureAdapter)}validateItem(t,e){return this._fieldDataCache.has(e)||this._fieldDataCache.set(e,{alias:e,clause:j(e,this.fieldsIndex)}),this._fieldDataCache.get(e).clause.testFeature(t,this.featureAdapter)}validateItems(t,e){return this._fieldDataCache.has(e)||this._fieldDataCache.set(e,{alias:e,clause:j(e,this.fieldsIndex)}),this._fieldDataCache.get(e).clause.testSet(t,this.featureAdapter)}_processAttributesForOutFields(t){const e=this.outFields;if(!e||!e.length)return this.featureAdapter.getAttributes(t);const i={};for(const s of e){const{alias:e,clause:n}=this._fieldDataCache.get(s);i[e]=n?n.calculateValue(t,this.featureAdapter):this.featureAdapter.getAttribute(t,e)}return i}_processAttributesForDistinctValues(t){if(Object(n["g"])(t)||!this.returnDistinctValues)return t;const e=this.outFields,i=[];if(e)for(const n of e){const{alias:e}=this._fieldDataCache.get(n);i.push(t[e])}else for(const n in t)i.push(t[n]);const s=`${(e||["*"]).join(",")}=${i.join(",")}`;let r=this._returnDistinctMap.get(s)||0;return this._returnDistinctMap.set(s,++r),r>1?null:t}};function P(t){return t.substr(24,12)+t.substr(19,4)+t.substr(16,2)+t.substr(14,2)+t.substr(11,2)+t.substr(9,2)+t.substr(6,2)+t.substr(4,2)+t.substr(2,2)+t.substr(0,2)}function C(t,e,i){return(i?t>e:t<e)?-1:(i?t<e:t>e)?1:0}function G(t,e,i){return i?e-t:t-e}function Y(t,e,i,s){if(i&&"esriFieldTypeDate"===i.type){const i=new Date(t).getTime(),n=new Date(e).getTime();if(!isNaN(i)&&!isNaN(n))return G(i,n,s)}if("number"==typeof t&&"number"==typeof e)return G(t,e,s);if("string"==typeof t&&"string"==typeof e){const n=t.toUpperCase(),r=e.toUpperCase();return!i||"esriFieldTypeGUID"!==i.type&&"esriFieldTypeGlobalID"!==i.type?C(n,r,s):C(P(n),P(r),s)}return s?1:-1}class B{constructor(t,e,i){this.items=t,this.queryGeometry=e,this.definitionExpression=i.definitionExpression,this.geometryType=i.geometryType,this.hasM=i.hasM,this.hasZ=i.hasZ,this.objectIdField=i.objectIdField,this.spatialReference=i.spatialReference,this.fieldsIndex=i.fieldsIndex,this.timeInfo=i.timeInfo,this.featureAdapter=i.featureAdapter,this.aggregateAdapter=i.aggregateAdapter}get size(){return this.items.length}createQueryResponseForCount(t){const e=new Q(t,this.featureAdapter,this.fieldsIndex);if(!t.outStatistics)return e.countDistinctValues(this.items);const{groupByFieldsForStatistics:i,having:s}=t;if(!(null==i?void 0:i.length))return 1;const n=new Map,r=new Map,a=new Set,o=t.outStatistics;for(const u of o){const{statisticType:t}=u,o="exceedslimit"!==t?u.onStatisticField:void 0;if(!r.has(o)){const t=[];for(const s of i){const i=this._getAttributeValues(e,s,n);t.push(i)}r.set(o,this._calculateUniqueValues(t))}const c=r.get(o);for(const i in c){const{data:t,items:n}=c[i],r=t.join(",");s&&!e.validateItems(n,s)||a.add(r)}}return a.size}createQueryResponse(t){let e;return e=t.outStatistics?t.outStatistics.some(t=>"exceedslimit"===t.statisticType)?this._createExceedsLimitQueryResponse(t):this._createStatisticsQueryResponse(t):this._createFeatureQueryResponse(t),t.returnQueryGeometry&&(Object(o["i"])(t.outSR)&&!Object(o["c"])(this.queryGeometry.spatialReference,t.outSR)?e.queryGeometry=Object(T["d"])({spatialReference:t.outSR,...Object(y["b"])(this.queryGeometry,this.queryGeometry.spatialReference,t.outSR)}):e.queryGeometry=Object(T["d"])({spatialReference:t.outSR,...this.queryGeometry})),e}executeAttributesQuery(t){const e=j(t.where,this.fieldsIndex);if(!e)return Object(a["u"])(this);if(e.isStandardized){let i=0;const s=[];for(const t of this.items)e.testFeature(t,this.featureAdapter)&&(s[i++]=t);const n=new B(s,this.queryGeometry,this);return n.definitionExpression=t.where,Object(a["u"])(n)}return Object(a["t"])(new TypeError("Where clause is not standardized"))}executeAggregateIdsQuery(t){if(!t.aggregateIds||!t.aggregateIds.length||Object(n["g"])(this.aggregateAdapter))return Object(a["u"])(this);const e=new Set;for(const s of t.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(s).forEach(t=>e.add(t));const i=this.featureAdapter.getObjectId;return Object(a["u"])(new B(this.items.filter(t=>e.has(i(t))),this.queryGeometry,this))}executeObjectIdsQuery(t){if(!t.objectIds||!t.objectIds.length)return Object(a["u"])(this);const e=new Set(t.objectIds),i=this.featureAdapter.getObjectId;return Object(a["u"])(new B(this.items.filter(t=>e.has(i(t))),this.queryGeometry,this))}executeTimeQuery(t){const e=Object(N["b"])(this.timeInfo,t.timeExtent,this.featureAdapter);if(!Object(n["h"])(e))return Object(a["u"])(this);const i=this.items.filter(e);return Object(a["u"])(new B(i,this.queryGeometry,this))}filterLatest(){const{trackIdField:t,startTimeField:e,endTimeField:i}=this.timeInfo,s=i||e,n=new Map,r=this.featureAdapter.getAttribute;for(const a of this.items){const e=r(a,t),i=r(a,s),o=n.get(e);(!o||i>r(o,s))&&n.set(e,a)}const o=Array.from(n.values());return Object(a["u"])(new B(o,this.queryGeometry,this))}async project(t){if(!t||Object(o["c"])(this.spatialReference,t))return this;const e=this.featureAdapter,i=(await Object(y["c"])(this.items.map(t=>Object(T["f"])(this.geometryType,this.hasZ,this.hasM,e.getGeometry(t))),this.spatialReference,t)).map((t,i)=>e.cloneWithGeometry(this.items[i],Object(z["d"])(t,this.hasZ,this.hasM)));return new B(i,this.queryGeometry,{definitionExpression:this.definitionExpression,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,objectIdField:this.objectIdField,spatialReference:t,fieldsIndex:this.fieldsIndex,timeInfo:this.timeInfo,featureAdapter:this.featureAdapter})}_sortFeatures(t,e,i){if(t.length>1&&e&&e.length)for(const s of e.reverse()){const e=s.split(" "),n=e[0],r=this.fieldsIndex.get(n),a=e[1]&&"desc"===e[1].toLowerCase();t.sort((t,e)=>Y(i(t,n,r),i(e,n,r),r,a))}}_createFeatureQueryResponse(t){const e=this.items,{geometryType:i,hasM:s,hasZ:n,objectIdField:r,spatialReference:a}=this,{outFields:o,outSR:u,quantizationParameters:c,resultRecordCount:h,resultOffset:l,returnZ:f,returnM:d}=t,m=null!=h&&e.length>(l||0)+h,p=o&&(o.indexOf("*")>-1?[...this.fieldsIndex.fields]:o.map(t=>this.fieldsIndex.get(t)));return{exceededTransferLimit:m,features:this._createFeatures(t,e),fields:p,geometryType:i,hasM:s&&d,hasZ:n&&f,objectIdFieldName:r,spatialReference:Object(T["d"])(u||a),transform:c&&Object(E["c"])(c)||null}}_createFeatures(t,e){const i=new Q(t,this.featureAdapter,this.fieldsIndex),{hasM:s,hasZ:n}=this,{orderByFields:r,quantizationParameters:a,returnGeometry:o,returnCentroid:u,maxAllowableOffset:c,resultOffset:h,resultRecordCount:l,returnZ:f=!1,returnM:d=!1}=t,m=n&&f,p=s&&d;let g=[],y=0;const _=[...e];if(this._sortFeatures(_,r,(t,e,s)=>i.getFieldValue(t,e,s)),o||u){const t=Object(E["c"])(a);if(o&&!u)for(const e of _)g[y++]={attributes:i.getAttributes(e),geometry:Object(T["f"])(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(e),c,t,m,p)};else if(!o&&u)for(const e of _)g[y++]={attributes:i.getAttributes(e),centroid:Object(T["i"])(this,this.featureAdapter.getCentroid(e,this),t)};else for(const e of _)g[y++]={attributes:i.getAttributes(e),centroid:Object(T["i"])(this,this.featureAdapter.getCentroid(e,this),t),geometry:Object(T["f"])(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(e),c,t,m,p)}}else for(const x of _){const t=i.getAttributes(x);t&&(g[y++]={attributes:t})}const b=h||0;if(null!=l){const t=b+l;g=g.slice(b,Math.min(g.length,t))}return g}_createExceedsLimitQueryResponse(t){let e=!1,i=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY;for(const r of t.outStatistics)if("exceedslimit"===r.statisticType){i=null!=r.maxPointCount?r.maxPointCount:Number.POSITIVE_INFINITY,s=null!=r.maxRecordCount?r.maxRecordCount:Number.POSITIVE_INFINITY,n=null!=r.maxVertexCount?r.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)e=this.items.length>i;else if(this.items.length>s)e=!0;else{const t=this.hasZ?this.hasM?4:3:this.hasM?3:2,i=this.featureAdapter;e=this.items.reduce((t,e)=>{const s=i.getGeometry(e);return t+(s&&s.coords.length||0)},0)/t>n}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(e)}}]}}_createStatisticsQueryResponse(t){const e={attributes:{}},i=[],s=new Map,n=new Map,r=new Map,a=new Map,o=new Q(t,this.featureAdapter,this.fieldsIndex),u=t.outStatistics,{groupByFieldsForStatistics:c,having:h,orderByFields:l}=t,f=c&&c.length,d=!!f,m=d&&c[0],p=d&&!this.fieldsIndex.get(m);for(const y of u){const{outStatisticFieldName:t,statisticType:u}=y,l=y,g="exceedslimit"!==u?y.onStatisticField:void 0,_="percentile_disc"===u||"percentile_cont"===u,b=d&&1===f&&(g===m||p)&&"count"===u;if(d){if(!r.has(g)){const t=[];for(const e of c){const i=this._getAttributeValues(o,e,s);t.push(i)}r.set(g,this._calculateUniqueValues(t))}const e=r.get(g);for(const i in e){const{count:n,data:r,items:u,itemPositions:f}=e[i],d=r.join(",");if(!h||o.validateItems(u,h)){const e=a.get(d)||{attributes:{}};let i=null;if(b)i=n;else{const t=this._getAttributeValues(o,g,s),e=f.map(e=>t[e]);i=_&&"statisticParameters"in l?this._getPercentileValue(l,e):this._getStatisticValue(l,e)}e.attributes[t]=i,c.forEach((t,i)=>e.attributes[this.fieldsIndex.get(t)?t:"EXPR_"+(i+1)]=r[i]),a.set(d,e)}}}else{const i=this._getAttributeValues(o,g,s);e.attributes[t]=_&&"statisticParameters"in l?this._getPercentileValue(l,i):this._getStatisticValue(l,i,n)}i.push({name:t,alias:t,type:"esriFieldTypeDouble"})}const g=d?Array.from(a.values()):[e];return this._sortFeatures(g,l,(t,e)=>t.attributes[e]),{fields:i,features:g}}_getStatisticValue(t,e,i){const{onStatisticField:s,statisticType:n}=t,r=i&&i.has(s)?i.get(s):this._calculateStatistics(e);return i&&i.set(s,r),r["var"===n?"variance":n]}_getPercentileValue(t,e){const{onStatisticField:i,statisticParameters:s,statisticType:n}=t,{value:r,orderBy:a}=s,o="desc"===a,u=this.fieldsIndex.get(i),c=[...e].filter(t=>null!=t).sort((t,e)=>Y(t,e,u,o));return this._calculatePercentile(c,r,"percentile_disc"===n)}_getAttributeValues(t,e,i){if(i.has(e))return i.get(e);const s=this.fieldsIndex.get(e),n=this.items.map(i=>t.getFieldValue(i,e,s));return i.set(e,n),n}_calculateStatistics(t){let e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,s=null,n=null,r=null,a=null;const o=[];let u=0;for(const c of t)"string"==typeof c?u++:null==c||isNaN(c)||(s+=c,e=Math.min(e,c),i=Math.max(i,c),o.push(c),u++);if(u){n=s/u;let t=0;for(const e of o)t+=Math.pow(e-n,2);a=u>1?t/(u-1):0,r=Math.sqrt(a)}else e=null,i=null;return{avg:n,count:u,max:i,min:e,stddev:r,sum:s,variance:a}}_calculateUniqueValues(t){const e={},i=this.items,s=i.length;for(let n=0;n<s;n++){const s=i[n],r=[];for(const e of t)r.push(e[n]);const a=r.join(",");null==e[a]?e[a]={count:1,data:r,items:[s],itemPositions:[n]}:(e[a].count++,e[a].items.push(s),e[a].itemPositions.push(n))}return e}_calculatePercentile(t,e,i){if(0===t.length)return null;if(e<=0)return t[0];if(e>=1)return t[t.length-1];const s=(t.length-1)*e,n=Math.floor(s),r=n+1,a=s%1,o=t[n],u=t[r];return r>=t.length||i||"string"==typeof o||"string"==typeof u?o:o*(1-a)+u*a}}var V=B;const q=new Set,D=new f["c"](2e6);let Z=0;const X=Object(g["b"])(),k=Object(g["b"])();e["a"]=class{constructor(t){this.capabilities={query:p["a"]},this.geometryType=t.geometryType,this.hasM=t.hasM,this.hasZ=t.hasZ,this.objectIdField=t.objectIdField,this.spatialReference=t.spatialReference,this.definitionExpression=t.definitionExpression,this.featureStore=t.featureStore,this.aggregateAdapter=t.aggregateAdapter,this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache()),this.timeInfo=t.timeInfo,t.cacheSpatialQueries&&(this._geometryQueryCache=new f["b"](Z+++"$$",D)),this.fieldsIndex=new m["a"](t.fields),t.scheduler&&t.task&&(this._frameQueue=new d["a"],this._frameTask=t.scheduler.registerTask(t.task,t=>this._update(t),()=>this._frameQueue.length>0))}destroy(){this._frameTask&&(this._frameTask.remove(),this._frameTask=null,this._frameQueue.cancelAll(),this._frameQueue=null),this.clearCache(),this._geometryQueryCache&&this._geometryQueryCache.destroy(),this._changeHandle&&(this._changeHandle.remove(),this._changeHandle=null),this.fieldsIndex.destroy()}get featureAdapter(){return this.featureStore.featureAdapter}get fullExtent(){const t=this.featureStore.fullBounds;return t?{xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3],spatialReference:Object(T["d"])(this.spatialReference)}:null}get timeExtent(){return this.timeInfo?(this._timeExtent||(this._timeExtent=Object(N["a"])(this.timeInfo,this.featureStore)),this._timeExtent):null}clearCache(){this._geometryQueryCache&&this._geometryQueryCache.clear(),this._allItems=null,this._timeExtent=null}async executeQuery(t={},e){let i,n=Object(s["a"])(t);try{n=await this._schedule(()=>Object(T["b"])(n,this.definitionExpression,this.spatialReference),e),n=await this._reschedule(()=>this._checkQuerySupport(n),e),i=await this._reschedule(()=>this._executeGeometryQuery(n,e),e),i=await this._reschedule(()=>i.executeAggregateIdsQuery(n),e),i=await this._reschedule(()=>i.executeObjectIdsQuery(n),e),i=await this._reschedule(()=>i.executeTimeQuery(n),e),i=await this._reschedule(()=>i.executeAttributesQuery(n),e)}catch(r){if(r!==T["a"])throw r;i=new V([],null,this)}return i.createQueryResponse(n)}async executeQueryForCount(t={},e){let i,n=Object(s["a"])(t);n.returnGeometry=!1,n.returnCentroid=!1,n.outSR=null;try{n=await this._schedule(()=>Object(T["b"])(n,this.definitionExpression,this.spatialReference),e),n=await this._reschedule(()=>this._checkQuerySupport(n),e),i=await this._reschedule(()=>this._executeGeometryQuery(n,e),e),i=await this._reschedule(()=>i.executeAggregateIdsQuery(n),e),i=await this._reschedule(()=>i.executeObjectIdsQuery(n),e),i=await this._reschedule(()=>i.executeTimeQuery(n),e),i=await this._reschedule(()=>i.executeAttributesQuery(n),e)}catch(r){if(r!==T["a"])throw r;return 0}return i.createQueryResponseForCount(n)}async executeQueryForExtent(t={},e){let i,n=Object(s["a"])(t);const r=n.outSR;try{n=await this._schedule(()=>Object(T["b"])(n,this.definitionExpression,this.spatialReference),e),n=await this._reschedule(()=>this._checkQuerySupport(n),e),n.returnGeometry=!0,n.returnCentroid=!1,n.outSR=null,i=await this._reschedule(()=>this._executeGeometryQuery(n,e),e),i=await this._reschedule(()=>i.executeAggregateIdsQuery(n),e),i=await this._reschedule(()=>i.executeObjectIdsQuery(n),e),i=await this._reschedule(()=>i.executeTimeQuery(n),e),i=await this._reschedule(()=>i.executeAttributesQuery(n),e);const t=i.size;if(!t)return{count:t,extent:null};Object(g["j"])(k,g["a"]),this.featureStore.forEachBounds(i.items,t=>Object(g["e"])(k,t),X);const s={xmin:k[0],ymin:k[1],xmax:k[3],ymax:k[4],spatialReference:Object(T["d"])(this.spatialReference)};this.hasZ&&isFinite(k[2])&&isFinite(k[5])&&(s.zmin=k[2],s.zmax=k[5]);const a=Object(y["b"])(s,i.spatialReference,r);if(a.spatialReference=Object(T["d"])(r||this.spatialReference),a.xmax-a.xmin==0){const t=Object(h["c"])(a.spatialReference);a.xmin-=t,a.xmax+=t}if(a.ymax-a.ymin==0){const t=Object(h["c"])(a.spatialReference);a.ymin-=t,a.ymax+=t}if(this.hasZ&&null!=a.zmin&&null!=a.zmax&&a.zmax-a.zmin==0){const t=Object(h["c"])(a.spatialReference);a.zmin-=t,a.zmax+=t}return{count:t,extent:a}}catch(a){if(a===T["a"])return{count:0,extent:null};throw a}}async executeQueryForIds(t={},e){return this.executeQueryForIdSet(t,e).then(t=>Array.from(t))}async executeQueryForIdSet(t={},e){let i,n=Object(s["a"])(t);n.returnGeometry=!1,n.returnCentroid=!1,n.outSR=null;try{n=await this._schedule(()=>Object(T["b"])(n,this.definitionExpression,this.spatialReference),e),n=await this._reschedule(()=>this._checkQuerySupport(n),e),i=await this._reschedule(()=>this._executeGeometryQuery(n,e),e),i=await this._reschedule(()=>i.executeAggregateIdsQuery(n),e),i=await this._reschedule(()=>i.executeObjectIdsQuery(n),e),i=await this._reschedule(()=>i.executeTimeQuery(n),e),i=await this._reschedule(()=>i.executeAttributesQuery(n),e);const t=i.items,s=new Set;return await this._reschedule(()=>{for(const e of t)s.add(i.featureAdapter.getObjectId(e))},e),s}catch(r){if(r===T["a"])return new Set;throw r}}async executeQueryForLatestObservations(t={},e){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new r["a"]("feature-store:unsupported-query","Missing timeInfo or timeInfo.trackIdField",{query:t,timeInfo:this.timeInfo});let i,n=Object(s["a"])(t);try{n=await this._schedule(()=>Object(T["b"])(n,this.definitionExpression,this.spatialReference),e),n=await this._reschedule(()=>this._checkQuerySupport(n),e),i=await this._reschedule(()=>this._executeGeometryQuery(n,e),e),i=await this._reschedule(()=>i.executeAggregateIdsQuery(n),e),i=await this._reschedule(()=>i.executeObjectIdsQuery(n),e),i=await this._reschedule(()=>i.executeTimeQuery(n),e),i=await this._reschedule(()=>i.executeAttributesQuery(n),e),i=await this._reschedule(()=>i.filterLatest(),e)}catch(a){if(a!==T["a"])throw a;i=new V([],null,this)}return i.createQueryResponse(n)}async _schedule(t,e){return this._frameQueue?this._frameQueue.push(t,e):t()}async _reschedule(t,e){return this._frameQueue?this._frameQueue.unshift(t,e):t()}_update(t){for(this._budget=t;!t.done&&this._frameQueue&&this._frameQueue.process();)t.madeProgress();this._budget=null}_getAll(){if(!this._allItems){const t=[];this.featureStore.forEach(e=>t.push(e)),this._allItems=new V(t,null,this)}return this._allItems}async _executeGeometryQuery(t,e){const{geometry:i,outSR:s,spatialRel:r}=t,a=Object(o["i"])(s)&&!Object(o["c"])(this.spatialReference,s),u=this._geometryQueryCache?a?JSON.stringify({geometry:i,spatialRelationship:r,outSpatialReference:s}):JSON.stringify({geometry:i,spatialRelationship:r}):null;if(u){const t=this._geometryQueryCache.get(u);if(!Object(n["i"])(t))return t}const c=async e=>{if(a&&(t.returnGeometry||t.returnCentroid)){const t=await e.project(s);return u&&this._geometryQueryCache.put(u,t,t.size||1),t}return u&&this._geometryQueryCache.put(u,e,e.size||1),e};if(!i)return c(this._getAll());const h=this.featureAdapter;if("esriSpatialRelDisjoint"===r){const t=this._searchFeatures(this._getQueryBBoxes(i));if(!t.length)return c(this._getAll());let s,n;const a=new Set;for(const e of t)a.add(h.getObjectId(e));return await this._reschedule(()=>{let t=0;s=new Array(a.size),this.featureStore.forEach(e=>s[t++]=e),n=a},e),c(await this._reschedule(async()=>{const t=await Object(T["g"])(r,i,this.geometryType,this.hasZ,this.hasM);return new V(await this._runSpatialFilter(s,e=>!n.has(h.getObjectId(e))||t(h.getGeometry(e)),e),i,this)},e))}const l=this._searchFeatures(this._getQueryBBoxes(i));if(!l.length){const t=new V([],i,this);return u&&this._geometryQueryCache.put(u,t,t.size||1),t}if(this._canExecuteSoloPass(i,t))return c(new V(l,i,this));const f=await Object(T["g"])(r,i,this.geometryType,this.hasZ,this.hasM),d=await this._runSpatialFilter(l,t=>f(h.getGeometry(t)),e);return c(new V(d,i,this))}async _runSpatialFilter(t,e,i){if(!e)return t;if(!this._budget)return t.filter(t=>e(t));let s=0;const n=new Array,r=async()=>{for(;s<t.length;){const a=t[s];e(a)&&n.push(a),this._budget.done&&await this._reschedule(()=>r(),i),++s}};return this._reschedule(()=>r(),i).then(()=>n)}_canExecuteSoloPass(t,e){const{geometryType:i}=this,{spatialRel:s}=e;return Object(T["c"])(t)&&("esriSpatialRelEnvelopeIntersects"===s||"esriGeometryPoint"===i&&("esriSpatialRelIntersects"===s||"esriSpatialRelContains"===s||"esriSpatialRelWithin"===s))}_getQueryBBoxes(t){if(Object(T["c"])(t)){if(Object(c["d"])(t))return[Object(l["i"])(t.xmin,t.ymin,t.xmax,t.ymax)];if(Object(c["g"])(t))return t.rings.map(t=>Object(l["i"])(Math.min(t[0][0],t[2][0]),Math.min(t[0][1],t[2][1]),Math.max(t[0][0],t[2][0]),Math.max(t[0][1],t[2][1])))}return[Object(u["a"])(Object(l["d"])(),t)]}_searchFeatures(t){for(const s of t)this.featureStore.forEachInBounds(s,t=>{q.add(t)});const e=new Array(q.size);let i=0;return q.forEach(t=>e[i++]=t),q.clear(),e}async _checkQuerySupport(t){if(t.distance<0||null!=t.geometryPrecision||t.multipatchOption||t.pixelSize||t.relationParam||t.text)throw new r["a"]("feature-store:unsupported-query","Unsupported query options",{query:t});return Object(a["b"])([this._checkAttributesQuerySupport(t),this._checkStatisticsQuerySupport(t),Object(T["e"])(t,this.geometryType,this.spatialReference),Object(y["a"])(this.spatialReference,t.outSR)]).then(()=>t)}_checkAttributesQuerySupport(t){const{outFields:e,orderByFields:i,returnDistinctValues:s,outStatistics:n}=t,a=n?n.map(t=>t.outStatisticFieldName&&t.outStatisticFieldName.toLowerCase()):[];if(i&&i.length>0){const t=" asc",e=" desc",s=i.map(i=>{const s=i.toLowerCase();return s.indexOf(t)>-1?s.split(t)[0]:s.indexOf(e)>-1?s.split(e)[0]:i}).filter(t=>-1===a.indexOf(t));F(this.fieldsIndex,s,"orderByFields contains missing fields")}if(e&&e.length>0)F(this.fieldsIndex,e,"outFields contains missing fields");else if(s)throw new r["a"]("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:t});O(this.fieldsIndex,t.where)}async _checkStatisticsQuerySupport(t){const{outStatistics:e,groupByFieldsForStatistics:i,having:s}=t,n=i&&i.length,a=e&&e.length;if(s){if(!n||!a)throw new r["a"]("feature-store:unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",{query:t});M(this.fieldsIndex,s,e)}if(a){if(!function(t){return t.every(t=>"exceedslimit"!==t.statisticType)}(e))return;const s=e.map(t=>t.onStatisticField);F(this.fieldsIndex,s,"onStatisticFields contains missing fields"),n&&F(this.fieldsIndex,i,"groupByFieldsForStatistics contains missing fields");for(const i of e){const{onStatisticField:e,statisticType:s}=i;if("percentile_disc"!==s&&"percentile_cont"!==s||!("statisticParameters"in i)){if("count"!==s&&e&&A(e,this.fieldsIndex))throw new r["a"]("feature-store:unsupported-query","outStatistics contains non-numeric fields",{definition:i,query:t})}else{const{statisticParameters:e}=i;if(!e)throw new r["a"]("feature-store:unsupported-query","statisticParamters should be set for percentile type",{definition:i,query:t})}}}}}},"80b7":function(t,e,i){"use strict";function s(t){return"date"===t.type||"esriFieldTypeDate"===t.type}function n(t){return t.toLowerCase().trim()}e["a"]=class{constructor(t){if(this.fields=t,this._fieldsMap=new Map,this._dateFieldsSet=new Set,this.dateFields=[],!t)return;const e=[];for(const i of t){const t=i&&i.name;if(t){const r=n(t);this._fieldsMap.set(t,i),this._fieldsMap.set(r,i),e.push(r),s(i)&&(this.dateFields.push(i),this._dateFieldsSet.add(i))}}e.sort(),this.uid=e.join(",")}destroy(){this._fieldsMap.clear()}has(t){return null!=this.get(t)}get(t){return null!=t?this._fieldsMap.get(t)||this._fieldsMap.get(n(t)):void 0}isDateField(t){return this._dateFieldsSet.has(this.get(t))}normalizeFieldName(t){const e=this.get(t);if(e)return e.name}}},8246:function(t,e,i){"use strict";i.d(e,"a",(function(){return n})),i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return r})),i.d(e,"d",(function(){return o})),i.d(e,"e",(function(){return u})),i.d(e,"f",(function(){return h})),i.d(e,"g",(function(){return c}));const s=[252,146,31,255],n={type:"esriSMS",style:"esriSMSCircle",size:6,color:s,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},r={type:"esriSLS",style:"esriSLSSolid",width:.75,color:s},a={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},o={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},u={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},c={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},h={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}},"88d1":function(t,e,i){"use strict";i.d(e,"a",(function(){return o})),i.d(e,"b",(function(){return u})),i.d(e,"c",(function(){return a}));var s=i("c120"),n=i("7ffa"),r=i("8246");function a(t){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===t||"esriGeometryMultipoint"===t?r["a"]:"esriGeometryPolyline"===t?r["c"]:r["b"]}}}function o(t,e){if(Object(s["a"])("csp-restrictions"))return()=>({[e]:null,...t});try{let i=`this.${e} = null;`;for(const e in t)i+=`this${e.indexOf(".")?`["${e}"]`:"."+e} = ${JSON.stringify(t[e])};`;const s=new Function(i);return()=>new s}catch(i){return()=>({[e]:null,...t})}}function u(t={}){return[{name:"New Feature",description:"",prototype:{attributes:Object(n["a"])(t)}}]}},"901f":function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));var s=i("4637");function n(t,e){if(!(this instanceof n))return new n(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&("function"==typeof e?this.toBBox=e:this._initFormat(e)),this.clear()}function r(t,e,i){if(!i)return e.indexOf(t);for(var s=0;s<e.length;s++)if(i(t,e[s]))return s;return-1}function a(t,e){o(t,0,t.children.length,e,t)}function o(t,e,i,s,n){n||(n=p(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var r,a=e;a<i;a++)r=t.children[a],u(n,t.leaf?s(r):r);return n}function u(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function c(t,e){return t.minX-e.minX}function h(t,e){return t.minY-e.minY}function l(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function f(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function m(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function p(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function g(t,e,i,n,r){for(var a,o=[e,i];o.length;)(i=o.pop())-(e=o.pop())<=n||(a=e+Math.ceil((i-e)/n/2)*n,Object(s["a"])(t,a,e,i,r),o.push(e,a,a,i))}n.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],s=this.toBBox;if(!m(t,e))return i;for(var n,r,a,o,u=[];e;){for(n=0,r=e.children.length;n<r;n++)a=e.children[n],m(t,o=e.leaf?s(a):a)&&(e.leaf?i.push(a):d(t,o)?this._all(a,i):u.push(a));e=u.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(!m(t,e))return!1;for(var s,n,r,a,o=[];e;){for(s=0,n=e.children.length;s<n;s++)if(r=e.children[s],m(t,a=e.leaf?i(r):r)){if(e.leaf||d(t,a))return!0;o.push(r)}e=o.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,i=t.length;e<i;e++)this.insert(t[e]);return this}var s=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===s.height)this._splitRoot(this.data,s);else{if(this.data.height<s.height){var n=this.data;this.data=s,s=n}this._insert(s,this.data.height-s.height-1,!0)}else this.data=s;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=p([]),this},remove:function(t,e){if(!t)return this;for(var i,s,n,a,o=this.data,u=this.toBBox(t),c=[],h=[];o||c.length;){if(o||(o=c.pop(),s=c[c.length-1],i=h.pop(),a=!0),o.leaf&&-1!==(n=r(t,o.children,e)))return o.children.splice(n,1),c.push(o),this._condense(c),this;a||o.leaf||!d(o,u)?s?(i++,o=s.children[i],a=!1):o=null:(c.push(o),h.push(i),i=0,s=o,o=o.children[0])}return this},toBBox:function(t){return t},compareMinX:c,compareMinY:h,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,i,s){var n,r=i-e+1,o=this._maxEntries;if(r<=o)return a(n=p(t.slice(e,i+1)),this.toBBox),n;s||(s=Math.ceil(Math.log(r)/Math.log(o)),o=Math.ceil(r/Math.pow(o,s-1))),(n=p([])).leaf=!1,n.height=s;var u,c,h,l,f=Math.ceil(r/o),d=f*Math.ceil(Math.sqrt(o));for(g(t,e,i,d,this.compareMinX),u=e;u<=i;u+=d)for(g(t,u,h=Math.min(u+d-1,i),f,this.compareMinY),c=u;c<=h;c+=f)l=Math.min(c+f-1,h),n.children.push(this._build(t,c,l,s-1));return a(n,this.toBBox),n},_chooseSubtree:function(t,e,i,s){for(var n,r,a,o,u,c,h,f,d,m;s.push(e),!e.leaf&&s.length-1!==i;){for(h=f=1/0,n=0,r=e.children.length;n<r;n++)u=l(a=e.children[n]),d=t,m=a,(c=(Math.max(m.maxX,d.maxX)-Math.min(m.minX,d.minX))*(Math.max(m.maxY,d.maxY)-Math.min(m.minY,d.minY))-u)<f?(f=c,h=u<h?u:h,o=a):c===f&&u<h&&(h=u,o=a);e=o||e.children[0]}return e},_insert:function(t,e,i){var s=this.toBBox,n=i?t:s(t),r=[],a=this._chooseSubtree(n,this.data,e,r);for(a.children.push(t),u(a,n);e>=0&&r[e].children.length>this._maxEntries;)this._split(r,e),e--;this._adjustParentBBoxes(n,r,e)},_split:function(t,e){var i=t[e],s=i.children.length,n=this._minEntries;this._chooseSplitAxis(i,n,s);var r=this._chooseSplitIndex(i,n,s),o=p(i.children.splice(r,i.children.length-r));o.height=i.height,o.leaf=i.leaf,a(i,this.toBBox),a(o,this.toBBox),e?t[e-1].children.push(o):this._splitRoot(i,o)},_splitRoot:function(t,e){this.data=p([t,e]),this.data.height=t.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){var s,n,r,a,u,c,h,f,d,m,p,g,y,_;for(c=h=1/0,s=e;s<=i-e;s++)n=o(t,0,s,this.toBBox),r=o(t,s,i,this.toBBox),d=n,m=r,p=void 0,g=void 0,y=void 0,_=void 0,p=Math.max(d.minX,m.minX),g=Math.max(d.minY,m.minY),y=Math.min(d.maxX,m.maxX),_=Math.min(d.maxY,m.maxY),a=Math.max(0,y-p)*Math.max(0,_-g),u=l(n)+l(r),a<c?(c=a,f=s,h=u<h?u:h):a===c&&u<h&&(h=u,f=s);return f},_chooseSplitAxis:function(t,e,i){var s=t.leaf?this.compareMinX:c,n=t.leaf?this.compareMinY:h;this._allDistMargin(t,e,i,s)<this._allDistMargin(t,e,i,n)&&t.children.sort(s)},_allDistMargin:function(t,e,i,s){t.children.sort(s);var n,r,a=this.toBBox,c=o(t,0,e,a),h=o(t,i-e,i,a),l=f(c)+f(h);for(n=e;n<i-e;n++)r=t.children[n],u(c,t.leaf?a(r):r),l+=f(c);for(n=i-e-1;n>=e;n--)r=t.children[n],u(h,t.leaf?a(r):r),l+=f(h);return l},_adjustParentBBoxes:function(t,e,i){for(var s=i;s>=0;s--)u(e[s],t)},_condense:function(t){for(var e,i=t.length-1;i>=0;i--)0===t[i].children.length?i>0?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():a(t[i],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},a94c:function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));const s={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0}},abb8:function(t,e,i){"use strict";function s(t,e){if(!t)return null;const i=e.featureAdapter,{startTimeField:s,endTimeField:n}=t;let r=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY;if(s&&n)e.forEach(t=>{const e=i.getAttribute(t,s),o=i.getAttribute(t,n);null==e||isNaN(e)||(r=Math.min(r,e)),null==o||isNaN(o)||(a=Math.max(a,o))});else{const t=s||n;e.forEach(e=>{const s=i.getAttribute(e,t);null==s||isNaN(s)||(r=Math.min(r,s),a=Math.max(a,s))})}return{start:r,end:a}}function n(t,e,i){if(!e||!t)return null;const{startTimeField:s,endTimeField:n}=t;if(!s&&!n)return null;const{start:r,end:a}=e;return null===r&&null===a?null:void 0===r&&void 0===a?()=>!1:s&&n?function(t,e,i,s,n){return null!=s&&null!=n?r=>{const a=t.getAttribute(r,e),o=t.getAttribute(r,i);return(null==a||a<=n)&&(null==o||o>=s)}:null!=s?e=>{const n=t.getAttribute(e,i);return null==n||n>=s}:null!=n?i=>{const s=t.getAttribute(i,e);return null==s||s<=n}:void 0}(i,s,n,r,a):function(t,e,i,s){return null!=i&&null!=s&&i===s?s=>t.getAttribute(s,e)===i:null!=i&&null!=s?n=>{const r=t.getAttribute(n,e);return r>=i&&r<=s}:null!=i?s=>t.getAttribute(s,e)>=i:null!=s?i=>t.getAttribute(i,e)<=s:void 0}(i,s||n,r,a)}i.d(e,"a",(function(){return s})),i.d(e,"b",(function(){return n}))},aefa:function(t,e,i){"use strict";i.d(e,"a",(function(){return n})),i.d(e,"b",(function(){return r})),i.d(e,"c",(function(){return a}));var s=i("8a44");const n=-3;class r{constructor(t,e,i){this._namespace=t,this._storage=e,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",i&&(this._storage.registerRemoveFunc(this._namespace,i),this._removeFunc=!0)}get namespace(){return this._namespace.slice(0,-1)}get hitRate(){return this._hit/(this._hit+this._miss)}get size(){return this._storage.size}get maxSize(){return this._storage.maxSize}resetHitRate(){this._hit=this._miss=0}destroy(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this)}put(t,e,i,s=0){this._storage.put(this._namespace+t,e,i,s)}get(t){const e=this._storage.get(this._namespace+t);return void 0===e?++this._miss:++this._hit,e}pop(t){const e=this._storage.pop(this._namespace+t);return void 0===e?++this._miss:++this._hit,e}updateSize(t,e,i){this._storage.updateSize(this._namespace+t,e,i)}clear(){this._storage.clear(this._namespace)}clearAll(){this._storage.clearAll()}getStats(){return this._storage.getStats()}resetStats(){this._storage.resetStats()}}class a{constructor(t=10485760){this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=[],this._users=new s["a"]}register(t){this._users.push(t)}deregister(t){this._users.removeUnordered(t)}registerRemoveFunc(t,e){this._removeFuncs.push([t,e])}deregisterRemoveFunc(t){this._removeFuncs=this._removeFuncs.filter(e=>e[0]!==t)}get size(){return this._size}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,0),this._checkSizeLimit()}put(t,e,i,s){const n=this._db.get(t);if(n&&(this._size-=n.size,this._db.delete(t),n.entry!==e&&this._notifyRemoved(t,n.entry)),i>this._maxSize)return void this._notifyRemoved(t,e);if(void 0===e)return void console.warn("Refusing to cache undefined entry ");if(!i||i<0)return void console.warn("Refusing to cache entry with invalid size "+i);const r=1+Math.max(s,-3)- -3;this._db.set(t,{entry:e,size:i,lifetime:r,lives:r}),this._size+=i,this._checkSizeLimit()}updateSize(t,e,i){const s=this._db.get(t);s&&s.entry===e&&(this._size-=s.size,i>this._maxSize?this._notifyRemoved(t,e):(s.size=i,this._size+=i,this._checkSizeLimit()))}pop(t){const e=this._db.get(t);if(e)return this._size-=e.size,this._db.delete(t),++this._hit,e.entry;++this._miss}get(t){const e=this._db.get(t);if(void 0!==e)return this._db.delete(t),e.lives=e.lifetime,this._db.set(t,e),++this._hit,e.entry;++this._miss}getStats(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},e={},i=new Array;this._db.forEach((t,s)=>{const n=t.lifetime;i[n]=(i[n]||0)+t.size,this._users.forAll(i=>{const n=i.namespace;if(s.startsWith(n)){const i=e[n]||0;e[n]=i+t.size}})});const s={};this._users.forAll(t=>{const i=t.namespace;if(!isNaN(t.hitRate)&&t.hitRate>0){const n=e[i]||0;e[i]=n,s[i]=Math.round(100*t.hitRate)+"%"}else s[i]="0%"});const n=Object.keys(e);n.forEach(t=>e[t]=e[t]/this._size*100),n.sort((t,i)=>e[i]-e[t]),n.forEach(i=>t[i]=Math.round(e[i])+"% / "+s[i]);for(let r=i.length-1;r>=0;--r){const e=i[r];e&&(t["Priority "+(r+-3-1)]=Math.round(e/this.size*100)+"%")}return t}resetStats(){this._hit=this._miss=0,this._users.forAll(t=>t.resetHitRate())}clear(t){this._db.forEach((e,i)=>{i.startsWith(t)&&(this._size-=e.size,this._db.delete(i),this._notifyRemoved(i,e.entry))})}clearAll(){this._db.forEach((t,e)=>this._notifyRemoved(e,t.entry)),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemoved(t,e){this._removeFuncs.forEach(i=>{t.startsWith(i[0])&&i[1](e)})}_checkSizeLimit(){if(!(this._size<=this._maxSize))for(const[t,e]of this._db)if(this._db.delete(t),e.lives<=1?(this._size-=e.size,this._notifyRemoved(t,e.entry)):(--e.lives,this._db.set(t,e)),this._size<=.9*this.maxSize)return}}},d518:function(t,e,i){"use strict";i.d(e,"a",(function(){return w})),i.d(e,"b",(function(){return A})),i.d(e,"c",(function(){return D})),i.d(e,"d",(function(){return N})),i.d(e,"e",(function(){return q})),i.d(e,"f",(function(){return R})),i.d(e,"g",(function(){return V})),i.d(e,"h",(function(){return T})),i.d(e,"i",(function(){return v}));var s=i("b2b2"),n=i("fa8a"),r=i("ce50"),a=i("f4cc"),o=i("7f83"),u=i("2172"),c=i("3cd6"),h=i("f8d4"),l=i("a9ab"),f=i("8048"),d=i("a8d5"),m=i("8152"),p=i("6655"),g=(i("d97e"),i("1ec3"));function y(t,e){return t?e?4:3:e?3:2}function _(t,e,i,s){return x(t,e,i,s.coords[0],s.coords[1])}function b(t,e,i,s,n,r){const a=y(n,r),{coords:o,lengths:u}=s;if(!u)return!1;for(let c=0,h=0;c<u.length;c++,h+=a)if(!x(t,e,i,o[h],o[h+1]))return!1;return!0}function x(t,e,i,s,n){if(!t)return!1;const r=y(e,i),{coords:a,lengths:o}=t;let u=!1,c=0;for(const h of o)u=S(u,a,r,c,h,s,n),c+=h*r;return u}function S(t,e,i,s,n,r,a){let o=t,u=s;for(let c=s,h=s+n*i;c<h;c+=i){u=c+i,u===h&&(u=s);const t=e[c],n=e[c+1],l=e[u],f=e[u+1];(n<a&&f>=a||f<a&&n>=a)&&t+(a-n)/(f-n)*(l-t)<r&&(o=!o)}return o}const I=new n["a"]({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),w=Object.freeze({}),O=new m["a"],M=new m["a"],j=new m["a"],F={esriGeometryPoint:p["m"],esriGeometryPolyline:p["o"],esriGeometryPolygon:p["n"],esriGeometryMultipoint:p["l"]};function v(t,e,i,s=t.hasZ,n=t.hasM){const r=t.hasZ&&s,a=t.hasM&&n;if(i){const o=Object(p["u"])(j,e,t.hasZ,t.hasM,"esriGeometryPoint",i,s,n);return Object(p["m"])(o,r,a)}return Object(p["m"])(e,r,a)}function R(t,e,i,s,n,r,a=e,o=i){const u=e&&a,c=i&&o,h=s?"coords"in s?s:s.geometry:null;if(!h)return null;if(n){let s=Object(p["q"])(M,h,e,i,t,n,a,o);return r&&(s=Object(p["u"])(j,s,u,c,t,r)),F[t](s,u,c)}if(r){const s=Object(p["u"])(j,h,e,i,t,r,a,o);return F[t](s,u,c)}return Object(p["x"])(O,h,e,i,a,o),F[t](O,u,c)}async function A(t,e,i){const{outFields:s,orderByFields:n,groupByFieldsForStatistics:r,outStatistics:a}=t;if(s)for(let o=0;o<s.length;o++)s[o]=s[o].trim();if(n)for(let o=0;o<n.length;o++)n[o]=n[o].trim();if(r)for(let o=0;o<r.length;o++)r[o]=r[o].trim();if(a)for(let o=0;o<a.length;o++)a[o].onStatisticField&&(a[o].onStatisticField=a[o].onStatisticField.trim());return t.geometry&&!t.outSR&&(t.outSR=t.geometry.spatialReference),T(t,e,i)}async function T(t,e,i){if(!t)return null;let{where:n}=t;if(t.where=n=n&&n.trim(),(!n||/^1 *= *1$/.test(n)||e&&e===n)&&(t.where=null),!t.geometry)return t;let r=await async function(t){const{geometry:e,distance:i,units:s}=t;if(null==i||"vertexAttributes"in e)return e;const n=e.spatialReference,r=s?I.fromJSON(s):Object(f["e"])(n),a=n&&(Object(o["f"])(n)||Object(o["m"])(n))?e:await Object(g["a"])(n,o["a"]).then(()=>Object(g["b"])(e,o["a"]));return(await B())(a.spatialReference,a,i,r)}(t);if(t.distance=0,t.units=null,"esriSpatialRelEnvelopeIntersects"===t.spatialRel){const{spatialReference:e}=t.geometry;r=Object(h["a"])(r),r.spatialReference=e}t.geometry=r,await Object(g["a"])(r.spatialReference,i);const a=(await Object(d["a"])(Object(l["a"])(r)))[0];if(Object(s["g"])(a))throw w;const u=a.toJSON(),c=await Object(g["b"])(u,u.spatialReference,i);if(!c)throw w;return c.spatialReference=i,t.geometry=c,t}function N(t){return t&&z in t?JSON.parse(JSON.stringify(t,E)):t}const z="_geVersion",E=(t,e)=>t!==z?e:void 0,Q={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null},P={esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},C={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},G={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1};function Y(){return Promise.all([i.e("chunk-2d22cf8c"),i.e("chunk-180660b2")]).then(i.bind(null,"00ac"))}function B(){return Y().then(t=>t.geodesicBuffer)}function V(t,e,i,s,n){if(Object(l["g"])(e)&&"esriGeometryPoint"===i&&("esriSpatialRelIntersects"===t||"esriSpatialRelContains"===t)){const t=Object(p["g"])(new m["a"],e,!1,!1);return Object(a["u"])(e=>_(t,!1,!1,e))}if(Object(l["g"])(e)&&"esriGeometryMultipoint"===i){const i=Object(p["g"])(new m["a"],e,!1,!1);if("esriSpatialRelContains"===t)return Object(a["u"])(t=>b(i,!1,!1,t,s,n))}if(Object(l["d"])(e)&&"esriGeometryPoint"===i&&("esriSpatialRelIntersects"===t||"esriSpatialRelContains"===t))return Object(a["u"])(t=>Object(u["e"])(e,R(i,s,n,t)));if(Object(l["d"])(e)&&"esriGeometryMultipoint"===i&&"esriSpatialRelContains"===t)return Object(a["u"])(t=>Object(u["d"])(e,R(i,s,n,t)));if(Object(l["d"])(e)&&"esriSpatialRelIntersects"===t){const t=Object(c["b"])(i);return Object(a["u"])(r=>t(e,R(i,s,n,r)))}return Y().then(r=>{const a=r[Q[t]].bind(null,e.spatialReference,e);return t=>a(R(i,s,n,t))})}async function q(t,e,i){const{spatialRel:s,geometry:n}=t;if(n){if(!0!==P[s])throw new r["a"]("feature-store:unsupported-query","Unsupported query spatial relationship",{query:t});if(Object(o["i"])(n.spatialReference)&&Object(o["i"])(i)){if(!function(t){return!0===C[Object(l["c"])(t)]}(n))throw new r["a"]("feature-store:unsupported-query","Unsupported query geometry type",{query:t});if(!function(t){return!0===G[t]}(e))throw new r["a"]("feature-store:unsupported-query","Unsupported layer geometry type",{query:t});if(t.outSR)return Object(g["a"])(t.geometry&&t.geometry.spatialReference,t.outSR)}}}function D(t){if(Object(l["d"])(t))return!0;if(Object(l["g"])(t)){for(const e of t.rings){if(5!==e.length)return!1;if(e[0][0]!==e[1][0]||e[0][0]!==e[4][0]||e[2][0]!==e[3][0]||e[0][1]!==e[3][1]||e[0][1]!==e[4][1]||e[1][1]!==e[2][1])return!1}return!0}return!1}},d641:function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));const s={convertToGEGeometry:function(t,e){return null==e?null:t.convertJSONToGeometry(e)},exportPoint:function(t,e,i){const s=new n(t.getPointX(e),t.getPointY(e),i),r=t.hasZ(e),a=t.hasM(e);return r&&(s.z=t.getPointZ(e)),a&&(s.m=t.getPointM(e)),s},exportPolygon:function(t,e,i){return new r(t.exportPaths(e),i,t.hasZ(e),t.hasM(e))},exportPolyline:function(t,e,i){return new a(t.exportPaths(e),i,t.hasZ(e),t.hasM(e))},exportMultipoint:function(t,e,i){return new o(t.exportPoints(e),i,t.hasZ(e),t.hasM(e))},exportExtent:function(t,e,i){const s=t.hasZ(e),n=t.hasM(e),r=new u(t.getXMin(e),t.getYMin(e),t.getXMax(e),t.getYMax(e),i);if(s){const i=t.getZExtent(e);r.zmin=i.vmin,r.zmax=i.vmax}if(n){const i=t.getMExtent(e);r.mmin=i.vmin,r.mmax=i.vmax}return r}};class n{constructor(t,e,i){this.x=t,this.y=e,this.spatialReference=i,this.z=void 0,this.m=void 0}}class r{constructor(t,e,i,s){this.rings=t,this.spatialReference=e,this.hasZ=void 0,this.hasM=void 0,i&&(this.hasZ=i),s&&(this.hasM=s)}}class a{constructor(t,e,i,s){this.paths=t,this.spatialReference=e,this.hasZ=void 0,this.hasM=void 0,i&&(this.hasZ=i),s&&(this.hasM=s)}}class o{constructor(t,e,i,s){this.points=t,this.spatialReference=e,this.hasZ=void 0,this.hasM=void 0,i&&(this.hasZ=i),s&&(this.hasM=s)}}class u{constructor(t,e,i,s,n){this.xmin=t,this.ymin=e,this.xmax=i,this.ymax=s,this.spatialReference=n,this.zmin=void 0,this.zmax=void 0,this.mmin=void 0,this.mmax=void 0}}},d7f2:function(t,e,i){"use strict";var s=i("aefa");e["a"]=class{constructor(t,e){this._storage=new s["c"],this._storage.maxSize=t,e&&this._storage.registerRemoveFunc("",e)}put(t,e){this._storage.put(t,e,1,1)}pop(t){return this._storage.pop(t)}get(t){return this._storage.get(t)}clear(){this._storage.clearAll()}destroy(){this._storage.clearAll()}}},d97e:function(t,e,i){"use strict";function s(t,e){return t?e?4:3:e?3:2}function n(t,e,i,n,o){if(!e||!e.lengths.length)return null;const u="upperLeft"===(null==o?void 0:o.originPosition)?-1:1;t.lengths.length&&(t.lengths.length=0),t.coords.length&&(t.coords.length=0);const c=t.coords,h=[],l=i?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:f,coords:d}=e,m=s(i,n);let p=0;for(const s of f){const t=r(l,d,p,s,i,n,u);t&&h.push(t),p+=s*m}if(h.sort((t,e)=>{let s=u*t[2]-u*e[2];return 0===s&&i&&(s=t[4]-e[4]),s}),h.length){let t=6*h[0][2];c[0]=h[0][0]/t,c[1]=h[0][1]/t,i&&(t=6*h[0][4],c[2]=0!==t?h[0][3]/t:0),(c[0]<l[0]||c[0]>l[1]||c[1]<l[2]||c[1]>l[3]||i&&(c[2]<l[4]||c[2]>l[5]))&&(c.length=0)}if(!c.length){const t=e.lengths[0]?a(d,0,f[0],i,n):null;if(!t)return null;c[0]=t[0],c[1]=t[1],i&&t.length>2&&(c[2]=t[2])}return t}function r(t,e,i,n,r,a,o=1){const u=s(r,a);let c=i,h=i+u,l=0,f=0,d=0,m=0,p=0;for(let s=0,y=n-1;s<y;s++,c+=u,h+=u){const i=e[c],s=e[c+1],n=e[c+2],a=e[h],o=e[h+1],u=e[h+2];let g=i*o-a*s;m+=g,l+=(i+a)*g,f+=(s+o)*g,r&&(g=i*u-a*n,d+=(n+u)*g,p+=g),i<t[0]&&(t[0]=i),i>t[1]&&(t[1]=i),s<t[2]&&(t[2]=s),s>t[3]&&(t[3]=s),r&&(n<t[4]&&(t[4]=n),n>t[5]&&(t[5]=n))}if(m*o>0&&(m*=-1),p*o>0&&(p*=-1),!m)return null;const g=[l,f,.5*m];return r&&(g[3]=d,g[4]=.5*p),g}function a(t,e,i,n,r){const a=s(n,r);let l=e,f=e+a,d=0,m=0,p=0,g=0;for(let s=0,y=i-1;s<y;s++,l+=a,f+=a){const e=t[l],i=t[l+1],s=t[l+2],r=t[f],a=t[f+1],y=t[f+2],_=n?u(e,i,s,r,a,y):o(e,i,r,a);if(_)if(d+=_,n){const t=h(e,i,s,r,a,y);m+=_*t[0],p+=_*t[1],g+=_*t[2]}else{const t=c(e,i,r,a);m+=_*t[0],p+=_*t[1]}}return d>0?n?[m/d,p/d,g/d]:[m/d,p/d]:i>0?n?[t[e],t[e+1],t[e+2]]:[t[e],t[e+1]]:null}function o(t,e,i,s){const n=i-t,r=s-e;return Math.sqrt(n*n+r*r)}function u(t,e,i,s,n,r){const a=s-t,o=n-e,u=r-i;return Math.sqrt(a*a+o*o+u*u)}function c(t,e,i,s){return[t+.5*(i-t),e+.5*(s-e)]}function h(t,e,i,s,n,r){return[t+.5*(s-t),e+.5*(n-e),i+.5*(r-i)]}i.d(e,"a",(function(){return n}))}}]);
//# sourceMappingURL=chunk-ff2bafc0.03aab947.js.map