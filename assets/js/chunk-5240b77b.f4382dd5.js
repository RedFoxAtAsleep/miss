(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5240b77b","chunk-395b120b"],{"2b92":function(e,t,a){"use strict";var i,r=a("a4ee"),s=(a("c120"),a("e92d"),a("cea0"),a("59b2")),n=a("d386"),l=(a("e041"),a("8eed"),a("f402"),a("6a0e")),o=a("d4ca");let c=i=class extends l["a"]{constructor(e){super(e),this.value=0,this.unit="milliseconds"}toMilliseconds(){return this.value*o["b"][this.unit]}clone(){return new i({value:this.value,unit:this.unit})}};Object(r["a"])([Object(s["b"])({type:Number,json:{write:!0},nonNullable:!0})],c.prototype,"value",void 0),Object(r["a"])([Object(s["b"])({type:o["d"].apiValues,json:{type:o["d"].jsonValues,read:o["d"].read,write:o["d"].write},nonNullable:!0})],c.prototype,"unit",void 0),c=i=Object(r["a"])([Object(n["a"])("esri.TimeInterval")],c);var u=c;t["a"]=u},"49a0":function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var i=a("8048");function r(e,t){const a=t||e.extent,r=e.width,s=Object(i["c"])(a&&a.spatialReference);return a&&r?a.width/r*s*i["g"]*96:0}},"53f8":function(e,t,a){"use strict";a.r(t);var i=a("a4ee"),r=(a("c120"),a("b2b2")),s=(a("e92d"),a("cea0")),n=a("59b2"),l=a("afcf"),o=a("d386"),c=a("09db"),u=a("ce50"),b=(a("e041"),a("8eed"),a("92ef")),d=(a("f402"),a("f4cc")),p=a("3af1"),y=a("2eab"),m=a("1853"),f=a("a6a3"),h=a("658b"),v=a("e694"),O=a("22f4"),j=a("b911"),g=a("3d59"),x=a("997b"),w=a("8b28"),S=a("0db5"),V=a("8e17"),D=a("5a62"),F=a("601a"),T=a("9096"),E=a("49a0"),I=a("303f"),N=a("e9d0"),z=a("2258"),L=a("d409"),M=a("70ce");let R=class extends(Object(x["a"])(Object(F["a"])(Object(D["a"])(Object(V["a"])(Object(L["a"])(Object(I["a"])(Object(g["a"])(Object(j["a"])(Object(S["a"])(Object(v["a"])(Object(w["a"])(Object(T["b"])(f["a"]))))))))))))){constructor(...e){super(...e),this.alwaysRefetch=!1,this.dpi=96,this.gdbVersion=null,this.imageFormat="png24",this.imageMaxHeight=2048,this.imageMaxWidth=2048,this.imageTransparency=!0,this.labelsVisible=!1,this.isReference=null,this.operationalLayerType="ArcGISMapServiceLayer",this.sourceJSON=null,this.sublayers=null,this.type="map-image",this.url=null}normalizeCtorArgs(e,t){return"string"==typeof e?{url:e,...t}:e}load(e){const t=Object(r["h"])(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},e).then(()=>this._fetchService(t),()=>this._fetchService(t))),Object(d["u"])(this)}readImageFormat(e,t){const a=t.supportedImageFormatTypes;return a&&a.indexOf("PNG32")>-1?"png32":"png24"}writeSublayers(e,t,a,i){if(!this.loaded||!e)return;const r=e.slice().reverse().flatten(({sublayers:e})=>e&&e.toArray().reverse()).toArray();let s=!1;if(this.capabilities&&this.capabilities.operations.supportsExportMap&&this.capabilities.exportMap.supportsDynamicLayers){const e=Object(b["d"])(i.origin);if(3===e){const e=this.createSublayersForOrigin("service").sublayers;s=Object(z["c"])(r,e,2)}else if(e>3){const e=this.createSublayersForOrigin("portal-item");s=Object(z["c"])(r,e.sublayers,Object(b["d"])(e.origin))}}const n=[],l={writeSublayerStructure:s,...i};let o=s;r.forEach(e=>{const t=e.write({},l);n.push(t),o=o||"user"===e.originOf("visible")}),n.some(e=>Object.keys(e).length>1)&&(t.layers=n),o&&(t.visibleLayers=r.filter(e=>e.visible).map(e=>e.id))}createExportImageParameters(e,t,a,i){const r=i&&i.pixelRatio||1;e&&this.version>=10&&(e=e.clone().shiftCentralMeridian());const s=new M["a"]({layer:this,scale:Object(E["a"])({extent:e,width:t})*r}),n=s.toJSON();s.destroy();const l=!i||!i.rotation||this.version<10.3?{}:{rotation:-i.rotation},o=e&&e.spatialReference,c=o.wkid||JSON.stringify(o.toJSON());n.dpi*=r;const u={};if(null!=i&&i.timeExtent){const{start:e,end:t}=i.timeExtent.toJSON();u.time=e&&t&&e===t?""+e:`${null==e?"null":e},${null==t?"null":t}`}else this.timeInfo&&!this.timeInfo.hasLiveData&&(u.time="null,null");return{bbox:e&&e.xmin+","+e.ymin+","+e.xmax+","+e.ymax,bboxSR:c,imageSR:c,size:t+","+a,...n,...l,...u}}async fetchImage(e,t,a,i){const r={responseType:"image"};i&&i.timestamp&&(r.query={...r.query,_ts:i.timestamp}),i&&i.signal&&(r.signal=i.signal),this.customParameters&&Object.keys(this.customParameters).length&&(r.query={...this.customParameters,...r.query});const s=this.parsedUrl.path+"/export",n={...this.parsedUrl.query,...this.createExportImageParameters(e,t,a,i),f:"image",_ts:this.alwaysRefetch?Date.now():null};return null==n.dynamicLayers||this.capabilities.exportMap.supportsDynamicLayers?(r.query?r.query={...n,...r.query}:r.query=n,Object(y["default"])(s,r).then(e=>e.data).catch(e=>{if(Object(d["n"])(e))throw e;throw new u["a"]("mapimagelayer:image-fetch-error","Unable to load image: "+s,{error:e})})):Object(d["t"])(new u["a"]("mapimagelayer:dynamiclayer-not-supported",`service ${this.url} doesn't support dynamic layers, which is required to be able to change the sublayer's order, rendering, labeling or source.`,{query:n}))}async fetchRecomputedExtents(e={}){const t={...e,query:{returnUpdates:!0,f:"json"}},{data:a}=await Object(y["default"])(this.url,t),{extent:i,fullExtent:r,timeExtent:s}=a,n=i||r;return{fullExtent:n&&p["a"].fromJSON(n),timeExtent:s&&h["a"].fromJSON({start:s[0],end:s[1]})}}loadAll(){return Object(m["a"])(this,e=>{e(this.allSublayers)})}async _fetchService(e){if(this.sourceJSON)return void this.read(this.sourceJSON,{origin:"service",url:this.parsedUrl});const{data:t,ssl:a}=await Object(y["default"])(this.parsedUrl.path,{query:{f:"json",...this.parsedUrl.query,...this.customParameters},signal:e});a&&(this.url=this.url.replace(/^http:/i,"https:")),this.sourceJSON=t,this.read(t,{origin:"service",url:this.parsedUrl})}};Object(i["a"])([Object(n["b"])()],R.prototype,"alwaysRefetch",void 0),Object(i["a"])([Object(n["b"])()],R.prototype,"dpi",void 0),Object(i["a"])([Object(n["b"])()],R.prototype,"gdbVersion",void 0),Object(i["a"])([Object(n["b"])({json:{read:!1,write:!1}})],R.prototype,"popupEnabled",void 0),Object(i["a"])([Object(n["b"])()],R.prototype,"imageFormat",void 0),Object(i["a"])([Object(l["a"])("imageFormat",["supportedImageFormatTypes"])],R.prototype,"readImageFormat",null),Object(i["a"])([Object(n["b"])({json:{origins:{service:{read:{source:"maxImageHeight"}}}}})],R.prototype,"imageMaxHeight",void 0),Object(i["a"])([Object(n["b"])({json:{origins:{service:{read:{source:"maxImageWidth"}}}}})],R.prototype,"imageMaxWidth",void 0),Object(i["a"])([Object(n["b"])()],R.prototype,"imageTransparency",void 0),Object(i["a"])([Object(n["b"])({json:{read:!1,write:!1}})],R.prototype,"labelsVisible",void 0),Object(i["a"])([Object(n["b"])({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],R.prototype,"isReference",void 0),Object(i["a"])([Object(n["b"])({type:["ArcGISMapServiceLayer"]})],R.prototype,"operationalLayerType",void 0),Object(i["a"])([Object(n["b"])()],R.prototype,"sourceJSON",void 0),Object(i["a"])([Object(n["b"])({json:{write:{ignoreOrigin:!0}}})],R.prototype,"sublayers",void 0),Object(i["a"])([Object(c["a"])("sublayers",{layers:{type:[N["a"]]},visibleLayers:{type:[s["a"]]}})],R.prototype,"writeSublayers",null),Object(i["a"])([Object(n["b"])({type:["show","hide","hide-children"]})],R.prototype,"listMode",void 0),Object(i["a"])([Object(n["b"])({json:{read:!1},readOnly:!0,value:"map-image"})],R.prototype,"type",void 0),Object(i["a"])([Object(n["b"])(O["j"])],R.prototype,"url",void 0),R=Object(i["a"])([Object(o["a"])("esri.layers.MapImageLayer")],R);var U=R;t["default"]=U},"601a":function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var i=a("a4ee"),r=(a("c120"),a("e92d"),a("cea0"),a("59b2")),s=a("afcf"),n=a("d386"),l=(a("e041"),a("8eed"),a("f402"),a("c1da")),o=a("d4ca"),c=a("658b"),u=a("2b92"),b=a("f806");const d=e=>{let t=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(e,t){const a=t.timeInfo.exportOptions;if(!a)return null;const i=a.timeOffset,r=o["d"].fromJSON(a.timeOffsetUnits);return i&&r?new u["a"]({value:i,unit:r}):null}set timeInfo(e){Object(l["k"])(e,this.fields),this._set("timeInfo",e)}};return Object(i["a"])([Object(r["b"])({type:c["a"],json:{write:!1}})],t.prototype,"timeExtent",void 0),Object(i["a"])([Object(r["b"])({type:u["a"]})],t.prototype,"timeOffset",void 0),Object(i["a"])([Object(s["a"])("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),Object(i["a"])([Object(r["b"])({value:null,type:b["a"],json:{write:!0,origins:{"web-document":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),Object(i["a"])([Object(r["b"])({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],t.prototype,"useViewTime",void 0),t=Object(i["a"])([Object(n["a"])("esri.layers.mixins.TemporalLayer")],t),t}},"70ce":function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var i=a("a4ee"),r=(a("c120"),a("e92d"),a("cea0"),a("59b2")),s=a("d386"),n=(a("e041"),a("8eed"),a("f402"),a("fc29")),l=a("22f4"),o=a("9096"),c=a("2258"),u=a("535f");const b={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let d=class extends(Object(o["b"])(n["a"])){constructor(){super(...arguments),this._scale=null,this.view=null}destroy(){this.layer=this.view=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const e=this.visibleSublayers.map(e=>e.toExportImageJSON());return e.length?JSON.stringify(e):null}get hasDynamicLayers(){return this.layer&&Object(c["a"])(this.visibleSublayers,this.layer.serviceSublayers,this.layer)}set layer(e){this._get("layer")!==e&&(this._set("layer",e),this.handles.remove("layer"),e&&this.handles.add([e.allSublayers.on("change",()=>this.notifyChange("visibleSublayers")),e.on("sublayer-update",e=>this.notifyChange(b[e.propertyName]))],"layer"))}get layers(){const e=this.visibleSublayers;return e?e.length?"show:"+e.map(e=>e.id).join(","):"show:-1":null}get layerDefs(){const e=this.visibleSublayers.filter(e=>null!=e.definitionExpression);return e.length?JSON.stringify(e.reduce((e,t)=>(e[t.id]=t.definitionExpression,e),{})):null}get scale(){return null!=this._scale?this._scale:this.view&&this.view.scale||0}set scale(e){this.view||(this._scale=e,this.notifyChange("scale"))}get version(){const e=this;e.layers,e.layerDefs,e.dynamicLayers,e.timeExtent;const t=e.layer;return t&&(t.dpi,t.imageFormat,t.imageTransparency,t.gdbVersion),(this._get("version")||0)+1}set version(e){this._set("version",e)}get visibleSublayers(){const e=[];if(!this.layer)return e;const t=this.layer.sublayers,a=t=>{const i=this.scale,r=0===i,s=0===t.minScale||i<=t.minScale,n=0===t.maxScale||i>=t.maxScale;t.visible&&(r||s&&n)&&(t.sublayers?t.sublayers.forEach(a):e.unshift(t))};t&&t.forEach(a);const i=this._get("visibleSublayers");return!i||i.length!==e.length||i.some((t,a)=>e[a]!==t)?e:i}toJSON(){const e=this.layer;let t={dpi:e.dpi,format:e.imageFormat,transparent:e.imageTransparency,gdbVersion:e.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?t.dynamicLayers=this.dynamicLayers:t={...t,layers:this.layers,layerDefs:this.layerDefs},t}};Object(i["a"])([Object(r["b"])({readOnly:!0,dependsOn:["hasDynamicLayers","visibleSublayers"]})],d.prototype,"dynamicLayers",null),Object(i["a"])([Object(r["b"])({readOnly:!0,dependsOn:["visibleSublayers","layer.serviceSublayers","layer.capabilities"]})],d.prototype,"hasDynamicLayers",null),Object(i["a"])([Object(r["b"])()],d.prototype,"layer",null),Object(i["a"])([Object(r["b"])({readOnly:!0,dependsOn:["visibleSublayers"]})],d.prototype,"layers",null),Object(i["a"])([Object(r["b"])({readOnly:!0,dependsOn:["visibleSublayers"]})],d.prototype,"layerDefs",null),Object(i["a"])([Object(r["b"])({type:Number,dependsOn:["view.scale"]})],d.prototype,"scale",null),Object(i["a"])([Object(r["b"])(l["a"])],d.prototype,"timeExtent",void 0),Object(i["a"])([Object(r["b"])({dependsOn:["layers","layerDefs","dynamicLayers","layer.dpi","layer.imageFormat","layer.imageTransparency","layer.gdbVersion","timeExtent"]})],d.prototype,"version",null),Object(i["a"])([Object(r["b"])({type:u["a"]})],d.prototype,"view",void 0),Object(i["a"])([Object(r["b"])({readOnly:!0,dependsOn:["layer.sublayers","scale"]})],d.prototype,"visibleSublayers",null),d=Object(i["a"])([Object(s["a"])("esri.layers.mixins.ExportImageParameters")],d)},"86f2":function(e,t,a){"use strict";function i(e){return e&&"esri.renderers.visualVariables.SizeVariable"===e.declaredClass}function r(e){return null!=e&&!isNaN(e)&&isFinite(e)}function s(e){return e.valueExpression?"expression":e.field&&"string"==typeof e.field?"field":"unknown"}function n(e,t){const a=t||s(e),i=e.valueUnit||"unknown";return"unknown"===a?"constant":e.stops?"stops":null!=e.minSize&&null!=e.maxSize&&null!=e.minDataValue&&null!=e.maxDataValue?"clamped-linear":"unknown"===i?null!=e.minSize&&null!=e.minDataValue?e.minSize&&e.minDataValue?"proportional":"additive":"identity":"real-world-size"}a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return i})),a.d(t,"d",(function(){return r}))},"9b40":function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var i=a("2255"),r=a("8048");const s={inches:Object(r["a"])(1,"meters","inches"),feet:Object(r["a"])(1,"meters","feet"),"us-feet":Object(r["a"])(1,"meters","us-feet"),yards:Object(r["a"])(1,"meters","yards"),miles:Object(r["a"])(1,"meters","miles"),"nautical-miles":Object(r["a"])(1,"meters","nautical-miles"),millimeters:Object(r["a"])(1,"meters","millimeters"),centimeters:Object(r["a"])(1,"meters","centimeters"),decimeters:Object(r["a"])(1,"meters","decimeters"),meters:Object(r["a"])(1,"meters","meters"),kilometers:Object(r["a"])(1,"meters","kilometers"),"decimal-degrees":1/Object(r["h"])(1,"meters",i["a"].radius)}},d297:function(e,t,a){"use strict";a.d(t,"a",(function(){return w})),a.d(t,"b",(function(){return y})),a.d(t,"c",(function(){return m})),a.d(t,"d",(function(){return f})),a.d(t,"e",(function(){return h})),a.d(t,"f",(function(){return g})),a.d(t,"g",(function(){return p}));var i=a("6c97"),r=a("b2b2"),s=a("e92d"),n=a("9ef0"),l=a("8d60"),o=a("9b40"),c=a("86f2");const u=s["a"].getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),b=new l["a"],d=Math.PI,p=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function y(e,t,a){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.filter(e=>"color"===e.type)[0]:e;if(!i)return;if("esri.renderers.visualVariables.ColorVariable"!==i.declaredClass)return void u.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");const s="number"==typeof t,l=s?null:t,o=l&&l.attributes;let c=s?t:null;const b=i.field,{ipData:d,hasExpression:p}=i.cache;let y=i.cache.compiledFunc;if(!b&&!p){const e=i.stops;return e&&e[0]&&e[0].color}if("number"!=typeof c)if(p){if(!Object(r["h"])(a)||!Object(r["h"])(a.arcade))return void u.error("Use of arcade expressions requires an arcade context");const e={viewingMode:a.viewingMode,scale:a.scale,spatialReference:a.spatialReference},t=a.arcade.arcadeUtils,s=t.getViewInfo(e),n=t.createExecContext(l,s);if(!y){const e=t.createSyntaxTree(i.valueExpression);y=t.createFunction(e),i.cache.compiledFunc=y}c=t.executeFunction(y,n)}else o&&(c=o[b]);const m=i.normalizationField,f=o?parseFloat(o[m]):void 0;if(null!=c&&(!m||s||!isNaN(f)&&0!==f)){isNaN(f)||s||(c/=f);const e=x(c,d);if(e){const t=e[0],s=e[1],l=t===s?i.stops[t].color:n["a"].blendColors(i.stops[t].color,i.stops[s].color,e[2],Object(r["h"])(a)?a.color:void 0);return new n["a"](l)}}}function m(e,t,a){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.filter(e=>"opacity"===e.type)[0]:e;if(!i)return;if("esri.renderers.visualVariables.OpacityVariable"!==i.declaredClass)return void u.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");const s="number"==typeof t,n=s?null:t,l=n&&n.attributes;let o=s?t:null;const c=i.field,{ipData:b,hasExpression:d}=i.cache;let p=i.cache.compiledFunc;if(!c&&!d){const e=i.stops;return e&&e[0]&&e[0].opacity}if("number"!=typeof o)if(d){if(Object(r["g"])(a)||Object(r["g"])(a.arcade))return void u.error("Use of arcade expressions requires an arcade context");const e={viewingMode:a.viewingMode,scale:a.scale,spatialReference:a.spatialReference},t=a.arcade.arcadeUtils,s=t.getViewInfo(e),l=t.createExecContext(n,s);if(!p){const e=t.createSyntaxTree(i.valueExpression);p=t.createFunction(e),i.cache.compiledFunc=p}o=t.executeFunction(p,l)}else l&&(o=l[c]);const y=i.normalizationField,m=l?parseFloat(l[y]):void 0;if(null!=o&&(!y||s||!isNaN(m)&&0!==m)){isNaN(m)||s||(o/=m);const e=x(o,b);if(e){const t=e[0],a=e[1];if(t===a)return i.stops[t].opacity;{const r=i.stops[t].opacity;return r+(i.stops[a].opacity-r)*e[2]}}}}function f(e,t,a){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.filter(e=>"rotation"===e.type)[0]:e;if(!i)return;if("esri.renderers.visualVariables.RotationVariable"!==i.declaredClass)return void u.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");const s=i.axis||"heading",n="heading"===s&&"arithmetic"===i.rotationType?90:0,l="heading"===s&&"arithmetic"===i.rotationType?-1:1,o="number"==typeof t?null:t,c=o&&o.attributes,b=i.field,{hasExpression:d}=i.cache;let p=i.cache.compiledFunc,y=0;if(!b&&!d)return y;if(d){if(Object(r["g"])(a)||Object(r["g"])(a.arcade))return void u.error("Use of arcade expressions requires an arcade context");const e={viewingMode:a.viewingMode,scale:a.scale,spatialReference:a.spatialReference},t=a.arcade.arcadeUtils,s=t.getViewInfo(e),n=t.createExecContext(o,s);if(!p){const e=t.createSyntaxTree(i.valueExpression);p=t.createFunction(e),i.cache.compiledFunc=p}y=t.executeFunction(p,n)}else c&&(y=c[b]||0);return y="number"!=typeof y||isNaN(y)?null:n+l*y,y}function h(e,t,a){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.filter(e=>"size"===e.type)[0]:e;if(!i)return;if("esri.renderers.visualVariables.SizeVariable"!==i.declaredClass)return void u.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");const s=j(function(e,t,a){const i="number"==typeof t,s=i?null:t,n=s&&s.attributes;let l=i?t:null;const{isScaleDriven:o}=e.cache;let b=e.cache.compiledFunc;if(o){const t=Object(r["h"])(a)?a.scale:void 0,i=Object(r["h"])(a)?a.view:void 0;l=null==t||"3d"===i?function(e){let t=null,a=null;const i=e.stops;return i?(t=i[0].value,a=i[i.length-1].value):(t=e.minDataValue||0,a=e.maxDataValue||0),(t+a)/2}(e):t}else if(!i)switch(e.inputValueType){case"expression":{if(Object(r["g"])(a)||Object(r["g"])(a.arcade))return void u.error("Use of arcade expressions requires an arcade context");const t={viewingMode:a.viewingMode,scale:a.scale,spatialReference:a.spatialReference},i=a.arcade.arcadeUtils,n=i.getViewInfo(t),o=i.createExecContext(s,n);if(!b){const t=i.createSyntaxTree(e.valueExpression);b=i.createFunction(t),e.cache.compiledFunc=b}l=i.executeFunction(b,o);break}case"field":n&&(l=n[e.field]);break;case"unknown":l=null}if(!Object(c["d"])(l))return null;if(i||!e.normalizationField)return l;const d=n?parseFloat(n[e.normalizationField]):null;return Object(c["d"])(d)&&0!==d?l/d:null}(i,t,a),i,t,a,i.cache.ipData);return null==s||isNaN(s)?0:s}function v(e,t,a){return null==e?null:Object(c["c"])(e)?h(e,t,a):Object(c["d"])(e)?e:null}function O(e,t,a){return Object(c["d"])(a)&&e>a?a:Object(c["d"])(t)&&e<t?t:e}function j(e,t,a,i,s){switch(t.transformationType){case"additive":return function(e,t,a,i){return e+(v(t.minSize,a,i)||t.minDataValue)}(e,t,a,i);case"constant":return function(e,t,a){const i=e.stops;let r=i&&i.length&&i[0].size;return null==r&&(r=e.minSize),v(r,t,a)}(t,a,i);case"clamped-linear":return function(e,t,a,i){const s=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),n=v(t.minSize,a,i),l=v(t.maxSize,a,i),o=Object(r["h"])(i)?i.shape:void 0;if(e<=t.minDataValue)return n;if(e>=t.maxDataValue)return l;if("area"===t.scaleBy&&o){const e="circle"===o,t=e?d*Math.pow(n/2,2):n*n,a=t+s*((e?d*Math.pow(l/2,2):l*l)-t);return e?2*Math.sqrt(a/d):Math.sqrt(a)}return n+s*(l-n)}(e,t,a,i);case"proportional":return function(e,t,a,i){const s=Object(r["h"])(i)?i.shape:void 0,n=e/t.minDataValue,l=v(t.minSize,a,i),o=v(t.maxSize,a,i);let c=null;return c="circle"===s?2*Math.sqrt(n*Math.pow(l/2,2)):"square"===s||"diamond"===s||"image"===s?Math.sqrt(n*Math.pow(l,2)):n*l,O(c,l,o)}(e,t,a,i);case"stops":return function(e,t,a,i,r){const[s,n,l]=x(e,r);if(s===n)return v(t.stops[s].size,a,i);{const e=v(t.stops[s].size,a,i);return e+(v(t.stops[n].size,a,i)-e)*l}}(e,t,a,i,s);case"real-world-size":return function(e,t,a,i){const s=(Object(r["h"])(i)&&i.resolution?i.resolution:1)*o["a"][t.valueUnit],n=v(t.minSize,a,i),l=v(t.maxSize,a,i),{valueRepresentation:c}=t;let u=null;return u="area"===c?2*Math.sqrt(e/d)/s:"radius"===c||"distance"===c?2*e/s:e/s,O(u,n,l)}(e,t,a,i);case"identity":return e;case"unknown":return null}}function g(e,t,a){const{isScaleDriven:i}=e.cache;if(!(i&&"3d"===a||t))return null;const r={scale:t,view:a};let s=v(e.minSize,b,r),n=v(e.maxSize,b,r);if(null!=s||null!=n){if(s>n){const e=n;n=s,s=e}return{minSize:s,maxSize:n}}}function x(e,t){if(!t)return;let a=0,i=t.length-1;return t.some((t,r)=>e<t?(i=r,!0):(a=r,!1)),[a,i,(e-t[a])/(t[i]-t[a])]}function w(e,t,a){const r=["proportional","proportional","proportional"];for(const s of e){const e=s.useSymbolValue?"symbol-value":h(s,t,a);switch(s.axis){case"width":r[0]=e;break;case"depth":r[1]=e;break;case"height":r[2]=e;break;case"width-and-depth":r[0]=e,r[1]=e;break;case"all":case void 0:case null:r[0]=e,r[1]=e,r[2]=e;break;default:Object(i["a"])(s.axis)}}return r}},f806:function(e,t,a){"use strict";var i,r=a("a4ee"),s=(a("c120"),a("7ffa")),n=(a("e92d"),a("cea0"),a("59b2")),l=a("afcf"),o=a("d386"),c=a("09db"),u=(a("e041"),a("8eed"),a("f402"),a("6a0e")),b=a("d4ca"),d=a("658b"),p=a("2b92");let y=i=class extends u["a"]{constructor(e){super(e),this.respectsDaylightSaving=!1,this.timezone=null}readRespectsDaylightSaving(e,t){return void 0!==t.respectsDaylightSaving?t.respectsDaylightSaving:void 0!==t.respectDaylightSaving&&t.respectDaylightSaving}clone(){const{respectsDaylightSaving:e,timezone:t}=this;return new i({respectsDaylightSaving:e,timezone:t})}};Object(r["a"])([Object(n["b"])({type:Boolean,json:{write:!0}})],y.prototype,"respectsDaylightSaving",void 0),Object(r["a"])([Object(l["a"])("respectsDaylightSaving",["respectsDaylightSaving","respectDaylightSaving"])],y.prototype,"readRespectsDaylightSaving",null),Object(r["a"])([Object(n["b"])({type:String,json:{read:{source:"timeZone"},write:{target:"timeZone"}}})],y.prototype,"timezone",void 0),y=i=Object(r["a"])([Object(o["a"])("esri.layers.support.TimeReference")],y);var m,f=y,h=f;let v=m=class extends u["a"]{constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeReference=null,this.trackIdField=null,this.useTime=!0}readFullTimeExtent(e,t){if(!t.timeExtent||!Array.isArray(t.timeExtent)||2!==t.timeExtent.length)return null;const a=new Date(t.timeExtent[0]),i=new Date(t.timeExtent[1]);return new d["a"]({start:a,end:i})}writeFullTimeExtent(e,t){e&&e.start&&e.end?t.timeExtent=[e.start.getTime(),e.end.getTime()]:t.timeExtent=null}readInterval(e,t){return t.timeInterval&&t.timeIntervalUnits?new p["a"]({value:t.timeInterval,unit:b["d"].fromJSON(t.timeIntervalUnits)}):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?new p["a"]({value:t.defaultTimeInterval,unit:b["d"].fromJSON(t.defaultTimeIntervalUnits)}):null}writeInterval(e,t){if(e){const a=e.toJSON();t.timeInterval=a.value,t.timeIntervalUnits=a.unit}else t.timeInterval=null,t.timeIntervalUnits=null}clone(){const{cumulative:e,endField:t,hasLiveData:a,interval:i,startField:r,timeReference:n,fullTimeExtent:l,trackIdField:o,useTime:c}=this;return new m({cumulative:e,endField:t,hasLiveData:a,interval:i,startField:r,timeReference:Object(s["a"])(n),fullTimeExtent:Object(s["a"])(l),trackIdField:o,useTime:c})}};Object(r["a"])([Object(n["b"])({type:Boolean,json:{read:{source:"exportOptions.timeDataCumulative"},write:{target:"exportOptions.timeDataCumulative"}}})],v.prototype,"cumulative",void 0),Object(r["a"])([Object(n["b"])({type:String,json:{read:{source:"endTimeField"},write:{target:"endTimeField",allowNull:!0}}})],v.prototype,"endField",void 0),Object(r["a"])([Object(n["b"])({type:d["a"],json:{write:{enabled:!0,allowNull:!0}}})],v.prototype,"fullTimeExtent",void 0),Object(r["a"])([Object(l["a"])("fullTimeExtent",["timeExtent"])],v.prototype,"readFullTimeExtent",null),Object(r["a"])([Object(c["a"])("fullTimeExtent")],v.prototype,"writeFullTimeExtent",null),Object(r["a"])([Object(n["b"])({type:Boolean,json:{write:!0}})],v.prototype,"hasLiveData",void 0),Object(r["a"])([Object(n["b"])({type:p["a"],json:{write:{enabled:!0,allowNull:!0}}})],v.prototype,"interval",void 0),Object(r["a"])([Object(l["a"])("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],v.prototype,"readInterval",null),Object(r["a"])([Object(c["a"])("interval")],v.prototype,"writeInterval",null),Object(r["a"])([Object(n["b"])({type:String,json:{read:{source:"startTimeField"},write:{target:"startTimeField",allowNull:!0}}})],v.prototype,"startField",void 0),Object(r["a"])([Object(n["b"])({type:h,json:{write:{enabled:!0,allowNull:!0}}})],v.prototype,"timeReference",void 0),Object(r["a"])([Object(n["b"])({type:String,json:{write:{enabled:!0,allowNull:!0}}})],v.prototype,"trackIdField",void 0),Object(r["a"])([Object(n["b"])({type:Boolean,json:{read:{source:"exportOptions.useTime"},write:{target:"exportOptions.useTime"}}})],v.prototype,"useTime",void 0),v=m=Object(r["a"])([Object(o["a"])("esri.layers.support.TimeInfo")],v);var O=v;t["a"]=O}}]);