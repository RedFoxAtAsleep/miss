(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ba2d03d2","chunk-91db3056","chunk-96729b9e"],{"0f1c":function(e,t,i){"use strict";i.d(t,"a",(function(){return b})),i.d(t,"b",(function(){return f})),i.d(t,"c",(function(){return h}));var r=i("b2b2"),s=i("4c37"),a=i("fc29"),n=i("2c4f");const o=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];function c(e){return e instanceof a["a"]}function l(e){return e instanceof n["a"]?Object.keys(e.items):c(e)?Object(s["a"])(e).keys():e?Object.keys(e):[]}function u(e,t){return e instanceof n["a"]?e.items[t]:e[t]}function d(e){return e?e.declaredClass:null}function p(e,t){const i=e.diff;if(i&&"function"==typeof i)return i(e,t);const s=l(e),a=l(t);if(0===s.length&&0===a.length)return;if(!s.length||!a.length||function(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}(e,t))return{type:"complete",oldValue:e,newValue:t};const n=a.filter(e=>-1===s.indexOf(e)),f=s.filter(e=>-1===a.indexOf(e)),h=s.filter(i=>a.indexOf(i)>-1&&u(e,i)!==u(t,i)).concat(n,f).sort(),b=d(e);if(b&&o.indexOf(b)>-1&&h.length)return{type:"complete",oldValue:e,newValue:t};let m;const y=c(e)&&c(t);for(const o of h){const s=u(e,o),a=u(t,o);let n;(y||"function"!=typeof s&&"function"!=typeof a)&&s!==a&&(null==s&&null==a||(n=i&&i[o]&&"function"==typeof i[o]?i[o](s,a):"object"==typeof s&&"object"==typeof a&&d(s)===d(a)?p(s,a):{type:"complete",oldValue:s,newValue:a},Object(r["h"])(n)&&(Object(r["h"])(m)?m.diff[o]=n:m={type:"partial",diff:{[o]:n}})))}return m}function f(e,t){if(Object(r["g"])(e))return!1;const i=t.split(".");let s=e;for(const r of i){if("complete"===s.type)return!0;if("partial"!==s.type)return!1;{const e=s.diff[r];if(!e)return!1;s=e}}return!0}function h(e,t){for(const i of t)if(f(e,i))return!0;return!1}function b(e,t){if("function"!=typeof e&&"function"!=typeof t&&(e||t))return!e||!t||"object"==typeof e&&"object"==typeof t&&d(e)!==d(t)?{type:"complete",oldValue:e,newValue:t}:p(e,t)}},"5afa":function(e,t,i){"use strict";i.r(t);var r=i("a4ee"),s=(i("c120"),i("e92d"),i("cea0"),i("59b2")),a=i("afcf"),n=i("d386"),o=(i("e041"),i("8eed"),i("f402"),i("5996")),c=i("3af1"),l=(i("e06a"),i("2c4f")),u=i("a6a3"),d=i("e694"),p=i("b911"),f=i("997b"),h=i("0db5"),b=i("5a62"),m=i("5bd5"),y=i("f626");let O=class extends(Object(f["a"])(Object(b["a"])(Object(p["a"])(Object(h["a"])(Object(d["a"])(u["a"])))))){constructor(e){super(e),this.capabilities={operations:{supportsEditing:!0}},this.legendEnabled=!1,this.lineGraphics=new y["b"],this.opacity=1,this.pointGraphics=new y["b"],this.polygonGraphics=new y["b"],this.textGraphics=new y["b"],this.type="map-notes"}readFullExtent(e,t){if(!t.layers.length)return new c["a"]({xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:o["a"].WGS84});const i=o["a"].fromJSON(t.layers[0].layerDefinition.spatialReference);return t.layers.reduce((e,t)=>{const i=t.layerDefinition.extent;return i?c["a"].fromJSON(i).union(e):e},new c["a"]({spatialReference:i}))}readCapabilities(e,t){return{operations:{supportsEditing:!t.layers.some(e=>!!e.layerDefinition.drawingInfo)}}}readFeatureCollections(e,t,i){const r=t.layers.map(e=>{const t=new m["default"];return t.read(e,i),t});return new l["a"]({items:r})}readMinScale(e,t){for(const i of t.layers)if(null!=i.layerDefinition.minScale)return i.layerDefinition.minScale;return 0}readMaxScale(e,t){for(const i of t.layers)if(null!=i.layerDefinition.maxScale)return i.layerDefinition.maxScale;return 0}load(e){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Feature Collection"]},e)),Promise.resolve(this)}read(e,t){"featureCollection"in e&&super.read(e.featureCollection,t),super.read(e,t)}};Object(r["a"])([Object(a["a"])(["web-map","portal-item"],"fullExtent",["layers"])],O.prototype,"readFullExtent",null),Object(r["a"])([Object(s["b"])({readOnly:!0})],O.prototype,"capabilities",void 0),Object(r["a"])([Object(a["a"])(["portal-item","web-map"],"capabilities",["layers"])],O.prototype,"readCapabilities",null),Object(r["a"])([Object(s["b"])({readOnly:!0})],O.prototype,"featureCollections",void 0),Object(r["a"])([Object(a["a"])(["web-map","portal-item"],"featureCollections",["layers"])],O.prototype,"readFeatureCollections",null),Object(r["a"])([Object(s["b"])({readOnly:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:!0}})],O.prototype,"legendEnabled",void 0),Object(r["a"])([Object(s["b"])(Object(y["c"])("lineGraphics"))],O.prototype,"lineGraphics",void 0),Object(r["a"])([Object(s["b"])({type:["show","hide"]})],O.prototype,"listMode",void 0),Object(r["a"])([Object(a["a"])(["web-map","portal-item"],"minScale",["layers"])],O.prototype,"readMinScale",null),Object(r["a"])([Object(a["a"])(["web-map","portal-item"],"maxScale",["layers"])],O.prototype,"readMaxScale",null),Object(r["a"])([Object(s["b"])({type:Number,json:{name:"opacity",write:!0}})],O.prototype,"opacity",void 0),Object(r["a"])([Object(s["b"])(Object(y["c"])("pointGraphics"))],O.prototype,"pointGraphics",void 0),Object(r["a"])([Object(s["b"])(Object(y["c"])("polygonGraphics"))],O.prototype,"polygonGraphics",void 0),Object(r["a"])([Object(s["b"])(Object(y["c"])("textGraphics"))],O.prototype,"textGraphics",void 0),Object(r["a"])([Object(s["b"])({readOnly:!0,json:{read:!1}})],O.prototype,"type",void 0),O=Object(r["a"])([Object(n["a"])("esri.layers.MapNotesLayer")],O);var j=O;t["default"]=j},"80b7":function(e,t,i){"use strict";function r(e){return"date"===e.type||"esriFieldTypeDate"===e.type}function s(e){return e.toLowerCase().trim()}t["a"]=class{constructor(e){if(this.fields=e,this._fieldsMap=new Map,this._dateFieldsSet=new Set,this.dateFields=[],!e)return;const t=[];for(const i of e){const e=i&&i.name;if(e){const a=s(e);this._fieldsMap.set(e,i),this._fieldsMap.set(a,i),t.push(a),r(i)&&(this.dateFields.push(i),this._dateFieldsSet.add(i))}}t.sort(),this.uid=t.join(",")}destroy(){this._fieldsMap.clear()}has(e){return null!=this.get(e)}get(e){return null!=e?this._fieldsMap.get(e)||this._fieldsMap.get(s(e)):void 0}isDateField(e){return this._dateFieldsSet.has(this.get(e))}normalizeFieldName(e){const t=this.get(e);if(t)return t.name}}},8246:function(e,t,i){"use strict";i.d(t,"a",(function(){return s})),i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return a})),i.d(t,"d",(function(){return o})),i.d(t,"e",(function(){return c})),i.d(t,"f",(function(){return u})),i.d(t,"g",(function(){return l}));const r=[252,146,31,255],s={type:"esriSMS",style:"esriSMSCircle",size:6,color:r,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},a={type:"esriSLS",style:"esriSLSSolid",width:.75,color:r},n={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},o={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},c={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},l={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},u={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}},"86f2":function(e,t,i){"use strict";function r(e){return e&&"esri.renderers.visualVariables.SizeVariable"===e.declaredClass}function s(e){return null!=e&&!isNaN(e)&&isFinite(e)}function a(e){return e.valueExpression?"expression":e.field&&"string"==typeof e.field?"field":"unknown"}function n(e,t){const i=t||a(e),r=e.valueUnit||"unknown";return"unknown"===i?"constant":e.stops?"stops":null!=e.minSize&&null!=e.maxSize&&null!=e.minDataValue&&null!=e.maxDataValue?"clamped-linear":"unknown"===r?null!=e.minSize&&null!=e.minDataValue?e.minSize&&e.minDataValue?"proportional":"additive":"identity":"real-world-size"}i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return r})),i.d(t,"d",(function(){return s}))},"8b28":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var r=i("a4ee"),s=(i("c120"),i("e92d"),i("cea0"),i("59b2")),a=i("d386");i("e041"),i("8eed"),i("f402");const n=e=>{let t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return Object(r["a"])([Object(s["b"])({json:{write:!0,origins:{"web-scene":{write:!1}}}})],t.prototype,"customParameters",void 0),t=Object(r["a"])([Object(a["a"])("esri.layers.mixins.CustomParametersMixin")],t),t}},"9b40":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var r=i("2255"),s=i("8048");const a={inches:Object(s["a"])(1,"meters","inches"),feet:Object(s["a"])(1,"meters","feet"),"us-feet":Object(s["a"])(1,"meters","us-feet"),yards:Object(s["a"])(1,"meters","yards"),miles:Object(s["a"])(1,"meters","miles"),"nautical-miles":Object(s["a"])(1,"meters","nautical-miles"),millimeters:Object(s["a"])(1,"meters","millimeters"),centimeters:Object(s["a"])(1,"meters","centimeters"),decimeters:Object(s["a"])(1,"meters","decimeters"),meters:Object(s["a"])(1,"meters","meters"),kilometers:Object(s["a"])(1,"meters","kilometers"),"decimal-degrees":1/Object(s["h"])(1,"meters",r["a"].radius)}},a2b1:function(e,t,i){"use strict";var r=i("a4ee"),s=(i("c120"),i("7ffa")),a=(i("e92d"),i("cea0"),i("59b2")),n=i("afcf"),o=i("d386"),c=i("09db"),l=(i("e041"),i("8eed"),i("f402"),i("6a0e")),u=i("4106"),d=i("b5a9"),p=i("df3d"),f=(i("5970"),i("ace4"));let h=class extends l["a"]{constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const t={};for(const i in e)if(e.hasOwnProperty(i)){const r=e[i];switch(r.type){case"range":t[i]=p["a"].fromJSON(r);break;case"codedValue":t[i]=u["a"].fromJSON(r);break;case"inherited":t[i]=d["a"].fromJSON(r)}}return t}writeDomains(e,t){const i={};for(const r in e)e.hasOwnProperty(r)&&(i[r]=e[r]&&e[r].toJSON());Object(s["c"])(i),t.domains=i}readTemplates(e){return e&&e.map(e=>new f["a"](e))}writeTemplates(e,t){t.templates=e&&e.map(e=>e.toJSON())}};Object(r["a"])([Object(a["b"])({json:{write:!0}})],h.prototype,"id",void 0),Object(r["a"])([Object(a["b"])({json:{write:!0}})],h.prototype,"name",void 0),Object(r["a"])([Object(a["b"])({json:{write:!0}})],h.prototype,"domains",void 0),Object(r["a"])([Object(n["a"])("domains")],h.prototype,"readDomains",null),Object(r["a"])([Object(c["a"])("domains")],h.prototype,"writeDomains",null),Object(r["a"])([Object(a["b"])({json:{write:!0}})],h.prototype,"templates",void 0),Object(r["a"])([Object(n["a"])("templates")],h.prototype,"readTemplates",null),Object(r["a"])([Object(c["a"])("templates")],h.prototype,"writeTemplates",null),h=Object(r["a"])([Object(o["a"])("esri.layers.support.FeatureType")],h);var b=h;t["a"]=b},ace4:function(e,t,i){"use strict";var r=i("a4ee"),s=(i("c120"),i("7ffa")),a=(i("e92d"),i("cea0"),i("59b2")),n=i("fa8a"),o=i("d386"),c=i("09db"),l=(i("e041"),i("8eed"),i("f402"),i("6a0e"));const u=new n["a"]({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let d=class extends l["a"]{constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}writeDrawingTool(e,t){t.drawingTool=u.toJSON(e)}writePrototype(e,t){t.prototype=Object(s["c"])(Object(s["a"])(e),!0)}writeThumbnail(e,t){t.thumbnail=Object(s["c"])(Object(s["a"])(e))}};Object(r["a"])([Object(a["b"])({json:{write:!0}})],d.prototype,"name",void 0),Object(r["a"])([Object(a["b"])({json:{write:!0}})],d.prototype,"description",void 0),Object(r["a"])([Object(a["b"])({json:{read:u.read,write:u.write}})],d.prototype,"drawingTool",void 0),Object(r["a"])([Object(c["a"])("drawingTool")],d.prototype,"writeDrawingTool",null),Object(r["a"])([Object(a["b"])({json:{write:!0}})],d.prototype,"prototype",void 0),Object(r["a"])([Object(c["a"])("prototype")],d.prototype,"writePrototype",null),Object(r["a"])([Object(a["b"])({json:{write:!0}})],d.prototype,"thumbnail",void 0),Object(r["a"])([Object(c["a"])("thumbnail")],d.prototype,"writeThumbnail",null),d=Object(r["a"])([Object(o["a"])("esri.layers.support.FeatureTemplate")],d);var p=d;t["a"]=p},aefa:function(e,t,i){"use strict";i.d(t,"a",(function(){return s})),i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return n}));var r=i("8a44");const s=-3;class a{constructor(e,t,i){this._namespace=e,this._storage=t,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",i&&(this._storage.registerRemoveFunc(this._namespace,i),this._removeFunc=!0)}get namespace(){return this._namespace.slice(0,-1)}get hitRate(){return this._hit/(this._hit+this._miss)}get size(){return this._storage.size}get maxSize(){return this._storage.maxSize}resetHitRate(){this._hit=this._miss=0}destroy(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this)}put(e,t,i,r=0){this._storage.put(this._namespace+e,t,i,r)}get(e){const t=this._storage.get(this._namespace+e);return void 0===t?++this._miss:++this._hit,t}pop(e){const t=this._storage.pop(this._namespace+e);return void 0===t?++this._miss:++this._hit,t}updateSize(e,t,i){this._storage.updateSize(this._namespace+e,t,i)}clear(){this._storage.clear(this._namespace)}clearAll(){this._storage.clearAll()}getStats(){return this._storage.getStats()}resetStats(){this._storage.resetStats()}}class n{constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=[],this._users=new r["a"]}register(e){this._users.push(e)}deregister(e){this._users.removeUnordered(e)}registerRemoveFunc(e,t){this._removeFuncs.push([e,t])}deregisterRemoveFunc(e){this._removeFuncs=this._removeFuncs.filter(t=>t[0]!==e)}get size(){return this._size}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,0),this._checkSizeLimit()}put(e,t,i,r){const s=this._db.get(e);if(s&&(this._size-=s.size,this._db.delete(e),s.entry!==t&&this._notifyRemoved(e,s.entry)),i>this._maxSize)return void this._notifyRemoved(e,t);if(void 0===t)return void console.warn("Refusing to cache undefined entry ");if(!i||i<0)return void console.warn("Refusing to cache entry with invalid size "+i);const a=1+Math.max(r,-3)- -3;this._db.set(e,{entry:t,size:i,lifetime:a,lives:a}),this._size+=i,this._checkSizeLimit()}updateSize(e,t,i){const r=this._db.get(e);r&&r.entry===t&&(this._size-=r.size,i>this._maxSize?this._notifyRemoved(e,t):(r.size=i,this._size+=i,this._checkSizeLimit()))}pop(e){const t=this._db.get(e);if(t)return this._size-=t.size,this._db.delete(e),++this._hit,t.entry;++this._miss}get(e){const t=this._db.get(e);if(void 0!==t)return this._db.delete(e),t.lives=t.lifetime,this._db.set(e,t),++this._hit,t.entry;++this._miss}getStats(){const e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},t={},i=new Array;this._db.forEach((e,r)=>{const s=e.lifetime;i[s]=(i[s]||0)+e.size,this._users.forAll(i=>{const s=i.namespace;if(r.startsWith(s)){const i=t[s]||0;t[s]=i+e.size}})});const r={};this._users.forAll(e=>{const i=e.namespace;if(!isNaN(e.hitRate)&&e.hitRate>0){const s=t[i]||0;t[i]=s,r[i]=Math.round(100*e.hitRate)+"%"}else r[i]="0%"});const s=Object.keys(t);s.forEach(e=>t[e]=t[e]/this._size*100),s.sort((e,i)=>t[i]-t[e]),s.forEach(i=>e[i]=Math.round(t[i])+"% / "+r[i]);for(let a=i.length-1;a>=0;--a){const t=i[a];t&&(e["Priority "+(a+-3-1)]=Math.round(t/this.size*100)+"%")}return e}resetStats(){this._hit=this._miss=0,this._users.forAll(e=>e.resetHitRate())}clear(e){this._db.forEach((t,i)=>{i.startsWith(e)&&(this._size-=t.size,this._db.delete(i),this._notifyRemoved(i,t.entry))})}clearAll(){this._db.forEach((e,t)=>this._notifyRemoved(t,e.entry)),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemoved(e,t){this._removeFuncs.forEach(i=>{e.startsWith(i[0])&&i[1](t)})}_checkSizeLimit(){if(!(this._size<=this._maxSize))for(const[e,t]of this._db)if(this._db.delete(e),t.lives<=1?(this._size-=t.size,this._notifyRemoved(e,t.entry)):(--t.lives,this._db.set(e,t)),this._size<=.9*this.maxSize)return}}},d297:function(e,t,i){"use strict";i.d(t,"a",(function(){return _})),i.d(t,"b",(function(){return h})),i.d(t,"c",(function(){return b})),i.d(t,"d",(function(){return m})),i.d(t,"e",(function(){return y})),i.d(t,"f",(function(){return g})),i.d(t,"g",(function(){return f}));var r=i("6c97"),s=i("b2b2"),a=i("e92d"),n=i("9ef0"),o=i("8d60"),c=i("9b40"),l=i("86f2");const u=a["a"].getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),d=new o["a"],p=Math.PI,f=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function h(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.filter(e=>"color"===e.type)[0]:e;if(!r)return;if("esri.renderers.visualVariables.ColorVariable"!==r.declaredClass)return void u.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");const a="number"==typeof t,o=a?null:t,c=o&&o.attributes;let l=a?t:null;const d=r.field,{ipData:p,hasExpression:f}=r.cache;let h=r.cache.compiledFunc;if(!d&&!f){const e=r.stops;return e&&e[0]&&e[0].color}if("number"!=typeof l)if(f){if(!Object(s["h"])(i)||!Object(s["h"])(i.arcade))return void u.error("Use of arcade expressions requires an arcade context");const e={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},t=i.arcade.arcadeUtils,a=t.getViewInfo(e),n=t.createExecContext(o,a);if(!h){const e=t.createSyntaxTree(r.valueExpression);h=t.createFunction(e),r.cache.compiledFunc=h}l=t.executeFunction(h,n)}else c&&(l=c[d]);const b=r.normalizationField,m=c?parseFloat(c[b]):void 0;if(null!=l&&(!b||a||!isNaN(m)&&0!==m)){isNaN(m)||a||(l/=m);const e=w(l,p);if(e){const t=e[0],a=e[1],o=t===a?r.stops[t].color:n["a"].blendColors(r.stops[t].color,r.stops[a].color,e[2],Object(s["h"])(i)?i.color:void 0);return new n["a"](o)}}}function b(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.filter(e=>"opacity"===e.type)[0]:e;if(!r)return;if("esri.renderers.visualVariables.OpacityVariable"!==r.declaredClass)return void u.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");const a="number"==typeof t,n=a?null:t,o=n&&n.attributes;let c=a?t:null;const l=r.field,{ipData:d,hasExpression:p}=r.cache;let f=r.cache.compiledFunc;if(!l&&!p){const e=r.stops;return e&&e[0]&&e[0].opacity}if("number"!=typeof c)if(p){if(Object(s["g"])(i)||Object(s["g"])(i.arcade))return void u.error("Use of arcade expressions requires an arcade context");const e={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},t=i.arcade.arcadeUtils,a=t.getViewInfo(e),o=t.createExecContext(n,a);if(!f){const e=t.createSyntaxTree(r.valueExpression);f=t.createFunction(e),r.cache.compiledFunc=f}c=t.executeFunction(f,o)}else o&&(c=o[l]);const h=r.normalizationField,b=o?parseFloat(o[h]):void 0;if(null!=c&&(!h||a||!isNaN(b)&&0!==b)){isNaN(b)||a||(c/=b);const e=w(c,d);if(e){const t=e[0],i=e[1];if(t===i)return r.stops[t].opacity;{const s=r.stops[t].opacity;return s+(r.stops[i].opacity-s)*e[2]}}}}function m(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.filter(e=>"rotation"===e.type)[0]:e;if(!r)return;if("esri.renderers.visualVariables.RotationVariable"!==r.declaredClass)return void u.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");const a=r.axis||"heading",n="heading"===a&&"arithmetic"===r.rotationType?90:0,o="heading"===a&&"arithmetic"===r.rotationType?-1:1,c="number"==typeof t?null:t,l=c&&c.attributes,d=r.field,{hasExpression:p}=r.cache;let f=r.cache.compiledFunc,h=0;if(!d&&!p)return h;if(p){if(Object(s["g"])(i)||Object(s["g"])(i.arcade))return void u.error("Use of arcade expressions requires an arcade context");const e={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},t=i.arcade.arcadeUtils,a=t.getViewInfo(e),n=t.createExecContext(c,a);if(!f){const e=t.createSyntaxTree(r.valueExpression);f=t.createFunction(e),r.cache.compiledFunc=f}h=t.executeFunction(f,n)}else l&&(h=l[d]||0);return h="number"!=typeof h||isNaN(h)?null:n+o*h,h}function y(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.filter(e=>"size"===e.type)[0]:e;if(!r)return;if("esri.renderers.visualVariables.SizeVariable"!==r.declaredClass)return void u.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");const a=v(function(e,t,i){const r="number"==typeof t,a=r?null:t,n=a&&a.attributes;let o=r?t:null;const{isScaleDriven:c}=e.cache;let d=e.cache.compiledFunc;if(c){const t=Object(s["h"])(i)?i.scale:void 0,r=Object(s["h"])(i)?i.view:void 0;o=null==t||"3d"===r?function(e){let t=null,i=null;const r=e.stops;return r?(t=r[0].value,i=r[r.length-1].value):(t=e.minDataValue||0,i=e.maxDataValue||0),(t+i)/2}(e):t}else if(!r)switch(e.inputValueType){case"expression":{if(Object(s["g"])(i)||Object(s["g"])(i.arcade))return void u.error("Use of arcade expressions requires an arcade context");const t={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},r=i.arcade.arcadeUtils,n=r.getViewInfo(t),c=r.createExecContext(a,n);if(!d){const t=r.createSyntaxTree(e.valueExpression);d=r.createFunction(t),e.cache.compiledFunc=d}o=r.executeFunction(d,c);break}case"field":n&&(o=n[e.field]);break;case"unknown":o=null}if(!Object(l["d"])(o))return null;if(r||!e.normalizationField)return o;const p=n?parseFloat(n[e.normalizationField]):null;return Object(l["d"])(p)&&0!==p?o/p:null}(r,t,i),r,t,i,r.cache.ipData);return null==a||isNaN(a)?0:a}function O(e,t,i){return null==e?null:Object(l["c"])(e)?y(e,t,i):Object(l["d"])(e)?e:null}function j(e,t,i){return Object(l["d"])(i)&&e>i?i:Object(l["d"])(t)&&e<t?t:e}function v(e,t,i,r,a){switch(t.transformationType){case"additive":return function(e,t,i,r){return e+(O(t.minSize,i,r)||t.minDataValue)}(e,t,i,r);case"constant":return function(e,t,i){const r=e.stops;let s=r&&r.length&&r[0].size;return null==s&&(s=e.minSize),O(s,t,i)}(t,i,r);case"clamped-linear":return function(e,t,i,r){const a=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),n=O(t.minSize,i,r),o=O(t.maxSize,i,r),c=Object(s["h"])(r)?r.shape:void 0;if(e<=t.minDataValue)return n;if(e>=t.maxDataValue)return o;if("area"===t.scaleBy&&c){const e="circle"===c,t=e?p*Math.pow(n/2,2):n*n,i=t+a*((e?p*Math.pow(o/2,2):o*o)-t);return e?2*Math.sqrt(i/p):Math.sqrt(i)}return n+a*(o-n)}(e,t,i,r);case"proportional":return function(e,t,i,r){const a=Object(s["h"])(r)?r.shape:void 0,n=e/t.minDataValue,o=O(t.minSize,i,r),c=O(t.maxSize,i,r);let l=null;return l="circle"===a?2*Math.sqrt(n*Math.pow(o/2,2)):"square"===a||"diamond"===a||"image"===a?Math.sqrt(n*Math.pow(o,2)):n*o,j(l,o,c)}(e,t,i,r);case"stops":return function(e,t,i,r,s){const[a,n,o]=w(e,s);if(a===n)return O(t.stops[a].size,i,r);{const e=O(t.stops[a].size,i,r);return e+(O(t.stops[n].size,i,r)-e)*o}}(e,t,i,r,a);case"real-world-size":return function(e,t,i,r){const a=(Object(s["h"])(r)&&r.resolution?r.resolution:1)*c["a"][t.valueUnit],n=O(t.minSize,i,r),o=O(t.maxSize,i,r),{valueRepresentation:l}=t;let u=null;return u="area"===l?2*Math.sqrt(e/p)/a:"radius"===l||"distance"===l?2*e/a:e/a,j(u,n,o)}(e,t,i,r);case"identity":return e;case"unknown":return null}}function g(e,t,i){const{isScaleDriven:r}=e.cache;if(!(r&&"3d"===i||t))return null;const s={scale:t,view:i};let a=O(e.minSize,d,s),n=O(e.maxSize,d,s);if(null!=a||null!=n){if(a>n){const e=n;n=a,a=e}return{minSize:a,maxSize:n}}}function w(e,t){if(!t)return;let i=0,r=t.length-1;return t.some((t,s)=>e<t?(r=s,!0):(i=s,!1)),[i,r,(e-t[i])/(t[r]-t[i])]}function _(e,t,i){const s=["proportional","proportional","proportional"];for(const a of e){const e=a.useSymbolValue?"symbol-value":y(a,t,i);switch(a.axis){case"width":s[0]=e;break;case"depth":s[1]=e;break;case"height":s[2]=e;break;case"width-and-depth":s[0]=e,s[1]=e;break;case"all":case void 0:case null:s[0]=e,s[1]=e,s[2]=e;break;default:Object(r["a"])(a.axis)}}return s}}}]);
//# sourceMappingURL=chunk-ba2d03d2.0cae58fa.js.map