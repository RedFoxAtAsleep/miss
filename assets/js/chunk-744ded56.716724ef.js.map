{"version":3,"sources":["webpack:///./node_modules/@arcgis/core/layers/mixins/PortalLayer.js","webpack:///./node_modules/@arcgis/core/layers/support/commonProperties.js","webpack:///./node_modules/@arcgis/core/layers/mixins/ArcGISService.js","webpack:///./node_modules/@arcgis/core/layers/support/Tilemap.js","webpack:///./node_modules/@arcgis/core/layers/support/TilemapCache.js","webpack:///./node_modules/@arcgis/core/renderers/support/lengthUtils.js","webpack:///./node_modules/@arcgis/core/layers/support/serviceTileInfoProperty.js","webpack:///./node_modules/@arcgis/core/core/MemCache.js","webpack:///./node_modules/@arcgis/core/layers/mixins/ArcGISCachedService.js","webpack:///./node_modules/@arcgis/core/layers/mixins/operationalLayers.js","webpack:///./node_modules/@arcgis/core/layers/mixins/OperationalLayer.js","webpack:///./node_modules/@arcgis/core/core/LRUCache.js","webpack:///./node_modules/@arcgis/core/core/accessorSupport/MultiOriginStore.js","webpack:///./node_modules/@arcgis/core/core/ReadOnlyMultiOriginJSONSupport.js","webpack:///./node_modules/@arcgis/core/core/MultiOriginJSONSupport.js","webpack:///./node_modules/@arcgis/core/views/3d/support/WorkerHandle.js","webpack:///./node_modules/@arcgis/core/layers/support/LercDecoder.js","webpack:///./node_modules/@arcgis/core/layers/ElevationLayer.js","webpack:///./node_modules/@arcgis/core/symbols/support/FeatureExpressionInfo.js","webpack:///./node_modules/@arcgis/core/symbols/support/unitConversionUtils.js","webpack:///./node_modules/@arcgis/core/symbols/support/ElevationInfo.js"],"names":["n","getLogger","d","r","super","arguments","this","resourceReferences","portalItem","paths","t","destroy","_get","removeOrigin","_set","e","itemId","id","portal","load","instance","supportedTypes","validateItem","supportsData","warn","title","layer","read","o","getDefault","restUrl","messages","push","write","type","prototype","String","s","Boolean","value","json","origins","source","i","screenSizePerspective","originOf","store","set","ignoreOrigin","target","a","name","reader","disablePopup","enabled","l","p","isRequired","writer","c","service","f","readOnly","u","Number","default","y","opacity","origin","drawingInfo","transparency","layerDefinition","m","dependsOn","timeInfo","view","timeExtent","useViewTime","intersection","isEmpty","timeOffset","offset","unit","equals","url","declaredClass","location","left","top","width","height","_allAvailability","byteSize","_tileAvailabilityBitSet","length","Math","ceil","Uint8Array","request","row","col","h","query","then","data","catch","details","httpStatus","valid","response","definition","fromJSON","validateJSON","Object","freeze","_updateFromData","Array","isArray","level","tileServers","z","A","L","_handles","_pendingTilemapRequests","_availableLevels","levels","cacheByteSize","_prefetchingEnabled","_tilemapCache","add","watch","_initializeTilemapDefinition","_initializeAvailableLevels","error","_tmpTilemapDefinition","_tilemapFromCache","signal","fromDefinition","put","getAvailability","tileInfo","updateTileInfo","upsampleTile","fetchTilemap","fetchAvailability","fetchAvailabilityUpsample","_fetchAvailabilityUpsamplePrefetch","has","abort","remove","_prefetches","_maxPrefetch","removeUnordered","parsedUrl","clear","path","size","get","forEach","hasTilemap","initialSize","constructOnly","inches","feet","yards","miles","millimeters","centimeters","decimeters","meters","kilometers","radius","minScale","maxScale","minLOD","maxLOD","ignoreMinMaxLOD","lods","filter","round","scale","_namespace","_storage","_removeFunc","_hit","_miss","register","registerRemoveFunc","slice","maxSize","deregisterRemoveFunc","deregister","pop","updateSize","clearAll","getStats","resetStats","_maxSize","_db","Map","_size","_removeFuncs","_users","max","_checkSizeLimit","delete","entry","_notifyRemoved","console","lifetime","lives","Size","_getHitRate","Entries","toString","forAll","namespace","startsWith","isNaN","hitRate","keys","sort","resetHitRate","copyright","spatialReference","tilemapCache","version","capabilities","indexOf","ArcGISFeatureLayer","ArcGISImageServiceLayer","ArcGISMapServiceLayer","ArcGISSceneServiceLayer","ArcGISTiledElevationServiceLayer","ArcGISTiledImageServiceLayer","ArcGISTiledMapServiceLayer","BuildingSceneLayer","GroupLayer","IntegratedMeshLayer","PointCloudLayer","WebTiledLayer","CSV","VectorTileLayer","WMS","KML","RasterDataLayer","OpenStreetMap","RasterDataElevationLayer","ArcGISImageServiceVectorLayer","ArcGISStreamLayer","BingMapsAerial","BingMapsRoad","BingMapsHybrid","GeoRSS","WFS","SubtypeGroupLayer","layerContainerType","layerType","operationalLayerType","allowNull","_propertyOriginMap","_originStores","_values","metadatas","internalGet","originIdOf","propertyInvalidated","revert","propertyCommitted","setAtOrigin","toJSON","isDefaultToJSON","O","_methodName","_promise","scheduler","_thread","hasInitialize","broadcast","close","getTransferList","invoke","transferList","strategy","byteLength","buffer","options","ref","x","T","heightModelInfo","sourceJSON","_lercDecoder","constructed","currentVersion","addResolvingPromise","loadFromPortal","typeKeywords","toLowerCase","expectedType","_fetchImageService","responseType","noDataValue","returnFileInfo","_fetchTileAvailability","getTileUrl","decode","values","pixelData","maxZError","fileInfo","minValue","maxValue","supportsBlankTile","blankTile","ElevationQuery","createSampler","ssl","replace","I","expression","onTheGround","relativeToGround","relativeToScene","absoluteHeight","foot","kilometer","meter","mile","yard","featureExpression","_isOverridden","featureExpressionInfo","_override","mode","clone","apiValues","nonNullable","jsonValues"],"mappings":"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","file":"assets/js/chunk-744ded56.716724ef.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import r from\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as e}from\"../../core/accessorSupport/decorators/property.js\";import{reader as o}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import{writer as a}from\"../../core/accessorSupport/decorators/writer.js\";import i from\"../../core/Error.js\";import{hasSamePortal as p}from\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{throwIfAborted as l}from\"../../core/promiseUtils.js\";import m from\"../../portal/Portal.js\";import c from\"../../portal/PortalItem.js\";const n=r.getLogger(\"esri.layers.mixins.PortalLayer\"),d=r=>{let d=class extends r{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]}}destroy(){var t;null==(t=this.portalItem)||t.destroy(),this.portalItem=null}set portalItem(t){t!==this._get(\"portalItem\")&&(this.removeOrigin(\"portal-item\"),this._set(\"portalItem\",t))}readPortalItem(t,r,e){if(r.itemId)return new c({id:r.itemId,portal:e&&e.portal})}writePortalItem(t,r){t&&t.id&&(r.itemId=t.id)}async loadFromPortal(t,r){if(this.portalItem&&this.portalItem.id)try{const e=await import(\"../../portal/support/layersLoader.js\");return l(r),await e.load({instance:this,supportedTypes:t.supportedTypes,validateItem:t.validateItem,supportsData:t.supportsData},r)}catch(t){throw n.warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})\\n  ${t}`),t}}read(t,r){r&&(r.layer=this),super.read(t,r)}write(t,r){const e=r&&r.portal,o=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||m.getDefault());return e&&o&&!p(o.restUrl,e.restUrl)?(r.messages&&r.messages.push(new i(\"layer:cross-portal\",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save the scene, set the layer.portalItem to null or save the scene to the same portal as the item associated with the layer`,{layer:this})),null):super.write(t,{...r,layer:this})}};return t([e({type:c})],d.prototype,\"portalItem\",null),t([o(\"web-document\",\"portalItem\",[\"itemId\"])],d.prototype,\"readPortalItem\",null),t([a(\"web-document\",\"portalItem\",{itemId:{type:String}})],d.prototype,\"writePortalItem\",null),t([e()],d.prototype,\"resourceReferences\",void 0),d=t([s(\"esri.layers.mixins.PortalLayer\")],d),d};export{d as PortalLayer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{getProperties as e}from\"../../core/accessorSupport/utils.js\";import{w as i}from\"../../chunks/persistableUrlUtils.js\";import{willPropertyWrite as r}from\"../../core/accessorSupport/write.js\";import{transparencyToOpacity as n}from\"../../webdoc/support/opacityUtils.js\";import t from\"../../TimeExtent.js\";import o from\"../../symbols/support/ElevationInfo.js\";const s={type:Boolean,value:!0,json:{origins:{\"web-scene\":{read:{source:[\"id\",\"url\",\"layerType\"],reader(i,r){if(null!=r.screenSizePerspective||\"defaults\"!==this.originOf(\"screenSizePerspectiveEnabled\"))return r.screenSizePerspective;e(this).store.set(\"screenSizePerspectiveEnabled\",!1,0)}},write:{ignoreOrigin:!0,target:\"screenSizePerspective\",writer(e,i,n,t){(\"defaults\"===this.originOf(\"screenSizePerspectiveEnabled\")&&e||r(this,\"screenSizePerspectiveEnabled\",{},t))&&(i[n]=e)}}}}}},a={type:Boolean,value:!0,json:{name:\"disablePopup\",read:{reader:(e,i)=>!i.disablePopup},write:{enabled:!0,writer(e,i,r){i[r]=!e}}}},l={type:Boolean,value:!0,json:{name:\"showLabels\",write:!0}},p={type:String,json:{origins:{\"portal-item\":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:i}}},c={type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},name:\"showLegend\",write:!0}},d={value:null,type:o,json:{origins:{service:{name:\"elevationInfo\",write:!0}},name:\"layerDefinition.elevationInfo\",write:!0}};function f(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const u={type:Number,json:{origins:{\"web-document\":{default:1,write:!0,read:!0},\"portal-item\":{write:!0}}}},y={...u,json:{...u.json,origins:{\"web-document\":{...u.json.origins[\"web-document\"],write:{enabled:!0,target:{opacity:{type:Number},\"layerDefinition.drawingInfo.transparency\":{type:Number}}}}},read:{source:[\"layerDefinition.drawingInfo.transparency\",\"drawingInfo.transparency\"],reader:(e,i,r)=>r&&\"service\"!==r.origin||!i.drawingInfo||void 0===i.drawingInfo.transparency?i.layerDefinition&&i.layerDefinition.drawingInfo&&void 0!==i.layerDefinition.drawingInfo.transparency?n(i.layerDefinition.drawingInfo.transparency):void 0:n(i.drawingInfo.transparency)}}},m={type:t,dependsOn:[\"view.timeExtent\",\"layer.timeExtent\",\"layer.timeInfo\",\"layer.timeOffset\",\"layer.timeOffset.value\",\"layer.timeOffset.unit\",\"layer.useViewTime\"],readOnly:!0,get(){var e,i;if(null==(e=this.layer)||!e.timeInfo)return null;const r=null==(i=this.view)?void 0:i.timeExtent,n=this.layer.timeExtent,t=this.layer.useViewTime?r&&n?r.intersection(n):r||n:n;if(!t||t.isEmpty)return t;const o=this.layer.timeOffset,s=o?t.offset(-o.value,o.unit):t,a=this._get(\"timeExtent\");return s.equals(a)?a:s}};export{m as combinedViewLayerTimeExtentProperty,d as elevationInfo,l as labelsVisible,c as legendEnabled,u as opacity,y as opacityDrawingInfo,a as popupEnabled,f as readOnlyService,s as screenSizePerspectiveEnabled,p as url};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import{isSome as r}from\"../../core/maybe.js\";import e from\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as s}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{parse as i,sanitizeUrl as l}from\"../support/arcgisLayerUrl.js\";const p=p=>{let c=class extends p{get title(){if(this._get(\"title\")&&\"defaults\"!==this.originOf(\"title\"))return this._get(\"title\");if(this.url){const t=i(this.url);if(r(t)&&t.title)return t.title}return this._get(\"title\")||\"\"}set title(t){this._set(\"title\",t)}set url(t){this._set(\"url\",l(t,e.getLogger(this.declaredClass)))}};return t([s({dependsOn:[\"url\"]})],c.prototype,\"title\",null),t([s({type:String})],c.prototype,\"url\",null),c=t([o(\"esri.layers.mixins.ArcGISService\")],c),c};export{p as ArcGISService};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{clone as t}from\"../../core/lang.js\";import i from\"../../core/Error.js\";import{constant as e}from\"../../core/arrayUtils.js\";import a from\"../../request.js\";class l{constructor(){this.location={left:0,top:0,width:0,height:0},this._allAvailability=\"unknown\",this.byteSize=40}getAvailability(t,i){if(\"unknown\"!==this._allAvailability)return this._allAvailability;const e=(t-this.location.top)*this.location.width+(i-this.location.left),a=e%8,l=e>>3,o=this._tileAvailabilityBitSet;return l<0||l>o.length?\"unknown\":o[l]&1<<a?\"available\":\"unavailable\"}_updateFromData(t){const i=this.location.width,e=this.location.height;let a=!0,l=!0;const o=Math.ceil(i*e/8),n=new Uint8Array(o);let r=0;for(let i=0;i<t.length;i++){const e=i%8;t[i]?(l=!1,n[r]|=1<<e):a=!1,7===e&&++r}l?this._allAvailability=\"unavailable\":a?this._allAvailability=\"available\":(this._allAvailability=\"unknown\",this._tileAvailabilityBitSet=n,this.byteSize+=n.length)}static fromDefinition(t,o){const r=t.service.request||a,{row:s,col:h,width:c,height:m}=t,d={query:{f:\"json\"}};return o=o?{...d,...o}:d,r(n(t),o).then((t=>t.data)).catch((t=>{if(t&&t.details&&422===t.details.httpStatus)return{location:{top:s,left:h,width:c,height:m},valid:!0,data:e(c*m,0)};throw t})).then((t=>{if(t.location&&(t.location.top!==s||t.location.left!==h||t.location.width!==c||t.location.height!==m))throw new i(\"tilemap:location-mismatch\",\"Tilemap response for different location than requested\",{response:t,definition:{top:s,left:h,width:c,height:m}});return l.fromJSON(t)}))}static fromJSON(i){l.validateJSON(i);const e=new l;return e.location=Object.freeze(t(i.location)),e._updateFromData(i.data),Object.freeze(e)}static validateJSON(t){if(!t||!t.location)throw new i(\"tilemap:missing-location\",\"Location missing from tilemap response\");if(!1===t.valid)throw new i(\"tilemap:invalid\",\"Tilemap response was marked as invalid\");if(!t.data)throw new i(\"tilemap:missing-data\",\"Data missing from tilemap response\");if(!Array.isArray(t.data))throw new i(\"tilemap:data-mismatch\",\"Data must be an array of numbers\");if(t.data.length!==t.location.width*t.location.height)throw new i(\"tilemap:data-mismatch\",\"Number of data items does not match width/height of tilemap\")}}function o(t){return`${t.level}/${t.row}/${t.col}/${t.width}/${t.height}`}function n(t){let i;if(\"vector-tile\"===t.service.type)i=`${t.service.url}/tilemap/${t.level}/${t.row}/${t.col}/${t.width}/${t.height}`;else{const e=t.service.tileServers;i=`${e&&e.length?e[t.row%e.length]:t.service.url}/tilemap/${t.level}/${t.row}/${t.col}/${t.width}/${t.height}`}const e=t.service.query;return e&&(i=`${i}?${e}`),i}export default l;export{l as Tilemap,o as tilemapDefinitionId,n as tilemapDefinitionUrl};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import t from\"../../core/Logger.js\";import{property as i}from\"../../core/accessorSupport/decorators/property.js\";import{cast as l}from\"../../core/accessorSupport/decorators/cast.js\";import{subclass as r}from\"../../core/accessorSupport/decorators/subclass.js\";import s from\"../../core/Error.js\";import{objectToQuery as a}from\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import o from\"../../core/PooledArray.js\";import{reject as n,resolve as h,create as c,onAbort as p,createAbortError as m,isAbortError as u,createAbortController as f,isAborted as v}from\"../../core/promiseUtils.js\";import{waitTicks as y}from\"../../core/scheduling.js\";import d from\"../../core/Accessor.js\";import _ from\"../../request.js\";import b from\"../../core/Handles.js\";import{init as g}from\"../../core/watchUtils.js\";import w from\"../../core/LRUCache.js\";import{tilemapDefinitionId as T,Tilemap as j}from\"./Tilemap.js\";var z;const A=t.getLogger(\"esri.layers.support.TilemapCache\");let L=z=class extends d{constructor(e){super(e),this._handles=new b,this._pendingTilemapRequests={},this._availableLevels={},this.levels=5,this.cacheByteSize=2097152,this.request=_,this._prefetchingEnabled=!0}initialize(){this._tilemapCache=new w(this.cacheByteSize),this._handles.add([this.watch([\"layer.parsedUrl\",\"layer.tileServers?\"],(()=>this._initializeTilemapDefinition())),g(this,\"layer.tileInfo.lods\",(e=>this._initializeAvailableLevels(e)),!0)]),this._initializeTilemapDefinition()}destroy(){this._handles&&(this._handles.destroy(),this._handles=null)}castLevels(e){return e<=2?(A.error(\"Minimum levels for Tilemap is 3, but got \",e),3):e}get size(){return 1<<this.levels}fetchTilemap(e,t,i,l){if(!this._availableLevels[e])return n(new s(\"tilemap-cache:level-unavailable\",`Level ${e} is unavailable in the service`));const r=this._tmpTilemapDefinition,a=this._tilemapFromCache(e,t,i,r);if(a)return h(a);const o=l&&l.signal;return l={...l,signal:null},c(((e,t)=>{p(o,(()=>t(m())));const i=T(r);let s=this._pendingTilemapRequests[i];if(!s){s=j.fromDefinition(r,l).then((e=>(this._tilemapCache.put(i,e,e.byteSize),e)));const e=()=>delete this._pendingTilemapRequests[i];this._pendingTilemapRequests[i]=s,s.then(e,e)}s.then(e,t)}))}getAvailability(e,t,i){if(!this._availableLevels[e])return\"unavailable\";const l=this._tilemapFromCache(e,t,i,this._tmpTilemapDefinition);return l?l.getAvailability(t,i):\"unknown\"}getAvailabilityUpsample(e,t,i,l){l.level=e,l.row=t,l.col=i;const r=this.layer.tileInfo;for(r.updateTileInfo(l);;){const e=this.getAvailability(l.level,l.row,l.col);if(\"unavailable\"!==e)return e;if(!r.upsampleTile(l))return\"unavailable\"}}fetchAvailability(e,t,i,l){return this._availableLevels[e]?this.fetchTilemap(e,t,i,l).catch((e=>e)).then((l=>{if(l instanceof j){const r=l.getAvailability(t,i);return\"unavailable\"===r?n(new s(\"tile-map:tile-unavailable\",\"Tile is not available\",{level:e,row:t,col:i})):r}if(u(l))throw l;return\"unknown\"})):n(new s(\"tilemap-cache:level-unavailable\",`Level ${e} is unavailable in the service`))}fetchAvailabilityUpsample(e,t,i,l,r){l.level=e,l.row=t,l.col=i;const s=this.layer.tileInfo;s.updateTileInfo(l);const a=this.fetchAvailability(e,t,i,r).catch((e=>{if(u(e))throw e;if(s.upsampleTile(l))return this.fetchAvailabilityUpsample(l.level,l.row,l.col,l);throw e}));return this._fetchAvailabilityUpsamplePrefetch(l.id,e,t,i,r,a),a}async _fetchAvailabilityUpsamplePrefetch(e,t,i,l,r,s){if(!this._prefetchingEnabled)return;const a=`prefetch-${e}`;if(this._handles.has(a))return;const o=f();s.then((()=>o.abort()),(()=>o.abort()));let n=!1;const h={remove(){n||(n=!0,o.abort())}};if(this._handles.add(h,a),await y(10,o.signal).catch((()=>{})),n||(n=!0,this._handles.remove(a)),v(o))return;const c={id:e,level:t,row:i,col:l},p={...r,signal:o.signal},m=this.layer.tileInfo;for(let e=0;z._prefetches.length<z._maxPrefetch&&m.upsampleTile(c);++e){const e=this.fetchAvailability(c.level,c.row,c.col,p);z._prefetches.push(e);const t=()=>{z._prefetches.removeUnordered(e)};e.then(t,t)}}_initializeTilemapDefinition(){if(!this.layer.parsedUrl)return;const e=this.layer.parsedUrl,t=e.query;this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:e.path,query:t?a(t):null,tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}_tilemapFromCache(e,t,i,l){l.level=e,l.row=t-t%this.size,l.col=i-i%this.size;const r=T(l);return this._tilemapCache.get(r)}_initializeAvailableLevels(e){this._availableLevels={},e&&e.forEach((e=>this._availableLevels[e.level]=!0))}get test(){const e=this;return{get prefetchingEnabled(){return e._prefetchingEnabled},set prefetchingEnabled(t){e._prefetchingEnabled=t},hasTilemap:(t,i,l)=>!!e._tilemapFromCache(t,i,l,e._tmpTilemapDefinition)}}};L._maxPrefetch=4,L._prefetches=new o({initialSize:z._maxPrefetch}),e([i({constructOnly:!0,type:Number})],L.prototype,\"levels\",void 0),e([l(\"levels\")],L.prototype,\"castLevels\",null),e([i({readOnly:!0,dependsOn:[\"levels\"],type:Number})],L.prototype,\"size\",null),e([i({constructOnly:!0,type:Number})],L.prototype,\"cacheByteSize\",void 0),e([i({constructOnly:!0})],L.prototype,\"layer\",void 0),e([i({constructOnly:!0})],L.prototype,\"request\",void 0),L=z=e([r(\"esri.layers.support.TilemapCache\")],L);export{L as TilemapCache};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{earth as e}from\"../../geometry/support/Ellipsoid.js\";import{convertUnit as s,lengthToDegrees as t}from\"../../core/unitUtils.js\";const m={inches:s(1,\"meters\",\"inches\"),feet:s(1,\"meters\",\"feet\"),\"us-feet\":s(1,\"meters\",\"us-feet\"),yards:s(1,\"meters\",\"yards\"),miles:s(1,\"meters\",\"miles\"),\"nautical-miles\":s(1,\"meters\",\"nautical-miles\"),millimeters:s(1,\"meters\",\"millimeters\"),centimeters:s(1,\"meters\",\"centimeters\"),decimeters:s(1,\"meters\",\"decimeters\"),meters:s(1,\"meters\",\"meters\"),kilometers:s(1,\"meters\",\"kilometers\"),\"decimal-degrees\":1/t(1,\"meters\",e.radius)};export{m as meterIn};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport e from\"./TileInfo.js\";const r={type:e,json:{origins:{service:{read:{source:[\"tileInfo\",\"minScale\",\"maxScale\",\"minLOD\",\"maxLOD\"],reader:n}}}}};function n(r,n,l,o){if(!r)return null;const{minScale:i,maxScale:t,minLOD:m,maxLOD:s}=n;if(null!=m&&null!=s)return o&&o.ignoreMinMaxLOD?e.fromJSON(r):e.fromJSON({...r,lods:r.lods.filter((({level:e})=>null!=e&&e>=m&&e<=s))});if(0!==i&&0!==t){const n=e=>Math.round(1e4*e)/1e4,l=i?n(i):1/0,o=t?n(t):-1/0;return e.fromJSON({...r,lods:r.lods.filter((e=>{const r=n(e.scale);return r<=l&&r>=o}))})}return e.fromJSON(r)}export{n as readServiceTileInfo,r as serviceTileInfoProperty};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport t from\"./PooledArray.js\";const e=-3;class s{constructor(t,e,s){this._namespace=t,this._storage=e,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=\":\",s&&(this._storage.registerRemoveFunc(this._namespace,s),this._removeFunc=!0)}get namespace(){return this._namespace.slice(0,-1)}get hitRate(){return this._hit/(this._hit+this._miss)}get size(){return this._storage.size}get maxSize(){return this._storage.maxSize}resetHitRate(){this._hit=this._miss=0}destroy(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this)}put(t,e,s,i=0){this._storage.put(this._namespace+t,e,s,i)}get(t){const e=this._storage.get(this._namespace+t);return void 0===e?++this._miss:++this._hit,e}pop(t){const e=this._storage.pop(this._namespace+t);return void 0===e?++this._miss:++this._hit,e}updateSize(t,e,s){this._storage.updateSize(this._namespace+t,e,s)}clear(){this._storage.clear(this._namespace)}clearAll(){this._storage.clearAll()}getStats(){return this._storage.getStats()}resetStats(){this._storage.resetStats()}}class i{constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=[],this._users=new t}register(t){this._users.push(t)}deregister(t){this._users.removeUnordered(t)}registerRemoveFunc(t,e){this._removeFuncs.push([t,e])}deregisterRemoveFunc(t){this._removeFuncs=this._removeFuncs.filter((e=>e[0]!==t))}get size(){return this._size}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,0),this._checkSizeLimit()}put(t,e,s,i){const h=this._db.get(t);if(h&&(this._size-=h.size,this._db.delete(t),h.entry!==e&&this._notifyRemoved(t,h.entry)),s>this._maxSize)return void this._notifyRemoved(t,e);if(void 0===e)return void console.warn(\"Refusing to cache undefined entry \");if(!s||s<0)return void console.warn(\"Refusing to cache entry with invalid size \"+s);const r=1+Math.max(i,-3)- -3;this._db.set(t,{entry:e,size:s,lifetime:r,lives:r}),this._size+=s,this._checkSizeLimit()}updateSize(t,e,s){const i=this._db.get(t);i&&i.entry===e&&(this._size-=i.size,s>this._maxSize?this._notifyRemoved(t,e):(i.size=s,this._size+=s,this._checkSizeLimit()))}pop(t){const e=this._db.get(t);if(e)return this._size-=e.size,this._db.delete(t),++this._hit,e.entry;++this._miss}get(t){const e=this._db.get(t);if(void 0!==e)return this._db.delete(t),e.lives=e.lifetime,this._db.set(t,e),++this._hit,e.entry;++this._miss}getStats(){const t={Size:Math.round(this._size/1048576)+\"/\"+Math.round(this._maxSize/1048576)+\"MB\",\"Hit rate\":Math.round(100*this._getHitRate())+\"%\",Entries:this._db.size.toString()},e={},s=new Array;this._db.forEach(((t,i)=>{const h=t.lifetime;s[h]=(s[h]||0)+t.size,this._users.forAll((s=>{const h=s.namespace;if(i.startsWith(h)){const s=e[h]||0;e[h]=s+t.size}}))}));const i={};this._users.forAll((t=>{const s=t.namespace;if(!isNaN(t.hitRate)&&t.hitRate>0){const h=e[s]||0;e[s]=h,i[s]=Math.round(100*t.hitRate)+\"%\"}else i[s]=\"0%\"}));const h=Object.keys(e);h.forEach((t=>e[t]=e[t]/this._size*100)),h.sort(((t,s)=>e[s]-e[t])),h.forEach((s=>t[s]=Math.round(e[s])+\"% / \"+i[s]));for(let e=s.length-1;e>=0;--e){const i=s[e];i&&(t[\"Priority \"+(e+-3-1)]=Math.round(i/this.size*100)+\"%\")}return t}resetStats(){this._hit=this._miss=0,this._users.forAll((t=>t.resetHitRate()))}clear(t){this._db.forEach(((e,s)=>{s.startsWith(t)&&(this._size-=e.size,this._db.delete(s),this._notifyRemoved(s,e.entry))}))}clearAll(){this._db.forEach(((t,e)=>this._notifyRemoved(e,t.entry))),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemoved(t,e){this._removeFuncs.forEach((s=>{t.startsWith(s[0])&&s[1](e)}))}_checkSizeLimit(){if(!(this._size<=this._maxSize))for(const[t,e]of this._db)if(this._db.delete(t),e.lives<=1?(this._size-=e.size,this._notifyRemoved(t,e.entry)):(--e.lives,this._db.set(t,e)),this._size<=.9*this.maxSize)return}}export{e as MIN_PRIORITY,s as MemCache,i as MemCacheStorage};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import{reader as o}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as t}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import i from\"../../geometry/SpatialReference.js\";import\"../../geometry.js\";import{serviceTileInfoProperty as p}from\"../support/serviceTileInfoProperty.js\";import{TilemapCache as s}from\"../support/TilemapCache.js\";const a=a=>{let l=class extends a{constructor(){super(...arguments),this.copyright=null,this.minScale=0,this.maxScale=0,this.spatialReference=null,this.tileInfo=null,this.tilemapCache=null}readMinScale(e,r){return null!=r.minLOD&&null!=r.maxLOD?e:0}readMaxScale(e,r){return null!=r.minLOD&&null!=r.maxLOD?e:0}get supportsBlankTile(){return this.version>=10.2}readTilemapCache(e,r){return r.capabilities&&r.capabilities.indexOf(\"Tilemap\")>-1?new s({layer:this}):null}};return e([r({json:{read:{source:\"copyrightText\"}}})],l.prototype,\"copyright\",void 0),e([r()],l.prototype,\"minScale\",void 0),e([o(\"service\",\"minScale\")],l.prototype,\"readMinScale\",null),e([r()],l.prototype,\"maxScale\",void 0),e([o(\"service\",\"maxScale\")],l.prototype,\"readMaxScale\",null),e([r({type:i})],l.prototype,\"spatialReference\",void 0),e([r({readOnly:!0,dependsOn:[\"version\"]})],l.prototype,\"supportsBlankTile\",null),e([r(p)],l.prototype,\"tileInfo\",void 0),e([r()],l.prototype,\"tilemapCache\",void 0),e([o(\"service\",\"tilemapCache\",[\"capabilities\"])],l.prototype,\"readTilemapCache\",null),e([r()],l.prototype,\"version\",void 0),l=e([t(\"esri.layers.mixins.ArcGISCachedService\")],l),l};export{a as ArcGISCachedService};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nconst e={\"web-scene/operational-layers\":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,GroupLayer:!0,IntegratedMeshLayer:!0,PointCloudLayer:!0,WebTiledLayer:!0,CSV:!0,VectorTileLayer:!0,WMS:!0,KML:!0,RasterDataLayer:!0},\"web-scene/basemap\":{ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,ArcGISImageServiceLayer:!0,WMS:!0,ArcGISMapServiceLayer:!0},\"web-scene/ground\":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},\"web-map/operational-layers\":{ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,ArcGISFeatureLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0,CSV:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,VectorTileLayer:!0,WFS:!0,SubtypeGroupLayer:!0,WMS:!0,WebTiledLayer:!0},\"web-map/basemap\":{ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0},\"web-map/tables\":{ArcGISFeatureLayer:!0},\"portal-item/operational-layers\":{ArcGISSceneServiceLayer:!0,PointCloudLayer:!0,BuildingSceneLayer:!0,IntegratedMeshLayer:!0}};export{e as supportedTypes};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as t}from\"../../core/accessorSupport/decorators/subclass.js\";import{writer as i}from\"../../core/accessorSupport/decorators/writer.js\";import o from\"../../core/Error.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{readLoadable as s}from\"../../core/accessorSupport/read.js\";import{willPropertyWrite as p}from\"../../core/accessorSupport/write.js\";import{supportedTypes as a}from\"./operationalLayers.js\";import{opacity as n}from\"../support/commonProperties.js\";const l=l=>{let y=class extends l{constructor(){super(...arguments),this.title=null}writeListMode(e,r,t,i){(i&&\"ground\"===i.layerContainerType||e&&p(this,t,{},i))&&(r[t]=e)}writeOperationalLayerType(e,r,t,i){!e||i&&\"tables\"===i.layerContainerType||(r.layerType=e)}writeTitle(e,r){r.title=e||\"Layer\"}read(e,r){r&&(r.layer=this),s(this,e,(r=>super.read(e,r)),r)}write(e,r){if(r&&r.origin){const e=`${r.origin}/${r.layerContainerType||\"operational-layers\"}`,t=a[e];let i=t&&t[this.operationalLayerType];if(\"ArcGISTiledElevationServiceLayer\"===this.operationalLayerType&&\"web-scene/operational-layers\"===e&&(i=!1),!i)return r.messages&&r.messages.push(new o(\"layer:unsupported\",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${e}'`,{layer:this})),null}const t=super.write(e,{...r,layer:this}),i=!!r&&!!r.messages&&!!r.messages.filter((e=>e instanceof o&&\"web-document-write:property-required\"===e.name)).length;return!this.url&&i?null:t}beforeSave(){}};return e([r({type:String,json:{write:{ignoreOrigin:!0},origins:{\"web-scene\":{write:{isRequired:!0,ignoreOrigin:!0}},\"portal-item\":{write:!1}}}})],y.prototype,\"id\",void 0),e([r({json:{write:{ignoreOrigin:!0},origins:{\"web-map\":{read:!1,write:!1}}}})],y.prototype,\"listMode\",void 0),e([i(\"listMode\")],y.prototype,\"writeListMode\",null),e([r({type:String,readOnly:!0,json:{read:!1,write:{target:\"layerType\",ignoreOrigin:!0},origins:{\"portal-item\":{write:!1}}}})],y.prototype,\"operationalLayerType\",void 0),e([i(\"operationalLayerType\")],y.prototype,\"writeOperationalLayerType\",null),e([r(n)],y.prototype,\"opacity\",void 0),e([r({type:String,json:{write:{ignoreOrigin:!0,allowNull:!0},origins:{\"web-scene\":{write:{isRequired:!0,ignoreOrigin:!0,allowNull:!0}},\"portal-item\":{write:!1}}},value:\"Layer\"})],y.prototype,\"title\",void 0),e([i(\"title\")],y.prototype,\"writeTitle\",null),e([r({type:Boolean,json:{name:\"visibility\",origins:{\"web-document\":{name:\"visibility\",default:!0},\"portal-item\":{name:\"visibility\",read:{source:[\"visible\",\"visibility\"]}}}}})],y.prototype,\"visible\",void 0),y=e([t(\"esri.layers.mixins.OperationalLayer\")],y),y};function y(e){return\"operationalLayerType\"in e}export{l as OperationalLayer,y as isOperationalLayer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{MemCacheStorage as t}from\"./MemCache.js\";export default class{constructor(e,r){this._storage=new t,this._storage.maxSize=e,r&&this._storage.registerRemoveFunc(\"\",r)}put(t,e,r){this._storage.put(t,e,r,1)}pop(t){return this._storage.pop(t)}get(t){return this._storage.get(t)}clear(){this._storage.clearAll()}destroy(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(t){this._storage.maxSize=t}}\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{clone as t}from\"../lang.js\";import{assumeNonNull as s}from\"../maybe.js\";import{OriginIdNum as e}from\"./PropertyOrigin.js\";class r{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(e),this._values=new Map}clone(s){const i=new r,o=this._originStores[0];o&&o.forEach(((s,e)=>{i.set(e,t(s),0)}));for(let r=2;r<e;r++){const e=this._originStores[r];e&&e.forEach(((e,o)=>{s&&s.has(o)||i.set(o,t(e),r)}))}return i}get(t,s){const e=void 0===s?this._values:this._originStores[s];return e?e.get(t):void 0}keys(t){const s=null==t?this._values:this._originStores[t];return s?[...s.keys()]:[]}set(t,e,r=6){let i=this._originStores[r];if(i||(i=new Map,this._originStores[r]=i),i.set(t,e),!this._values.has(t)||s(this._propertyOriginMap.get(t))<=r){const s=this._values.get(t);return this._values.set(t,e),this._propertyOriginMap.set(t,r),s!==e}return!1}delete(t,s=6){const e=this._originStores[s];if(!e)return;const r=e.get(t);if(e.delete(t),this._values.has(t)&&this._propertyOriginMap.get(t)===s){this._values.delete(t);for(let e=s-1;e>=0;e--){const s=this._originStores[e];if(s&&s.has(t)){this._values.set(t,s.get(t)),this._propertyOriginMap.set(t,e);break}}}return r}has(t,s){const e=void 0===s?this._values:this._originStores[s];return!!e&&e.has(t)}revert(t,s){for(;s>0&&!this.has(t,s);)--s;const e=this._originStores[s],r=e&&e.get(t),i=this._values.get(t);return this._values.set(t,r),this._propertyOriginMap.set(t,s),i!==r}originOf(t){return this._propertyOriginMap.get(t)||0}forEach(t){this._values.forEach(t)}}export default r;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../chunks/tslib.es6.js\";import{assumeNonNull as t}from\"./maybe.js\";import{getProperties as e}from\"./accessorSupport/utils.js\";import{subclass as s}from\"./accessorSupport/decorators/subclass.js\";import{idToName as o,nameToId as i}from\"./accessorSupport/PropertyOrigin.js\";import n from\"./Accessor.js\";import{read as c}from\"./accessorSupport/read.js\";import p from\"./accessorSupport/MultiOriginStore.js\";const a=n=>{let a=class extends n{constructor(...r){super(...r);const s=t(e(this)),o=s.metadatas,i=s.store,n=new p;s.store=n,i.keys().forEach((r=>{n.set(r,i.get(r),0)})),Object.keys(o).forEach((r=>{s.internalGet(r)&&n.set(r,s.internalGet(r),0)}))}read(r,t){c(this,r,t)}getAtOrigin(r,t){const e=u(this),s=i(t);if(\"string\"==typeof r)return e.get(r,s);const o={};return r.forEach((r=>{o[r]=e.get(r,s)})),o}originOf(r){return o(this.originIdOf(r))}originIdOf(r){return u(this).originOf(r)}revert(r,t){const s=u(this),o=i(t),n=e(this);let c;c=\"string\"==typeof r?\"*\"===r?s.keys(o):[r]:r,c.forEach((r=>{n.propertyInvalidated(r),s.revert(r,o),n.propertyCommitted(r)}))}};return a=r([s(\"esri.core.ReadOnlyMultiOriginJSONSupport\")],a),a};function u(r){return e(r).store}let f=class extends(a(n)){};f=r([s(\"esri.core.ReadOnlyMultiOriginJSONSupport\")],f);export{a as ReadOnlyMultiOriginJSONMixin,f as ReadOnlyMultiOriginJSONSupport};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../chunks/tslib.es6.js\";import{getProperties as t}from\"./accessorSupport/utils.js\";import{subclass as s}from\"./accessorSupport/decorators/subclass.js\";import{nameToId as e,OriginIdNum as o}from\"./accessorSupport/PropertyOrigin.js\";import i from\"./Accessor.js\";import{write as c}from\"./accessorSupport/write.js\";import{ReadOnlyMultiOriginJSONMixin as n}from\"./ReadOnlyMultiOriginJSONSupport.js\";const p=i=>{let n=class extends i{constructor(...r){super(...r)}clear(r,t=\"user\"){return u(this).delete(r,e(t))}write(r={},t){return c(this,r=r||{},t),r}setAtOrigin(r,s,o){t(this).setAtOrigin(r,s,e(o))}removeOrigin(r){const t=u(this),s=e(r),o=t.keys(s);for(const r of o)t.originOf(r)===s&&t.set(r,t.get(r,s),6)}updateOrigin(r,t){const s=u(this),i=e(t),c=this.get(r);for(let t=i+1;t<o;++t)s.delete(r,t);s.set(r,c,i)}toJSON(r){return this.write({},r)}};return n=r([s(\"esri.core.WriteableMultiOriginJSONSupport\")],n),n.prototype.toJSON.isDefaultToJSON=!0,n};function u(r){return t(r).store}const l=t=>{let e=class extends(p(n(t))){constructor(...r){super(...r)}};return e=r([s(\"esri.core.MultiOriginJSONSupport\")],e),e};let O=class extends(l(i)){};O=r([s(\"esri.core.MultiOriginJSONSupport\")],O);export{l as MultiOriginJSONMixin,O as MultiOriginJSONSupport};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport t from\"../../../core/Logger.js\";import{throwIfAborted as r,reject as e,all as s}from\"../../../core/promiseUtils.js\";import{open as i}from\"../../../core/workers/workers.js\";const o=t.getLogger(\"esri.views.3d.support.WorkerHandle\");class h{constructor(t,r,e,s={}){this._methodName=r,this._promise=i(t,{...s,scheduler:e}).then((t=>{void 0===this._thread?(this._thread=t,this._promise=null,s.hasInitialize&&this.broadcast({},\"initialize\")):t.close()})),this._promise.catch((r=>o.error(`Failed to initialize ${t} worker: ${r}`)))}destroy(){this._thread&&(this._thread.close(),this._thread=null),this._promise=null}invoke(t,s){if(this._thread){const r=this.getTransferList(t);return this._thread.invoke(this._methodName,t,{transferList:r,signal:s})}return this._promise?this._promise.then((()=>(r(s),this.invoke(t,s)))):e(null)}broadcast(t,r){return this._thread?s(this._thread.broadcast(r,t)).then((()=>{})):this._promise?this._promise.then((()=>this.broadcast(t,r))):e()}get promise(){return this._promise}}export{h as WorkerHandle};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{resolve as e}from\"../../core/promiseUtils.js\";import{WorkerHandle as r}from\"../../views/3d/support/WorkerHandle.js\";class t extends r{constructor(e){super(\"LercWorker\",\"_decode\",e,{strategy:\"dedicated\"}),this.scheduler=e}decode(r,t,n){return r&&0!==r.byteLength?this.invoke({buffer:r,options:t},n):e(null)}getTransferList(e){return[e.buffer]}}const n=new Map;function s(e){let r=n.get(e);return r||(r={instance:new t(e),ref:0},n.set(e,r)),++r.ref,r.instance}function o(e){if(null==e)return;const r=e.scheduler,t=n.get(r);t&&--t.ref<=0&&(t.instance.destroy(),n.delete(r))}export{s as acquireDecoder,o as releaseDecoder};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import{isSome as r}from\"../core/maybe.js\";import t from\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as o}from\"../core/accessorSupport/decorators/property.js\";import{reader as i}from\"../core/accessorSupport/decorators/reader.js\";import{subclass as s}from\"../core/accessorSupport/decorators/subclass.js\";import a from\"../core/Error.js\";import{objectToQuery as l}from\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{resolve as n,createAbortController as p,throwIfAborted as c}from\"../core/promiseUtils.js\";import m from\"../request.js\";import u from\"./Layer.js\";import{MultiOriginJSONMixin as d}from\"../core/MultiOriginJSONSupport.js\";import h from\"../geometry/HeightModelInfo.js\";import{url as y}from\"./support/commonProperties.js\";import{OperationalLayer as v}from\"./mixins/OperationalLayer.js\";import{ArcGISService as g}from\"./mixins/ArcGISService.js\";import{PortalLayer as f}from\"./mixins/PortalLayer.js\";import{ArcGISCachedService as S}from\"./mixins/ArcGISCachedService.js\";import{acquireDecoder as j,releaseDecoder as w}from\"./support/LercDecoder.js\";const x=t.getLogger(\"esri.layers.ElevationLayer\");let T=class extends(S(g(v(f(d(u)))))){constructor(...e){super(...e),this.copyright=null,this.heightModelInfo=null,this.path=null,this.opacity=1,this.operationalLayerType=\"ArcGISTiledElevationServiceLayer\",this.sourceJSON=null,this.type=\"elevation\",this.url=null,this.version=null,this._lercDecoder=j()}normalizeCtorArgs(e,r){return\"string\"==typeof e?{url:e,...r}:e}destroy(){w(this._lercDecoder),this._lercDecoder=null}set minScale(e){this.constructed&&x.warn(`${this.declaredClass}.minScale support has been removed (since 4.5)`)}get minScale(){}set maxScale(e){this.constructed&&x.warn(`${this.declaredClass}.maxScale support has been removed (since 4.5)`)}get maxScale(){}readVersion(e,r){let t=r.currentVersion;return t||(t=9.3),t}load(e){const t=r(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:[\"Image Service\"],supportsData:!1,validateItem:e=>{for(let r=0;r<e.typeKeywords.length;r++)if(\"elevation 3d layer\"===e.typeKeywords[r].toLowerCase())return!0;throw new a(\"portal:invalid-layer-item-type\",\"Invalid layer item type '${type}', expected '${expectedType}' \",{type:\"Image Service\",expectedType:\"Image Service Elevation 3D Layer\"})}},e).then((()=>this._fetchImageService(t)),(()=>this._fetchImageService(t)))),n(this)}fetchTile(e,t,o,i){const s=r((i=i||{signal:null}).signal)?i.signal:i.signal=p().signal,a={responseType:\"array-buffer\",signal:s},l={noDataValue:i.noDataValue,returnFileInfo:!0};return this.load().then((()=>this._fetchTileAvailability(e,t,o,i))).then((()=>m(this.getTileUrl(e,t,o),a))).then((e=>this._lercDecoder.decode(e.data,l,s))).then((e=>({values:e.pixelData,width:e.width,height:e.height,maxZError:e.fileInfo.maxZError,noDataValue:e.noDataValue,minValue:e.minValue,maxValue:e.maxValue})))}getTileUrl(e,r,t){const o=!this.tilemapCache&&this.supportsBlankTile,i=l({...this.parsedUrl.query,blankTile:!o&&null});return`${this.parsedUrl.path}/tile/${e}/${r}/${t}${i?\"?\"+i:\"\"}`}async queryElevation(e,r){const{ElevationQuery:t}=await import(\"./support/ElevationQuery.js\");c(r);return(new t).query(this,e,r)}async createElevationSampler(e,r){const{ElevationQuery:t}=await import(\"./support/ElevationQuery.js\");c(r);return(new t).createSampler(this,e,r)}_fetchTileAvailability(e,r,t,o){return this.tilemapCache?this.tilemapCache.fetchAvailability(e,r,t,o):n(\"unknown\")}async _fetchImageService(e){if(this.sourceJSON)return this.sourceJSON;const r={query:{f:\"json\",...this.parsedUrl.query},responseType:\"json\",signal:e},t=await m(this.parsedUrl.path,r);t.ssl&&(this.url=this.url.replace(/^http:/i,\"https:\")),this.sourceJSON=t.data,this.read(t.data,{origin:\"service\",url:this.parsedUrl})}};e([o({json:{read:{source:\"copyrightText\"}}})],T.prototype,\"copyright\",void 0),e([o({readOnly:!0,type:h})],T.prototype,\"heightModelInfo\",void 0),e([o({type:String,json:{origins:{\"web-scene\":{read:!0,write:!0}},read:!1}})],T.prototype,\"path\",void 0),e([o({type:[\"show\",\"hide\"]})],T.prototype,\"listMode\",void 0),e([o({json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},\"portal-item\":{read:!1,write:!1},\"web-document\":{read:!1,write:!1}}}})],T.prototype,\"minScale\",null),e([o({json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},\"portal-item\":{read:!1,write:!1},\"web-document\":{read:!1,write:!1}}}})],T.prototype,\"maxScale\",null),e([o({json:{read:!1,write:!1,origins:{\"web-document\":{read:!1,write:!1}}}})],T.prototype,\"opacity\",void 0),e([o({type:[\"ArcGISTiledElevationServiceLayer\"]})],T.prototype,\"operationalLayerType\",void 0),e([o()],T.prototype,\"sourceJSON\",void 0),e([o({json:{read:!1},value:\"elevation\",readOnly:!0})],T.prototype,\"type\",void 0),e([o(y)],T.prototype,\"url\",void 0),e([o()],T.prototype,\"version\",void 0),e([i(\"version\",[\"currentVersion\"])],T.prototype,\"readVersion\",null),T=e([s(\"esri.layers.ElevationLayer\")],T);var I=T;export default I;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as e}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{JSONSupport as s}from\"../../core/JSONSupport.js\";import{collectArcadeFieldNames as t}from\"../../layers/support/fieldUtils.js\";var p;let i=p=class extends s{async collectRequiredFields(r,o){return t(r,o,this.expression)}clone(){return new p({expression:this.expression,title:this.title})}};r([o({type:String,json:{write:!0}})],i.prototype,\"expression\",void 0),r([o({type:String,json:{write:!0}})],i.prototype,\"title\",void 0),i=p=r([e(\"esri.layers.support.FeatureExpressionInfo\")],i);var c=i;export default c;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{meterIn as t}from\"../../renderers/support/lengthUtils.js\";function n(n){return null!=t[n]}function r(n){return 1/(t[n]||1)}const e=function(){const n=Object.keys(t);return n.sort(),n}();export{r as getMetersPerUnit,e as supportedUnits,n as supportsUnit};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import{isSome as r}from\"../../core/maybe.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import{strict as t,JSONMap as s}from\"../../core/jsonMap.js\";import{reader as i}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as n}from\"../../core/accessorSupport/decorators/subclass.js\";import{writer as p}from\"../../core/accessorSupport/decorators/writer.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{JSONSupport as u}from\"../../core/JSONSupport.js\";import a from\"./FeatureExpressionInfo.js\";import{supportedUnits as f}from\"./unitConversionUtils.js\";var l;const m=t()({onTheGround:\"on-the-ground\",relativeToGround:\"relative-to-ground\",relativeToScene:\"relative-to-scene\",absoluteHeight:\"absolute-height\"}),d=new s({foot:\"feet\",kilometer:\"kilometers\",meter:\"meters\",mile:\"miles\",\"us-foot\":\"us-feet\",yard:\"yards\"});let c=l=class extends u{constructor(){super(...arguments),this.offset=null}readFeatureExpressionInfo(e,r){return null!=e?e:r.featureExpression&&0===r.featureExpression.value?{expression:\"0\"}:void 0}writeFeatureExpressionInfo(e,r,o,t){r[o]=e.write(null,t),\"0\"===e.expression&&(r.featureExpression={value:0})}get mode(){return this._isOverridden(\"mode\")?this._get(\"mode\"):r(this.offset)||this.featureExpressionInfo?\"relative-to-ground\":\"on-the-ground\"}set mode(e){this._override(\"mode\",e)}set unit(e){this._set(\"unit\",e)}write(e,r){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,r):null}clone(){return new l({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}};e([o({type:a,json:{write:!0}})],c.prototype,\"featureExpressionInfo\",void 0),e([i(\"featureExpressionInfo\",[\"featureExpressionInfo\",\"featureExpression\"])],c.prototype,\"readFeatureExpressionInfo\",null),e([p(\"featureExpressionInfo\",{featureExpressionInfo:{type:a},\"featureExpression.value\":{type:[0]}})],c.prototype,\"writeFeatureExpressionInfo\",null),e([o({type:m.apiValues,dependsOn:[\"offset\",\"featureExpressionInfo\"],nonNullable:!0,json:{type:m.jsonValues,read:m.read,write:{writer:m.write,isRequired:!0}}})],c.prototype,\"mode\",null),e([o({type:Number,json:{write:!0}})],c.prototype,\"offset\",void 0),e([o({type:f,json:{type:String,read:d.read,write:d.write}})],c.prototype,\"unit\",null),c=l=e([n(\"esri.layers.support.ElevationInfo\")],c);var x=c;export default x;\n"],"sourceRoot":""}