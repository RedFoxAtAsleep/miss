(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-395b120b"],{"2b92":function(e,t,a){"use strict";var i,r=a("a4ee"),s=(a("c120"),a("e92d"),a("cea0"),a("59b2")),n=a("d386"),l=(a("e041"),a("8eed"),a("f402"),a("6a0e")),o=a("d4ca");let c=i=class extends l["a"]{constructor(e){super(e),this.value=0,this.unit="milliseconds"}toMilliseconds(){return this.value*o["b"][this.unit]}clone(){return new i({value:this.value,unit:this.unit})}};Object(r["a"])([Object(s["b"])({type:Number,json:{write:!0},nonNullable:!0})],c.prototype,"value",void 0),Object(r["a"])([Object(s["b"])({type:o["d"].apiValues,json:{type:o["d"].jsonValues,read:o["d"].read,write:o["d"].write},nonNullable:!0})],c.prototype,"unit",void 0),c=i=Object(r["a"])([Object(n["a"])("esri.TimeInterval")],c);var b=c;t["a"]=b},"49a0":function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var i=a("8048");function r(e,t){const a=t||e.extent,r=e.width,s=Object(i["c"])(a&&a.spatialReference);return a&&r?a.width/r*s*i["g"]*96:0}},"53f8":function(e,t,a){"use strict";a.r(t);var i=a("a4ee"),r=(a("c120"),a("b2b2")),s=(a("e92d"),a("cea0")),n=a("59b2"),l=a("afcf"),o=a("d386"),c=a("09db"),b=a("ce50"),u=(a("e041"),a("8eed"),a("92ef")),y=(a("f402"),a("f4cc")),p=a("3af1"),d=a("2eab"),m=a("1853"),h=a("a6a3"),O=a("658b"),j=a("e694"),v=a("22f4"),f=a("b911"),g=a("3d59"),w=a("997b"),S=a("8b28"),x=a("0db5"),I=a("8e17"),T=a("5a62"),D=a("601a"),E=a("9096"),F=a("49a0"),L=a("303f"),N=a("e9d0"),J=a("2258"),R=a("d409"),U=a("70ce");let _=class extends(Object(w["a"])(Object(D["a"])(Object(T["a"])(Object(I["a"])(Object(R["a"])(Object(L["a"])(Object(g["a"])(Object(f["a"])(Object(x["a"])(Object(j["a"])(Object(S["a"])(Object(E["b"])(h["a"]))))))))))))){constructor(...e){super(...e),this.alwaysRefetch=!1,this.dpi=96,this.gdbVersion=null,this.imageFormat="png24",this.imageMaxHeight=2048,this.imageMaxWidth=2048,this.imageTransparency=!0,this.labelsVisible=!1,this.isReference=null,this.operationalLayerType="ArcGISMapServiceLayer",this.sourceJSON=null,this.sublayers=null,this.type="map-image",this.url=null}normalizeCtorArgs(e,t){return"string"==typeof e?{url:e,...t}:e}load(e){const t=Object(r["h"])(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},e).then(()=>this._fetchService(t),()=>this._fetchService(t))),Object(y["u"])(this)}readImageFormat(e,t){const a=t.supportedImageFormatTypes;return a&&a.indexOf("PNG32")>-1?"png32":"png24"}writeSublayers(e,t,a,i){if(!this.loaded||!e)return;const r=e.slice().reverse().flatten(({sublayers:e})=>e&&e.toArray().reverse()).toArray();let s=!1;if(this.capabilities&&this.capabilities.operations.supportsExportMap&&this.capabilities.exportMap.supportsDynamicLayers){const e=Object(u["d"])(i.origin);if(3===e){const e=this.createSublayersForOrigin("service").sublayers;s=Object(J["c"])(r,e,2)}else if(e>3){const e=this.createSublayersForOrigin("portal-item");s=Object(J["c"])(r,e.sublayers,Object(u["d"])(e.origin))}}const n=[],l={writeSublayerStructure:s,...i};let o=s;r.forEach(e=>{const t=e.write({},l);n.push(t),o=o||"user"===e.originOf("visible")}),n.some(e=>Object.keys(e).length>1)&&(t.layers=n),o&&(t.visibleLayers=r.filter(e=>e.visible).map(e=>e.id))}createExportImageParameters(e,t,a,i){const r=i&&i.pixelRatio||1;e&&this.version>=10&&(e=e.clone().shiftCentralMeridian());const s=new U["a"]({layer:this,scale:Object(F["a"])({extent:e,width:t})*r}),n=s.toJSON();s.destroy();const l=!i||!i.rotation||this.version<10.3?{}:{rotation:-i.rotation},o=e&&e.spatialReference,c=o.wkid||JSON.stringify(o.toJSON());n.dpi*=r;const b={};if(null!=i&&i.timeExtent){const{start:e,end:t}=i.timeExtent.toJSON();b.time=e&&t&&e===t?""+e:`${null==e?"null":e},${null==t?"null":t}`}else this.timeInfo&&!this.timeInfo.hasLiveData&&(b.time="null,null");return{bbox:e&&e.xmin+","+e.ymin+","+e.xmax+","+e.ymax,bboxSR:c,imageSR:c,size:t+","+a,...n,...l,...b}}async fetchImage(e,t,a,i){const r={responseType:"image"};i&&i.timestamp&&(r.query={...r.query,_ts:i.timestamp}),i&&i.signal&&(r.signal=i.signal),this.customParameters&&Object.keys(this.customParameters).length&&(r.query={...this.customParameters,...r.query});const s=this.parsedUrl.path+"/export",n={...this.parsedUrl.query,...this.createExportImageParameters(e,t,a,i),f:"image",_ts:this.alwaysRefetch?Date.now():null};return null==n.dynamicLayers||this.capabilities.exportMap.supportsDynamicLayers?(r.query?r.query={...n,...r.query}:r.query=n,Object(d["default"])(s,r).then(e=>e.data).catch(e=>{if(Object(y["n"])(e))throw e;throw new b["a"]("mapimagelayer:image-fetch-error","Unable to load image: "+s,{error:e})})):Object(y["t"])(new b["a"]("mapimagelayer:dynamiclayer-not-supported",`service ${this.url} doesn't support dynamic layers, which is required to be able to change the sublayer's order, rendering, labeling or source.`,{query:n}))}async fetchRecomputedExtents(e={}){const t={...e,query:{returnUpdates:!0,f:"json"}},{data:a}=await Object(d["default"])(this.url,t),{extent:i,fullExtent:r,timeExtent:s}=a,n=i||r;return{fullExtent:n&&p["a"].fromJSON(n),timeExtent:s&&O["a"].fromJSON({start:s[0],end:s[1]})}}loadAll(){return Object(m["a"])(this,e=>{e(this.allSublayers)})}async _fetchService(e){if(this.sourceJSON)return void this.read(this.sourceJSON,{origin:"service",url:this.parsedUrl});const{data:t,ssl:a}=await Object(d["default"])(this.parsedUrl.path,{query:{f:"json",...this.parsedUrl.query,...this.customParameters},signal:e});a&&(this.url=this.url.replace(/^http:/i,"https:")),this.sourceJSON=t,this.read(t,{origin:"service",url:this.parsedUrl})}};Object(i["a"])([Object(n["b"])()],_.prototype,"alwaysRefetch",void 0),Object(i["a"])([Object(n["b"])()],_.prototype,"dpi",void 0),Object(i["a"])([Object(n["b"])()],_.prototype,"gdbVersion",void 0),Object(i["a"])([Object(n["b"])({json:{read:!1,write:!1}})],_.prototype,"popupEnabled",void 0),Object(i["a"])([Object(n["b"])()],_.prototype,"imageFormat",void 0),Object(i["a"])([Object(l["a"])("imageFormat",["supportedImageFormatTypes"])],_.prototype,"readImageFormat",null),Object(i["a"])([Object(n["b"])({json:{origins:{service:{read:{source:"maxImageHeight"}}}}})],_.prototype,"imageMaxHeight",void 0),Object(i["a"])([Object(n["b"])({json:{origins:{service:{read:{source:"maxImageWidth"}}}}})],_.prototype,"imageMaxWidth",void 0),Object(i["a"])([Object(n["b"])()],_.prototype,"imageTransparency",void 0),Object(i["a"])([Object(n["b"])({json:{read:!1,write:!1}})],_.prototype,"labelsVisible",void 0),Object(i["a"])([Object(n["b"])({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],_.prototype,"isReference",void 0),Object(i["a"])([Object(n["b"])({type:["ArcGISMapServiceLayer"]})],_.prototype,"operationalLayerType",void 0),Object(i["a"])([Object(n["b"])()],_.prototype,"sourceJSON",void 0),Object(i["a"])([Object(n["b"])({json:{write:{ignoreOrigin:!0}}})],_.prototype,"sublayers",void 0),Object(i["a"])([Object(c["a"])("sublayers",{layers:{type:[N["a"]]},visibleLayers:{type:[s["a"]]}})],_.prototype,"writeSublayers",null),Object(i["a"])([Object(n["b"])({type:["show","hide","hide-children"]})],_.prototype,"listMode",void 0),Object(i["a"])([Object(n["b"])({json:{read:!1},readOnly:!0,value:"map-image"})],_.prototype,"type",void 0),Object(i["a"])([Object(n["b"])(v["j"])],_.prototype,"url",void 0),_=Object(i["a"])([Object(o["a"])("esri.layers.MapImageLayer")],_);var q=_;t["default"]=q},"601a":function(e,t,a){"use strict";a.d(t,"a",(function(){return y}));var i=a("a4ee"),r=(a("c120"),a("e92d"),a("cea0"),a("59b2")),s=a("afcf"),n=a("d386"),l=(a("e041"),a("8eed"),a("f402"),a("c1da")),o=a("d4ca"),c=a("658b"),b=a("2b92"),u=a("f806");const y=e=>{let t=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(e,t){const a=t.timeInfo.exportOptions;if(!a)return null;const i=a.timeOffset,r=o["d"].fromJSON(a.timeOffsetUnits);return i&&r?new b["a"]({value:i,unit:r}):null}set timeInfo(e){Object(l["k"])(e,this.fields),this._set("timeInfo",e)}};return Object(i["a"])([Object(r["b"])({type:c["a"],json:{write:!1}})],t.prototype,"timeExtent",void 0),Object(i["a"])([Object(r["b"])({type:b["a"]})],t.prototype,"timeOffset",void 0),Object(i["a"])([Object(s["a"])("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),Object(i["a"])([Object(r["b"])({value:null,type:u["a"],json:{write:!0,origins:{"web-document":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),Object(i["a"])([Object(r["b"])({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],t.prototype,"useViewTime",void 0),t=Object(i["a"])([Object(n["a"])("esri.layers.mixins.TemporalLayer")],t),t}},"70ce":function(e,t,a){"use strict";a.d(t,"a",(function(){return y}));var i=a("a4ee"),r=(a("c120"),a("e92d"),a("cea0"),a("59b2")),s=a("d386"),n=(a("e041"),a("8eed"),a("f402"),a("fc29")),l=a("22f4"),o=a("9096"),c=a("2258"),b=a("535f");const u={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let y=class extends(Object(o["b"])(n["a"])){constructor(){super(...arguments),this._scale=null,this.view=null}destroy(){this.layer=this.view=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const e=this.visibleSublayers.map(e=>e.toExportImageJSON());return e.length?JSON.stringify(e):null}get hasDynamicLayers(){return this.layer&&Object(c["a"])(this.visibleSublayers,this.layer.serviceSublayers,this.layer)}set layer(e){this._get("layer")!==e&&(this._set("layer",e),this.handles.remove("layer"),e&&this.handles.add([e.allSublayers.on("change",()=>this.notifyChange("visibleSublayers")),e.on("sublayer-update",e=>this.notifyChange(u[e.propertyName]))],"layer"))}get layers(){const e=this.visibleSublayers;return e?e.length?"show:"+e.map(e=>e.id).join(","):"show:-1":null}get layerDefs(){const e=this.visibleSublayers.filter(e=>null!=e.definitionExpression);return e.length?JSON.stringify(e.reduce((e,t)=>(e[t.id]=t.definitionExpression,e),{})):null}get scale(){return null!=this._scale?this._scale:this.view&&this.view.scale||0}set scale(e){this.view||(this._scale=e,this.notifyChange("scale"))}get version(){const e=this;e.layers,e.layerDefs,e.dynamicLayers,e.timeExtent;const t=e.layer;return t&&(t.dpi,t.imageFormat,t.imageTransparency,t.gdbVersion),(this._get("version")||0)+1}set version(e){this._set("version",e)}get visibleSublayers(){const e=[];if(!this.layer)return e;const t=this.layer.sublayers,a=t=>{const i=this.scale,r=0===i,s=0===t.minScale||i<=t.minScale,n=0===t.maxScale||i>=t.maxScale;t.visible&&(r||s&&n)&&(t.sublayers?t.sublayers.forEach(a):e.unshift(t))};t&&t.forEach(a);const i=this._get("visibleSublayers");return!i||i.length!==e.length||i.some((t,a)=>e[a]!==t)?e:i}toJSON(){const e=this.layer;let t={dpi:e.dpi,format:e.imageFormat,transparent:e.imageTransparency,gdbVersion:e.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?t.dynamicLayers=this.dynamicLayers:t={...t,layers:this.layers,layerDefs:this.layerDefs},t}};Object(i["a"])([Object(r["b"])({readOnly:!0,dependsOn:["hasDynamicLayers","visibleSublayers"]})],y.prototype,"dynamicLayers",null),Object(i["a"])([Object(r["b"])({readOnly:!0,dependsOn:["visibleSublayers","layer.serviceSublayers","layer.capabilities"]})],y.prototype,"hasDynamicLayers",null),Object(i["a"])([Object(r["b"])()],y.prototype,"layer",null),Object(i["a"])([Object(r["b"])({readOnly:!0,dependsOn:["visibleSublayers"]})],y.prototype,"layers",null),Object(i["a"])([Object(r["b"])({readOnly:!0,dependsOn:["visibleSublayers"]})],y.prototype,"layerDefs",null),Object(i["a"])([Object(r["b"])({type:Number,dependsOn:["view.scale"]})],y.prototype,"scale",null),Object(i["a"])([Object(r["b"])(l["a"])],y.prototype,"timeExtent",void 0),Object(i["a"])([Object(r["b"])({dependsOn:["layers","layerDefs","dynamicLayers","layer.dpi","layer.imageFormat","layer.imageTransparency","layer.gdbVersion","timeExtent"]})],y.prototype,"version",null),Object(i["a"])([Object(r["b"])({type:b["a"]})],y.prototype,"view",void 0),Object(i["a"])([Object(r["b"])({readOnly:!0,dependsOn:["layer.sublayers","scale"]})],y.prototype,"visibleSublayers",null),y=Object(i["a"])([Object(s["a"])("esri.layers.mixins.ExportImageParameters")],y)},f806:function(e,t,a){"use strict";var i,r=a("a4ee"),s=(a("c120"),a("7ffa")),n=(a("e92d"),a("cea0"),a("59b2")),l=a("afcf"),o=a("d386"),c=a("09db"),b=(a("e041"),a("8eed"),a("f402"),a("6a0e")),u=a("d4ca"),y=a("658b"),p=a("2b92");let d=i=class extends b["a"]{constructor(e){super(e),this.respectsDaylightSaving=!1,this.timezone=null}readRespectsDaylightSaving(e,t){return void 0!==t.respectsDaylightSaving?t.respectsDaylightSaving:void 0!==t.respectDaylightSaving&&t.respectDaylightSaving}clone(){const{respectsDaylightSaving:e,timezone:t}=this;return new i({respectsDaylightSaving:e,timezone:t})}};Object(r["a"])([Object(n["b"])({type:Boolean,json:{write:!0}})],d.prototype,"respectsDaylightSaving",void 0),Object(r["a"])([Object(l["a"])("respectsDaylightSaving",["respectsDaylightSaving","respectDaylightSaving"])],d.prototype,"readRespectsDaylightSaving",null),Object(r["a"])([Object(n["b"])({type:String,json:{read:{source:"timeZone"},write:{target:"timeZone"}}})],d.prototype,"timezone",void 0),d=i=Object(r["a"])([Object(o["a"])("esri.layers.support.TimeReference")],d);var m,h=d,O=h;let j=m=class extends b["a"]{constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeReference=null,this.trackIdField=null,this.useTime=!0}readFullTimeExtent(e,t){if(!t.timeExtent||!Array.isArray(t.timeExtent)||2!==t.timeExtent.length)return null;const a=new Date(t.timeExtent[0]),i=new Date(t.timeExtent[1]);return new y["a"]({start:a,end:i})}writeFullTimeExtent(e,t){e&&e.start&&e.end?t.timeExtent=[e.start.getTime(),e.end.getTime()]:t.timeExtent=null}readInterval(e,t){return t.timeInterval&&t.timeIntervalUnits?new p["a"]({value:t.timeInterval,unit:u["d"].fromJSON(t.timeIntervalUnits)}):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?new p["a"]({value:t.defaultTimeInterval,unit:u["d"].fromJSON(t.defaultTimeIntervalUnits)}):null}writeInterval(e,t){if(e){const a=e.toJSON();t.timeInterval=a.value,t.timeIntervalUnits=a.unit}else t.timeInterval=null,t.timeIntervalUnits=null}clone(){const{cumulative:e,endField:t,hasLiveData:a,interval:i,startField:r,timeReference:n,fullTimeExtent:l,trackIdField:o,useTime:c}=this;return new m({cumulative:e,endField:t,hasLiveData:a,interval:i,startField:r,timeReference:Object(s["a"])(n),fullTimeExtent:Object(s["a"])(l),trackIdField:o,useTime:c})}};Object(r["a"])([Object(n["b"])({type:Boolean,json:{read:{source:"exportOptions.timeDataCumulative"},write:{target:"exportOptions.timeDataCumulative"}}})],j.prototype,"cumulative",void 0),Object(r["a"])([Object(n["b"])({type:String,json:{read:{source:"endTimeField"},write:{target:"endTimeField",allowNull:!0}}})],j.prototype,"endField",void 0),Object(r["a"])([Object(n["b"])({type:y["a"],json:{write:{enabled:!0,allowNull:!0}}})],j.prototype,"fullTimeExtent",void 0),Object(r["a"])([Object(l["a"])("fullTimeExtent",["timeExtent"])],j.prototype,"readFullTimeExtent",null),Object(r["a"])([Object(c["a"])("fullTimeExtent")],j.prototype,"writeFullTimeExtent",null),Object(r["a"])([Object(n["b"])({type:Boolean,json:{write:!0}})],j.prototype,"hasLiveData",void 0),Object(r["a"])([Object(n["b"])({type:p["a"],json:{write:{enabled:!0,allowNull:!0}}})],j.prototype,"interval",void 0),Object(r["a"])([Object(l["a"])("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],j.prototype,"readInterval",null),Object(r["a"])([Object(c["a"])("interval")],j.prototype,"writeInterval",null),Object(r["a"])([Object(n["b"])({type:String,json:{read:{source:"startTimeField"},write:{target:"startTimeField",allowNull:!0}}})],j.prototype,"startField",void 0),Object(r["a"])([Object(n["b"])({type:O,json:{write:{enabled:!0,allowNull:!0}}})],j.prototype,"timeReference",void 0),Object(r["a"])([Object(n["b"])({type:String,json:{write:{enabled:!0,allowNull:!0}}})],j.prototype,"trackIdField",void 0),Object(r["a"])([Object(n["b"])({type:Boolean,json:{read:{source:"exportOptions.useTime"},write:{target:"exportOptions.useTime"}}})],j.prototype,"useTime",void 0),j=m=Object(r["a"])([Object(o["a"])("esri.layers.support.TimeInfo")],j);var v=j;t["a"]=v}}]);