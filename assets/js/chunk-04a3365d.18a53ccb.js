(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-04a3365d"],{"22f4":function(e,t,i){"use strict";i.d(t,"a",(function(){return g})),i.d(t,"b",(function(){return b})),i.d(t,"c",(function(){return d})),i.d(t,"d",(function(){return p})),i.d(t,"e",(function(){return m})),i.d(t,"f",(function(){return y})),i.d(t,"g",(function(){return u})),i.d(t,"h",(function(){return f})),i.d(t,"i",(function(){return c})),i.d(t,"j",(function(){return h}));var r=i("4c37"),n=i("fcf2"),s=i("c478"),a=i("42be"),o=i("658b"),l=i("fd14");const c={type:Boolean,value:!0,json:{origins:{"web-scene":{read:{source:["id","url","layerType"],reader(e,t){if(null!=t.screenSizePerspective||"defaults"!==this.originOf("screenSizePerspectiveEnabled"))return t.screenSizePerspective;Object(r["a"])(this).store.set("screenSizePerspectiveEnabled",!1,0)}},write:{ignoreOrigin:!0,target:"screenSizePerspective",writer(e,t,i,r){("defaults"===this.originOf("screenSizePerspectiveEnabled")&&e||Object(s["a"])(this,"screenSizePerspectiveEnabled",{},r))&&(t[i]=e)}}}}}},u={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,t)=>!t.disablePopup},write:{enabled:!0,writer(e,t,i){t[i]=!e}}}},d={type:Boolean,value:!0,json:{name:"showLabels",write:!0}},h={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:n["f"]}}},p={type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:!0}},b={value:null,type:l["a"],json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:!0}};function f(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const m={type:Number,json:{origins:{"web-document":{default:1,write:!0,read:!0},"portal-item":{write:!0}}}},y={...m,json:{...m.json,origins:{"web-document":{...m.json.origins["web-document"],write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,t,i)=>i&&"service"!==i.origin||!t.drawingInfo||void 0===t.drawingInfo.transparency?t.layerDefinition&&t.layerDefinition.drawingInfo&&void 0!==t.layerDefinition.drawingInfo.transparency?Object(a["b"])(t.layerDefinition.drawingInfo.transparency):void 0:Object(a["b"])(t.drawingInfo.transparency)}}},g={type:o["a"],dependsOn:["view.timeExtent","layer.timeExtent","layer.timeInfo","layer.timeOffset","layer.timeOffset.value","layer.timeOffset.unit","layer.useViewTime"],readOnly:!0,get(){var e,t;if(null==(e=this.layer)||!e.timeInfo)return null;const i=null==(t=this.view)?void 0:t.timeExtent,r=this.layer.timeExtent,n=this.layer.useViewTime?i&&r?i.intersection(r):i||r:r;if(!n||n.isEmpty)return n;const s=this.layer.timeOffset,a=s?n.offset(-s.value,s.unit):n,o=this._get("timeExtent");return a.equals(o)?o:a}}},2535:function(e,t,i){"use strict";i.r(t);var r=i("a4ee"),n=(i("c120"),i("e92d")),s=(i("cea0"),i("59b2")),a=i("d386"),o=i("ce50"),l=(i("e041"),i("8eed"),i("f402"),i("f4cc")),c=i("3af1"),u=i("6c7a"),d=i("b807"),h=i("365a");const p=e=>{let t=class extends e{async fetchPopupFeatures(e){const{layer:t}=this;if(!e)return Object(l["t"])(new o["a"]("wmslayerview:fetchPopupFeatures","Nothing to fetch without area",{layer:t}));const{popupEnabled:i}=t;if(!i)return Object(l["t"])(new o["a"]("wmslayerview:fetchPopupFeatures","popupEnabled should be true",{popupEnabled:i}));const r=this.createFetchPopupFeaturesQuery(e),{extent:n,width:s,height:a,x:c,y:u}=r;if(!(n&&s&&a))throw new o["a"]("wmslayerview:fetchPopupFeatures","WMSLayer does not support fetching features.",{extent:n,width:s,height:a});const d=t.fetchFeatureInfo(n,s,a,c,u);return d?d.then(e=>[e]):Object(l["u"])([])}};return Object(r["a"])([Object(s["b"])()],t.prototype,"layer",void 0),t=Object(r["a"])([Object(a["a"])("esri.layers.mixins.WMSLayerView")],t),t};var b=i("2d39"),f=i("566d"),m=i("bdb8");const y=n["a"].getLogger("esri.views.2d.layers.WMSLayerView2D");let g=class extends(p(Object(u["a"])(Object(f["a"])(h["a"])))){initialize(){const{layer:e,view:t}=this;e.supportsSpatialReference(t.spatialReference)||this.addResolvingPromise(Object(l["t"])(new o["a"]("layerview:spatial-reference-incompatible","The spatial references supported by this WMS layer are incompatible with the spatial reference of the view",{layer:e})))}hitTest(){return null}update(e){this.strategy.update(e).catch(e=>{Object(l["n"])(e)||y.error(e)})}attach(){const{layer:e,view:t}=this,{imageMaxHeight:i,imageMaxWidth:r}=e;this._bitmapContainer=new b["a"],this.container.addChild(this._bitmapContainer),this.strategy=new m["a"]({container:this._bitmapContainer,fetchSource:this.fetchImage.bind(this),requestUpdate:this.requestUpdate.bind(this),imageMaxHeight:i,imageMaxWidth:r,imageRotationSupported:!1,imageNormalizationSupported:!1,hidpi:!1}),this._exportWMSImageParameters=new d["a"]({layer:e,view:t}),this.handles.add(this._exportWMSImageParameters.watch("version",e=>{this._exportImageVersion!==e&&(this._exportImageVersion=e,this.requestUpdate())}),"wms")}detach(){this.handles.remove("wms"),this.strategy.destroy(),this._exportWMSImageParameters.layer=null,this._exportWMSImageParameters.destroy(),this._exportWMSImageParameters=null,this.container.removeChild(this._bitmapContainer),this._bitmapContainer.removeAllChildren()}moveStart(){}viewChange(){}moveEnd(){this.requestUpdate()}createFetchPopupFeaturesQuery(e){const{view:t}=this,i=this._bitmapContainer,{x:r,y:n}=e,{spatialReference:s}=t;let a=null,o=0,l=0;i.children.some(e=>{const{width:t,height:i,resolution:u,x:d,y:h}=e,p=d+u*t,b=h-u*i;return r>=d&&r<=p&&n<=h&&n>=b&&(a=new c["a"]({xmin:d,ymin:b,xmax:p,ymax:h,spatialReference:s}),o=t,l=i,!0)});const u=a.width/o,d=Math.round((r-a.xmin)/u),h=Math.round((a.ymax-n)/u);return{extent:a,width:o,height:l,x:d,y:h}}async doRefresh(){this.requestUpdate()}isUpdating(){return this.strategy.updating||this.updateRequested}fetchImage(e,t,i,r){return this.layer.fetchImage(e,t,i,{timeExtent:this._exportWMSImageParameters.timeExtent,timestamp:this.refreshTimestamp,...r})}};Object(r["a"])([Object(s["b"])()],g.prototype,"strategy",void 0),Object(r["a"])([Object(s["b"])({dependsOn:["strategy.updating"]})],g.prototype,"updating",void 0),g=Object(r["a"])([Object(a["a"])("esri.views.2d.layers.WMSLayerView2D")],g);var O=g;t["default"]=O},"2d39":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var r=i("c84e"),n=i("3b1a"),s=i("9a02");class a extends s["a"]{prepareRenderPasses(e){const t=e.registerRenderPass({name:"bitmap",brushes:[n["a"].bitmap],target:()=>this.children,drawPhase:r["c"].MAP});return[...super.prepareRenderPasses(e),t]}}},"365a":function(e,t,i){"use strict";var r=i("a4ee"),n=(i("c120"),i("e92d")),s=(i("cea0"),i("59b2")),a=i("d386"),o=(i("e041"),i("8eed"),i("f402"),i("fc29")),l=i("ce6d"),c=i("a5d8"),u=i("fab3"),d=i("9096");let h=class extends(Object(d["b"])(Object(c["a"])(Object(u["b"])(l["a"].EventedMixin(o["a"]))))){constructor(e){super(e),this.layer=null,this.parent=null}initialize(){this.when().catch(e=>{if("layerview:create-error"!==e.name){const t=this.layer&&this.layer.id||"no id",i=this.layer&&this.layer.title||"no title";throw n["a"].getLogger(this.declaredClass).error("#resolve()",`Failed to resolve layer view (layer title: '${i}', id: '${t}')`,e),e}})}get fullOpacity(){const e=e=>null==e?1:e;return e(this.get("layer.opacity"))*e(this.get("parent.fullOpacity"))}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer.legendEnabled}get updating(){return!!(this.updatingHandles&&this.updatingHandles.updating||this.isUpdating())}get visible(){return!0===this.get("layer.visible")}set visible(e){void 0!==e?this._override("visible",e):this._clearOverride("visible")}canResume(){return!this.get("parent.suspended")&&this.get("view.ready")&&this.get("layer.loaded")&&this.visible||!1}getSuspendInfo(){const e=this.parent&&this.parent.suspended?this.parent.suspendInfo:{};return this.view&&this.view.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e}isUpdating(){return!1}};Object(r["a"])([Object(s["b"])({dependsOn:["layer.opacity","parent.fullOpacity"]})],h.prototype,"fullOpacity",null),Object(r["a"])([Object(s["b"])()],h.prototype,"layer",void 0),Object(r["a"])([Object(s["b"])()],h.prototype,"parent",void 0),Object(r["a"])([Object(s["b"])({readOnly:!0,dependsOn:["visible","layer.loaded","parent.suspended","view?.ready"]})],h.prototype,"suspended",null),Object(r["a"])([Object(s["b"])({readOnly:!0,dependsOn:["visible","layer.loaded","parent.suspended","view?.ready"]})],h.prototype,"suspendInfo",null),Object(r["a"])([Object(s["b"])({readOnly:!0,dependsOn:["suspended","layer.legendEnabled?"]})],h.prototype,"legendEnabled",null),Object(r["a"])([Object(s["b"])({type:Boolean,dependsOn:["updatingHandles.updating"],readOnly:!0})],h.prototype,"updating",null),Object(r["a"])([Object(s["b"])({dependsOn:["layer.visible"]})],h.prototype,"visible",null),h=Object(r["a"])([Object(a["a"])("esri.views.layers.LayerView")],h);var p=h;t["a"]=p},"566d":function(e,t,i){"use strict";i.d(t,"a",(function(){return P}));var r=i("a4ee"),n=(i("c120"),i("e92d"),i("cea0"),i("59b2")),s=i("d386"),a=(i("e041"),i("8eed"),i("f402"),i("2c4f")),o=i("7d7d"),l=i("3795"),c=i("6a0e");let u=class extends c["a"]{};u=Object(r["a"])([Object(s["a"])("esri.views.layers.support.ClipArea")],u);var d,h=u,p=h;let b=d=class extends p{constructor(){super(...arguments),this.type="rect",this.left=null,this.right=null,this.top=null,this.bottom=null}clone(){return new d({left:this.left,right:this.right,top:this.top,bottom:this.bottom})}get version(){return(this._get("version")||0)+1}};Object(r["a"])([Object(n["b"])({type:[Number,String],json:{write:!0}})],b.prototype,"left",void 0),Object(r["a"])([Object(n["b"])({type:[Number,String],json:{write:!0}})],b.prototype,"right",void 0),Object(r["a"])([Object(n["b"])({type:[Number,String],json:{write:!0}})],b.prototype,"top",void 0),Object(r["a"])([Object(n["b"])({type:[Number,String],json:{write:!0}})],b.prototype,"bottom",void 0),Object(r["a"])([Object(n["b"])({readOnly:!0,dependsOn:["left","right","top","bottom"]})],b.prototype,"version",null),b=d=Object(r["a"])([Object(s["a"])("esri.views.layers.support.ClipRect")],b);var f,m=b,y=m,g=i("00c0"),O=i("3760"),x=i("3af1"),v=i("1219"),j=i("a9ab");i("e06a");const w={base:O["a"],key:"type",typeMap:{extent:x["a"],polygon:v["a"]}};let _=f=class extends p{constructor(){super(...arguments),this.type="geometry",this.geometry=null}get version(){return(this._get("version")||0)+1}clone(){return new f({geometry:this.geometry.clone()})}};Object(r["a"])([Object(n["b"])({types:w,json:{read:j["a"],write:!0}})],_.prototype,"geometry",void 0),Object(r["a"])([Object(n["b"])({readOnly:!0,dependsOn:["geometry"]})],_.prototype,"version",null),_=f=Object(r["a"])([Object(s["a"])("esri.views.layers.support.Geometry")],_);var E=_,S=E;let N=class extends p{constructor(){super(...arguments),this.type="path",this.path=[]}get version(){return(this._get("version")||0)+1}};Object(r["a"])([Object(n["b"])({type:[[[Number]]],json:{write:!0}})],N.prototype,"path",void 0),Object(r["a"])([Object(n["b"])({readOnly:!0,dependsOn:["path"]})],N.prototype,"version",null),N=Object(r["a"])([Object(s["a"])("esri.views.layers.support.Path")],N);var R=N,I=R;const M=a["a"].ofType({key:"type",base:p,typeMap:{rect:y,path:I,geometry:S}}),P=e=>{let t=class extends e{constructor(){super(...arguments),this.clips=new M,this.moving=!1,this.attached=!1,this.lastUpdateId=-1,this.updateRequested=!1}initialize(){var e;this.container||(this.container=new g["a"]),this.container.fadeTransitionEnabled=!0,this.container.opacity=0,this.container.clips=this.clips,this.handles.add([Object(l["a"])(this,"suspended",e=>{this.container&&(this.container.visible=!e),this.view&&!e&&this.updateRequested&&this.view.requestUpdate()},!0),Object(l["a"])(this,["layer.opacity","container"],()=>{var e,t;this.container&&(this.container.opacity=null!=(e=null==(t=this.layer)?void 0:t.opacity)?e:1)},!0),Object(l["a"])(this,["layer.blendMode"],e=>{this.container&&(this.container.blendMode=e)},!0),Object(l["a"])(this,["layer.effect"],e=>{this.container&&(this.container.effect=e)},!0),this.clips.on("change",()=>{this.container.clips=this.clips,this.notifyChange("clips")})]),null!=(e=this.view)&&e.whenLayerView?this.view.whenLayerView(this.layer).then(e=>{e!==this||this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)},()=>{}):this.when().then(()=>{this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)},()=>{})}destroy(){this.attached&&(this.detach(),this.attached=!1),this.handles.remove("initialize"),this.updateRequested=!1}get updating(){return!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())}isVisibleAtScale(e){let t=!0;const i=this.layer,r=i.minScale,n=i.maxScale;if(null!=r&&null!=n){let i=!r,s=!n;!i&&e<=r&&(i=!0),!s&&e>=n&&(s=!0),t=i&&s}return t}requestUpdate(){this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())}processUpdate(e){!this.isFulfilled()||this.isResolved()?(this._set("updateParameters",e),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(e))):this.updateRequested=!1}isUpdating(){return!1}isRendering(){return!1}canResume(){return!!super.canResume()&&this.isVisibleAtScale(this.view.scale)}};return Object(r["a"])([Object(n["b"])({type:M,set(e){const t=Object(o["b"])(e,this._get("clips"),M);this._set("clips",t)}})],t.prototype,"clips",void 0),Object(r["a"])([Object(n["b"])()],t.prototype,"moving",void 0),Object(r["a"])([Object(n["b"])()],t.prototype,"attached",void 0),Object(r["a"])([Object(n["b"])()],t.prototype,"container",void 0),Object(r["a"])([Object(n["b"])({dependsOn:["view.scale","layer.minScale","layer.maxScale"]})],t.prototype,"suspended",void 0),Object(r["a"])([Object(n["b"])({readOnly:!0})],t.prototype,"updateParameters",void 0),Object(r["a"])([Object(n["b"])()],t.prototype,"updateRequested",void 0),Object(r["a"])([Object(n["b"])({dependsOn:["attached","updateRequested","suspended"]})],t.prototype,"updating",null),Object(r["a"])([Object(n["b"])()],t.prototype,"view",void 0),t=Object(r["a"])([Object(s["a"])("esri.views.2d.layers.LayerView2D")],t),t}},"894c":function(e,t,i){"use strict";t["a"]=class{constructor(e,t,i){this.pixelBlock=e,this.extent=t,this.originalPixelBlock=i}get width(){return this.pixelBlock?this.pixelBlock.width:0}get height(){return this.pixelBlock?this.pixelBlock.height:0}render(e){const t=this.pixelBlock;if(!t)return;const i=this.filter({pixelBlock:t}),r=i.pixelBlock.getAsRGBA(),n=e.createImageData(i.pixelBlock.width,i.pixelBlock.height);n.data.set(r),e.putImageData(n,0,0)}getRenderedRasterPixels(){const e=this.filter({pixelBlock:this.pixelBlock});return{width:e.pixelBlock.width,height:e.pixelBlock.height,renderedRasterPixels:new Uint8Array(e.pixelBlock.getAsRGBA().buffer)}}}},"9b40":function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var r=i("2255"),n=i("8048");const s={inches:Object(n["a"])(1,"meters","inches"),feet:Object(n["a"])(1,"meters","feet"),"us-feet":Object(n["a"])(1,"meters","us-feet"),yards:Object(n["a"])(1,"meters","yards"),miles:Object(n["a"])(1,"meters","miles"),"nautical-miles":Object(n["a"])(1,"meters","nautical-miles"),millimeters:Object(n["a"])(1,"meters","millimeters"),centimeters:Object(n["a"])(1,"meters","centimeters"),decimeters:Object(n["a"])(1,"meters","decimeters"),meters:Object(n["a"])(1,"meters","meters"),kilometers:Object(n["a"])(1,"meters","kilometers"),"decimal-degrees":1/Object(n["h"])(1,"meters",r["a"].radius)}},a84e:function(e,t,i){"use strict";i.d(t,"a",(function(){return u})),i.d(t,"b",(function(){return d})),i.d(t,"c",(function(){return c})),i.d(t,"d",(function(){return I}));var r=i("ce50"),n=i("e041"),s=i("5996"),a=i("3af1");const o=[[4001,4999],[2044,2045],[2081,2083],[2085,2086],[2093,2093],[2096,2098],[2105,2132],[2169,2170],[2176,2180],[2193,2193],[2200,2200],[2206,2212],[2319,2319],[2320,2462],[2523,2549],[2551,2735],[2738,2758],[2935,2941],[2953,2953],[3006,3030],[3034,3035],[3058,3059],[3068,3068],[3114,3118],[3126,3138],[3300,3301],[3328,3335],[3346,3346],[3350,3352],[3366,3366],[3416,3416],[20004,20032],[20064,20092],[21413,21423],[21473,21483],[21896,21899],[22171,22177],[22181,22187],[22191,22197],[25884,25884],[27205,27232],[27391,27398],[27492,27492],[28402,28432],[28462,28492],[30161,30179],[30800,30800],[31251,31259],[31275,31279],[31281,31290],[31466,31700]],l={84:4326,83:4269,27:4267};function c(e){if(!e)return null;const t={idCounter:-1};"string"==typeof e&&(e=(new DOMParser).parseFromString(e,"text/xml"));const i=e.documentElement;if("ServiceExceptionReport"===i.nodeName){const e=Array.prototype.slice.call(i.childNodes).map(e=>e.textContent).join("\r\n");throw new r["a"]("wmslayer:wms-capabilities-xml-is-not-valid","The server returned errors when the WMS capabilities were requested.",e)}const n=b("Capability",i),s=b("Service",i),o=b("Request",n);if(!n||!s||!o)return null;const l=b("Layer",n);if(!l)return null;const c="WMS_Capabilities"===i.nodeName||"WMT_MS_Capabilities"===i.nodeName?i.getAttribute("version"):"1.3.0",u=m("Title",s,"")||m("Name",s,""),d=m("AccessConstraints",s,""),p=m("Abstract",s,""),f=parseInt(m("MaxWidth",s,"5000"),10),y=parseInt(m("MaxHeight",s,"5000"),10),x=O(o,"GetMap"),j=g(o,"GetMap"),_=v(l,c,t);let E,S,N,R,I=0;if(Array.prototype.slice.call(n.childNodes).forEach(e=>{"Layer"===e.nodeName&&(0===I?E=e:1===I?(_.name&&(_.name="",_.sublayers.push(v(E,c,t))),_.sublayers.push(v(e,c,t))):_.sublayers.push(v(e,c,t)),I++)}),!_)return null;const M=_.fullExtents;if(S=_.sublayers,S||(S=[]),0===S.length&&S.push(_),N=_.extent,!N){const e=new a["a"](S[0].extent);_.extent=e.toJSON(),N=_.extent}if(R=_.spatialReferences,!R.length&&S.length>0){const e=t=>{let i=[];return t.sublayers.forEach(t=>{!i.length&&t.spatialReferences.length&&(i=t.spatialReferences||e(t))}),i};S.forEach(t=>{R.length||(R=t.spatialReferences||e(t))})}const P=g(o,"GetFeatureInfo");let A;if(P){const e=O(o,"GetFeatureInfo");e.indexOf("text/html")>-1?A="text/html":e.indexOf("text/plain")>-1&&(A="text/plain")}if(!A){const e=function(t){t&&(t.queryable=!1,t.sublayers&&t.sublayers.forEach(t=>{e(t)}))};e(_)}const T=h(S),q=_.minScale||0,F=_.maxScale||0,C=_.dimensions,k=T.reduce((e,t)=>e.concat(t.dimensions),[]),L=C.concat(k).filter(w);let W=null;if(L.length>0){let e=Number.POSITIVE_INFINITY,t=Number.NEGATIVE_INFINITY;L.forEach(i=>{const{extent:r}=i;var n;n=r,Array.isArray(n)&&n.length>0&&n[0]instanceof Date?r.forEach(i=>{e=Math.min(e,i.getTime()),t=Math.max(t,i.getTime())}):r.forEach(i=>{e=Math.min(e,i.min.getTime()),t=Math.max(t,i.max.getTime())})}),W={startTimeField:null,endTimeField:null,trackIdField:null,timeExtent:[e,t]}}return{copyright:d,description:p,dimensions:C,extent:N,fullExtents:M,featureInfoFormat:A,featureInfoUrl:P,mapUrl:j,maxWidth:f,maxHeight:y,maxScale:F,minScale:q,layers:T,spatialReferences:R,supportedImageFormatTypes:x,timeInfo:W,title:u,version:c}}function u(e){return o.some(t=>{const i=t[0],r=t[1];return e>=i&&e<=r})}function d(e){return e.length?e.filter(e=>e.popupEnabled&&e.name&&e.queryable).map(e=>e.name).join(","):""}function h(e){let t=[];return e.forEach(e=>{t.push(e),e.sublayers&&e.sublayers.length&&(t=t.concat(h(e.sublayers)),delete e.sublayers)}),t}function p(e,t,i){var r;return null!=(r=t.getAttribute(e))?r:i}function b(e,t){for(let i=0;i<t.childNodes.length;i++){const r=t.childNodes[i];if(j(r)&&r.nodeName===e)return r}return null}function f(e,t){const i=[];for(let r=0;r<t.childNodes.length;r++){const n=t.childNodes[r];j(n)&&n.nodeName===e&&i.push(n)}return i}function m(e,t,i){const r=b(e,t);return r?r.textContent:i}function y(e,t,i){if(!e)return null;const r=parseFloat(e.getAttribute("minx")),n=parseFloat(e.getAttribute("miny")),o=parseFloat(e.getAttribute("maxx")),l=parseFloat(e.getAttribute("maxy"));let c,u,d,h;i?(c=isNaN(n)?-Number.MAX_VALUE:n,u=isNaN(r)?-Number.MAX_VALUE:r,d=isNaN(l)?Number.MAX_VALUE:l,h=isNaN(o)?Number.MAX_VALUE:o):(c=isNaN(r)?-Number.MAX_VALUE:r,u=isNaN(n)?-Number.MAX_VALUE:n,d=isNaN(o)?Number.MAX_VALUE:o,h=isNaN(l)?Number.MAX_VALUE:l);const p=new s["a"]({wkid:t});return new a["a"]({xmin:c,ymin:u,xmax:d,ymax:h,spatialReference:p})}function g(e,t){const i=b(t,e);if(i){const e=b("DCPType",i);if(e){const t=b("HTTP",e);if(t){const e=b("Get",t);if(e){let t=function(e,t,i,r){const n=b(e,i);return n?p(t,n,r):r}("OnlineResource","xlink:href",e,null);if(t)return t.indexOf("&")===t.length-1&&(t=t.substring(0,t.length-1)),function(e,t){const i=[],r=Object(n["I"])(e);for(const n in r.query)r.query.hasOwnProperty(n)&&-1===t.indexOf(n.toLowerCase())&&i.push(n+"="+r.query[n]);return r.path+(i.length?"?"+i.join("&"):"")}(t,["service","request"])}}}}return null}function O(e,t){const i=f("Operation",e);if(0===i.length)return f("Format",b(t,e)).map(e=>e.textContent);const r=[];return i.forEach(e=>{e.getAttribute("name")===t&&f("Format",e).forEach(e=>{r.push(e.textContent)})}),r}function x(e,t,i){const r=b(t,e);if(!r)return i;const{textContent:n}=r;if(null==n||""===n)return i;const s=Number(n);return isNaN(s)?i:s}function v(e,t,i){var r;if(!e)return null;const n={id:i.idCounter++,fullExtents:[],parentLayerId:null,queryable:"1"===e.getAttribute("queryable"),spatialReferences:[],sublayers:null},o=b("LatLonBoundingBox",e),c=b("EX_GeographicBoundingBox",e);let d=null;o&&(d=y(o,4326)),c&&(d=new a["a"](0,0,0,0,new s["a"]({wkid:4326})),d.xmin=parseFloat(m("westBoundLongitude",c,"0")),d.ymin=parseFloat(m("southBoundLatitude",c,"0")),d.xmax=parseFloat(m("eastBoundLongitude",c,"0")),d.ymax=parseFloat(m("northBoundLatitude",c,"0"))),o||c||(d=new a["a"](-180,-90,180,90,new s["a"]({wkid:4326}))),n.minScale=x(e,"MaxScaleDenominator",0),n.maxScale=x(e,"MinScaleDenominator",0);const h=["1.0.0","1.1.0","1.1.1"].indexOf(t)>-1?"SRS":"CRS";return Array.prototype.slice.call(e.childNodes).forEach(e=>{if("Name"===e.nodeName)n.name=e.textContent||"";else if("Title"===e.nodeName)n.title=e.textContent||"";else if("Abstract"===e.nodeName)n.description=e.textContent||"";else if("BoundingBox"===e.nodeName){const i=e.getAttribute(h);if(i&&0===i.indexOf("EPSG:")){const r=parseInt(i.substring(5),10);0===r||isNaN(r)||d||(d="1.3.0"===t?y(e,r,u(r)):y(e,r))}const r=i&&i.indexOf(":");if(r&&r>-1){let s=parseInt(i.substring(r+1,i.length),10);0===s||isNaN(s)||(s=l[s]?l[s]:s);const a="1.3.0"===t?y(e,s,u(s)):y(e,s);n.fullExtents.push(a)}}else if(e.nodeName===h)e.textContent.split(" ").forEach(e=>{0===(e=e.indexOf(":")>-1?parseInt(e.split(":")[1],10):parseInt(e,10))||isNaN(e)||(l[e]&&(e=l[e]),-1===n.spatialReferences.indexOf(e)&&n.spatialReferences.push(e))});else if("Style"!==e.nodeName||n.legendURL){if("Layer"===e.nodeName){const r=v(e,t,i);r&&(r.parentLayerId=n.id,n.sublayers||(n.sublayers=[]),n.sublayers.push(r))}}else{const t=b("LegendURL",e);if(t){const e=b("OnlineResource",t);e&&(n.legendURL=e.getAttribute("xlink:href"))}}}),n.extent=null==(r=d)?void 0:r.toJSON(),n.dimensions=f("Dimension",e).filter(e=>e.getAttribute("name")&&e.getAttribute("units")&&e.textContent).map(e=>{const t=e.getAttribute("name"),i=e.getAttribute("units"),r=e.textContent,n=e.getAttribute("unitSymbol"),s=e.getAttribute("default"),a="0"!==p("default",e,"0"),o="0"!==p("nearestValue",e,"0"),l="0"!==p("current",e,"0");return/^time$/i.test(t)&&/^ISO8601$/i.test(i)?{name:"time",units:"ISO8601",extent:S(r),default:S(s),multipleValues:a,nearestValue:o,current:l}:/^elevation$/i.test(t)?{name:"elevation",units:i,extent:_(r),unitSymbol:n,default:_(s),multipleValues:a,nearestValue:o}:{name:t,units:i,extent:E(r),unitSymbol:n,default:E(s),multipleValues:a,nearestValue:o}}),n}function j(e){return e.nodeType===Node.ELEMENT_NODE}function w(e){return"time"===e.name}function _(e){if(!e)return null;const t=-1!==e.indexOf("/"),i=e.split(",");return t?i.map(e=>{const t=e.split("/");return t.length<2?null:{min:parseFloat(t[0]),max:parseFloat(t[1]),resolution:t.length>=3&&"0"!==t[2]?parseFloat(t[2]):void 0}}).filter(e=>e):i.map(e=>parseFloat(e))}function E(e){if(!e)return null;const t=-1!==e.indexOf("/"),i=e.split(",");return t?i.map(e=>{const t=e.split("/");return t.length<2?null:{min:t[0],max:t[1],resolution:t.length>=3&&"0"!==t[2]?t[2]:void 0}}).filter(e=>e):i}function S(e){if(!e)return null;const t=-1!==e.indexOf("/"),i=e.split(",");return t?i.map(e=>{const t=e.split("/");return t.length<2?null:{min:new Date(t[0]),max:new Date(t[1]),resolution:t.length>=3&&"0"!==t[2]?N(t[2]):void 0}}).filter(e=>e):i.map(e=>new Date(e))}function N(e){const t=e.match(/(?:p(\d+y|\d+(?:.|,)\d+y)?(\d+m|\d+(?:.|,)\d+m)?(\d+d|\d+(?:.|,)\d+d)?)?(?:t(\d+h|\d+(?:.|,)\d+h)?(\d+m|\d+(?:.|,)\d+m)?(\d+s|\d+(?:.|,)\d+s)?)?/i);return t?{years:R(t[1]),months:R(t[2]),days:R(t[3]),hours:R(t[4]),minutes:R(t[5]),seconds:R(t[6])}:null}function R(e){if(!e)return 0;const t=e.match(/(?:\d+(?:.|,)\d+|\d+)/);if(!t)return 0;const i=t[0].replace(",",".");return Number(i)}function I(e){return e.toISOString().replace(/\.[0-9]{3}/,"")}},b807:function(e,t,i){"use strict";var r=i("a4ee"),n=(i("c120"),i("e92d"),i("cea0"),i("59b2")),s=i("d386"),a=(i("e041"),i("8eed"),i("f402"),i("fc29")),o=i("af40"),l=i("22f4"),c=i("a84e");const u={visible:"visibleSublayers"},d=[102100,3857,102113,900913],h=[3395,54004];let p=class extends a["a"]{constructor(){super(...arguments),this._layerHandles=new o["a"],this.extent=null,this._scale=null,this.view=null}set layer(e){this._get("layer")!==e&&(this._set("layer",e),this._layerHandles&&(this._layerHandles.removeAll(),this._layerHandles=null),e&&(this._layerHandles||(this._layerHandles=new o["a"]),this._layerHandles.add([e.sublayers.on("change",()=>this.notifyChange("visibleSublayers")),e.on("wms-sublayer-update",e=>this.notifyChange(u[e.propertyName]))])))}get layers(){const{visibleSublayers:e}=this;return e.filter(e=>e.name).map(e=>e.name).join(",")}get scale(){return null!=this._scale?this._scale:this.view&&this.view.scale||0}set scale(e){this.view||(this._scale=e,this.notifyChange("scale"))}get version(){return(this._get("version")||0)+1}get visibleSublayers(){const{layer:e,scale:t}=this,{sublayers:i}=e,r=[],n=e=>{const{minScale:i,maxScale:s,sublayers:a,visible:o}=e;o&&(0===t||(0===i||t<=i)&&(0===s||t>=s))&&(a?a.forEach(n):r.unshift(e))};return null==i||i.forEach(n),r}get wkid(){const{extent:e,layer:t}=this,i=t.spatialReferences;let r=e.spatialReference&&e.spatialReference.wkid;i&&-1===i.indexOf(r)&&e.spatialReference.latestWkid&&(r=e.spatialReference.latestWkid);const n=d.some(e=>e===r);if(!i)return r;if(n){const e=[];i.forEach(t=>{d.indexOf(t)>-1&&e.push(t)}),e.length||i.forEach(t=>{h.indexOf(t)>-1&&e.push(t)}),r=e.length>0?e[0]:d[0]}return r}toJSON(){const{extent:e,layer:t,layers:i}=this,{imageFormat:r,imageTransparency:n,spatialReferences:s,version:a}=t;let{wkid:o}=this;s&&-1===s.indexOf(o)&&e.spatialReference.latestWkid&&(o=e.spatialReference.latestWkid);const{xmin:l,ymin:u,xmax:d,ymax:h}=e,p={bbox:"1.3.0"===t.version&&Object(c["a"])(o)?`${u},${l},${h},${d}`:`${l},${u},${d},${h}`,format:r,request:"GetMap",service:"WMS",styles:"",transparent:n,version:a};return isNaN(o)||("1.3.0"===a?p.crs="EPSG:"+o:p.srs="EPSG:"+o),{...p,layers:i}}};Object(r["a"])([Object(n["b"])()],p.prototype,"extent",void 0),Object(r["a"])([Object(n["b"])()],p.prototype,"layer",null),Object(r["a"])([Object(n["b"])({readOnly:!0,dependsOn:["visibleSublayers"]})],p.prototype,"layers",null),Object(r["a"])([Object(n["b"])({type:Number,dependsOn:["view.scale"]})],p.prototype,"scale",null),Object(r["a"])([Object(n["b"])(l["a"])],p.prototype,"timeExtent",void 0),Object(r["a"])([Object(n["b"])({type:Number,dependsOn:["layers","layer.imageTransparency","timeExtent"],readOnly:!0})],p.prototype,"version",null),Object(r["a"])([Object(n["b"])()],p.prototype,"view",void 0),Object(r["a"])([Object(n["b"])({readOnly:!0,dependsOn:["layer.sublayers","scale"]})],p.prototype,"visibleSublayers",null),Object(r["a"])([Object(n["b"])({dependsOn:[],autoTracked:!1})],p.prototype,"wkid",null),p=Object(r["a"])([Object(s["a"])("esri.layers.support.ExportWMSImageParameters")],p);var b=p;t["a"]=b},bdb8:function(e,t,i){"use strict";var r=i("a4ee"),n=(i("c120"),i("e92d"),i("cea0"),i("59b2")),s=i("d386"),a=(i("e041"),i("8eed"),i("f402"),i("f4cc")),o=i("fc29"),l=i("7f83"),c=i("3af1"),u=i("9180"),d=i("dff3"),h=i("ae54"),p=i("018d");const b=Math.PI/180;function f(e,t){const i=t.rotation*b,r=Math.abs(Math.cos(i)),n=Math.abs(Math.sin(i)),[s,a]=t.size;return e[0]=Math.round(a*n+s*r),e[1]=Math.round(a*r+s*n),e}function m(e,t,i,r){const[n,s]=t,[a,o]=r,l=.5*i;return e[0]=n-l*a,e[1]=s-l*o,e[2]=n+l*a,e[3]=s+l*o,e}var y=i("c73a");const g=Object(u["d"])(),O=[0,0],x=new h["a"](0,0,0,0),v=2048,j=2048,w=!1,_=!1,E=!1;let S=class extends o["a"]{constructor(e){super(e),this._imagePromise=null,this.hidpi=E,this.imageMaxWidth=v,this.imageMaxHeight=j,this.imageRotationSupported=w,this.imageNormalizationSupported=_,this.update=Object(a["i"])(async(e,t)=>{const i=e.state,r=Object(l["d"])(i.spatialReference),n=this.hidpi?e.pixelRatio:1;if(!e.stationary||this.destroyed)return;this.imageRotationSupported?(O[0]=i.size[0],O[1]=i.size[1]):f(O,i);const s=Math.floor(O[0]*n)>this.imageMaxWidth||Math.floor(O[1]*n)>this.imageMaxHeight,a=r&&(i.extent.xmin<r.valid[0]||i.extent.xmax>r.valid[1]),o=!this.imageNormalizationSupported&&a,c=!s&&!o,u=this.imageRotationSupported?i.rotation:0;if(c)this._imagePromise=this._singleExport(i,O,u,n,t);else{let e=Math.min(this.imageMaxWidth,this.imageMaxHeight);o&&(e=Math.min(i.worldScreenWidth,e)),this._imagePromise=this._tiledExport(i,e,u,n,t)}return this._imagePromise.then(async e=>{this._imagePromise=null,await Promise.all(e.map(e=>(this.container.addChild(e),e.fadeIn())));for(const t of this.container.children)e.includes(t)||t.fadeOut().then(()=>{this.container.removeChild(t)})}).catch(e=>{throw this._imagePromise=null,e})},5e3)}destroy(){}get updating(){return null!==this._imagePromise}updateExports(e){for(const t of this.container.children){if(!t.visible||!t.stage)return;e(t)?console.error("ExportStrategy.updateExports doesn't support promise yet"):(t.invalidateTexture(),t.requestRender())}}_export(e,t,i,r,n,s){return Object(a["u"])().then(()=>this.fetchSource(e,Math.floor(t*n),Math.floor(i*n),{rotation:r,pixelRatio:n,signal:s})).then(i=>{const s=new y["a"](i);return s.x=e.xmin,s.y=e.ymax,s.resolution=e.width/t,s.rotation=r,s.pixelRatio=n,s})}_singleExport(e,t,i,r,n){m(g,e.center,e.resolution,t);const s=new c["a"](g[0],g[1],g[2],g[3],e.spatialReference);return this._export(s,t[0],t[1],i,r,n).then(e=>[e])}_tiledExport(e,t,i,r,n){const s=d["a"].create({size:t,spatialReference:e.spatialReference,scales:[e.scale]}),o=new p["a"](s),l=o.getTileCoverage(e);if(!l)return null;const u=[];return l.forEach((s,a,l,d)=>{x.set(s,a,l,d),o.getTileBounds(g,x);const h=new c["a"](g[0],g[1],g[2],g[3],e.spatialReference);u.push(this._export(h,t,t,i,r,n))}),Object(a["b"])(u)}};Object(r["a"])([Object(n["b"])()],S.prototype,"_imagePromise",void 0),Object(r["a"])([Object(n["b"])()],S.prototype,"container",void 0),Object(r["a"])([Object(n["b"])()],S.prototype,"fetchSource",void 0),Object(r["a"])([Object(n["b"])()],S.prototype,"hidpi",void 0),Object(r["a"])([Object(n["b"])()],S.prototype,"imageMaxWidth",void 0),Object(r["a"])([Object(n["b"])()],S.prototype,"imageMaxHeight",void 0),Object(r["a"])([Object(n["b"])()],S.prototype,"imageRotationSupported",void 0),Object(r["a"])([Object(n["b"])()],S.prototype,"imageNormalizationSupported",void 0),Object(r["a"])([Object(n["b"])()],S.prototype,"requestUpdate",void 0),Object(r["a"])([Object(n["b"])({dependsOn:["_imagePromise"]})],S.prototype,"updating",null),S=Object(r["a"])([Object(s["a"])("esri.views.2d.layers.support.ExportStrategy")],S);var N=S;t["a"]=N},c73a:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));i("c120");var r=i("1c92"),n=i("8c71"),s=i("738e"),a=(i("9f8b"),i("a1ff")),o=(i("d267"),i("6df2"),i("7c4b")),l=i("894c");function c(e,t,i){const r={target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071};return t&&i&&(r.width=t,r.height=i),new a["a"](e,r)}class u extends o["a"]{constructor(e=null,t=!0){super(),this.requestRenderOnSourceChangedEnabled=t,this._textureInvalidated=!0,this.stencilRef=0,this.coordScale=[1,1],this._height=void 0,this.pixelRatio=1,this.resolution=0,this.rotation=0,this._source=null,this._width=void 0,this.x=0,this.y=0,this.transforms={dvs:Object(n["b"])()},this.source=e,this.requestRender=this.requestRender.bind(this)}destroy(){this._texture&&(this._texture.dispose(),this._texture=null)}get isSourceScaled(){return this.width!==this.sourceWidth||this.height!==this.sourceHeight}get height(){return void 0!==this._height?this._height:this.sourceHeight}set height(e){this._height=e}get source(){return this._source}set source(e){this._source=e,this.invalidateTexture()}get sourceHeight(){return this._source instanceof HTMLImageElement?this._source.naturalHeight:this._source.height}get sourceWidth(){return this._source instanceof HTMLImageElement?this._source.naturalWidth:this._source.width}get width(){return void 0!==this._width?this._width:this.sourceWidth}set width(e){this._width=e}beforeRender(e){super.beforeRender(e),this.updateTexture(e)}invalidateTexture(){this._textureInvalidated||(this._textureInvalidated=!0,this.requestRenderOnSourceChangedEnabled&&this.requestRender())}setTransform(e){const t=Object(r["d"])(this.transforms.dvs),[i,n]=e.toScreenNoRotation([0,0],this.x,this.y),a=this.resolution/this.pixelRatio/e.resolution,o=a*this.width,l=a*this.height,c=Math.PI*this.rotation/180;Object(r["a"])(t,t,Object(s["b"])(i,n)),Object(r["a"])(t,t,Object(s["b"])(o/2,l/2)),Object(r["h"])(t,t,-c),Object(r["a"])(t,t,Object(s["b"])(-o/2,-l/2)),Object(r["e"])(t,t,Object(s["b"])(o,l)),Object(r["f"])(this.transforms.dvs,e.displayViewMat3,t)}setSamplingProfile(e){this._texture&&(e.mips&&!this._texture.descriptor.hasMipmap&&this._texture.generateMipmap(),this._texture.setSamplingMode(e.samplingMode))}bind({context:e},t){this._texture&&e.bindTexture(this._texture,t)}updateTexture({context:e}){var t;if(!this.stage)return null==(t=this._texture)||t.dispose(),void(this._texture=null);if(!this._textureInvalidated)return;this._textureInvalidated=!1,this._texture||(this.source?this._texture=c(e,this.sourceWidth,this.sourceHeight):this._texture=c(e));const i=this.source;if(i){if(this._texture.resize(this.sourceWidth,this.sourceHeight),function(e){return e&&"render"in e}(i))if(i instanceof l["a"]){const e=i.getRenderedRasterPixels();this._texture.setData(e.renderedRasterPixels)}else this._texture.setData(function(e){const t=document.createElement("canvas");return t.width=e.width,t.height=e.height,e.render(t.getContext("2d")),t}(i));else(function(e){return e&&!("render"in e)})(i)&&this._texture.setData(i);this.ready()}else this._texture.setData(null)}onAttach(){this.invalidateTexture()}onDetach(){this.invalidateTexture()}}},fd14:function(e,t,i){"use strict";var r,n=i("a4ee"),s=(i("c120"),i("b2b2")),a=(i("e92d"),i("cea0"),i("59b2")),o=i("fa8a"),l=i("afcf"),c=i("d386"),u=i("09db"),d=(i("e041"),i("8eed"),i("f402"),i("6a0e")),h=i("c1da");let p=r=class extends d["a"]{async collectRequiredFields(e,t){return Object(h["a"])(e,t,this.expression)}clone(){return new r({expression:this.expression,title:this.title})}};Object(n["a"])([Object(a["b"])({type:String,json:{write:!0}})],p.prototype,"expression",void 0),Object(n["a"])([Object(a["b"])({type:String,json:{write:!0}})],p.prototype,"title",void 0),p=r=Object(n["a"])([Object(c["a"])("esri.layers.support.FeatureExpressionInfo")],p);var b=p,f=b,m=i("9b40");const y=function(){const e=Object.keys(m["a"]);return e.sort(),e}();var g;const O=Object(o["b"])()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),x=new o["a"]({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let v=g=class extends d["a"]{constructor(){super(...arguments),this.offset=null}readFeatureExpressionInfo(e,t){return null!=e?e:t.featureExpression&&0===t.featureExpression.value?{expression:"0"}:void 0}writeFeatureExpressionInfo(e,t,i,r){t[i]=e.write(null,r),"0"===e.expression&&(t.featureExpression={value:0})}get mode(){return this._isOverridden("mode")?this._get("mode"):Object(s["h"])(this.offset)||this.featureExpressionInfo?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,t){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,t):null}clone(){return new g({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}};Object(n["a"])([Object(a["b"])({type:f,json:{write:!0}})],v.prototype,"featureExpressionInfo",void 0),Object(n["a"])([Object(l["a"])("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],v.prototype,"readFeatureExpressionInfo",null),Object(n["a"])([Object(u["a"])("featureExpressionInfo",{featureExpressionInfo:{type:f},"featureExpression.value":{type:[0]}})],v.prototype,"writeFeatureExpressionInfo",null),Object(n["a"])([Object(a["b"])({type:O.apiValues,dependsOn:["offset","featureExpressionInfo"],nonNullable:!0,json:{type:O.jsonValues,read:O.read,write:{writer:O.write,isRequired:!0}}})],v.prototype,"mode",null),Object(n["a"])([Object(a["b"])({type:Number,json:{write:!0}})],v.prototype,"offset",void 0),Object(n["a"])([Object(a["b"])({type:y,json:{type:String,read:x.read,write:x.write}})],v.prototype,"unit",null),v=g=Object(n["a"])([Object(c["a"])("esri.layers.support.ElevationInfo")],v);var j=v;t["a"]=j}}]);